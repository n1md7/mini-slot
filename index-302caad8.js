var n1=Object.defineProperty;var o1=(i,t,e)=>t in i?n1(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var q=(i,t,e)=>(o1(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();var ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wh(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function a1(i){if(i.__esModule)return i;var t=i.default;if(typeof t=="function"){var e=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var r=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(e,s,r.get?r:{enumerable:!0,get:function(){return i[s]}})}),e}var l1={exports:{}},_e="top",Ne="bottom",Ue="right",ve="left",Th="auto",Kn=[_e,Ne,Ue,ve],Or="start",In="end",$g="clippingParents",pd="viewport",ln="popper",Gg="reference",ru=Kn.reduce(function(i,t){return i.concat([t+"-"+Or,t+"-"+In])},[]),md=[].concat(Kn,[Th]).reduce(function(i,t){return i.concat([t,t+"-"+Or,t+"-"+In])},[]),Hg="beforeRead",zg="read",Vg="afterRead",jg="beforeMain",Wg="main",Xg="afterMain",Yg="beforeWrite",qg="write",Kg="afterWrite",Zg=[Hg,zg,Vg,jg,Wg,Xg,Yg,qg,Kg];function Wi(i){return i?(i.nodeName||"").toLowerCase():null}function $e(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function kr(i){var t=$e(i).Element;return i instanceof t||i instanceof Element}function oi(i){var t=$e(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function gd(i){if(typeof ShadowRoot>"u")return!1;var t=$e(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function h1(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},r=t.attributes[e]||{},n=t.elements[e];!oi(n)||!Wi(n)||(Object.assign(n.style,s),Object.keys(r).forEach(function(o){var a=r[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function c1(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],n=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:e[s]),a=o.reduce(function(l,h){return l[h]="",l},{});!oi(r)||!Wi(r)||(Object.assign(r.style,a),Object.keys(n).forEach(function(l){r.removeAttribute(l)}))})}}const _d={name:"applyStyles",enabled:!0,phase:"write",fn:h1,effect:c1,requires:["computeStyles"]};function $i(i){return i.split("-")[0]}var Tr=Math.max,Fl=Math.min,Mn=Math.round;function nu(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Qg(){return!/^((?!chrome|android).)*safari/i.test(nu())}function Rn(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var s=i.getBoundingClientRect(),r=1,n=1;t&&oi(i)&&(r=i.offsetWidth>0&&Mn(s.width)/i.offsetWidth||1,n=i.offsetHeight>0&&Mn(s.height)/i.offsetHeight||1);var o=kr(i)?$e(i):window,a=o.visualViewport,l=!Qg()&&e,h=(s.left+(l&&a?a.offsetLeft:0))/r,c=(s.top+(l&&a?a.offsetTop:0))/n,u=s.width/r,d=s.height/n;return{width:u,height:d,top:c,right:h+u,bottom:c+d,left:h,x:h,y:c}}function vd(i){var t=Rn(i),e=i.offsetWidth,s=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:s}}function Jg(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&gd(e)){var s=t;do{if(s&&i.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function ds(i){return $e(i).getComputedStyle(i)}function u1(i){return["table","td","th"].indexOf(Wi(i))>=0}function Vs(i){return((kr(i)?i.ownerDocument:i.document)||window.document).documentElement}function Eh(i){return Wi(i)==="html"?i:i.assignedSlot||i.parentNode||(gd(i)?i.host:null)||Vs(i)}function Rp(i){return!oi(i)||ds(i).position==="fixed"?null:i.offsetParent}function d1(i){var t=/firefox/i.test(nu()),e=/Trident/i.test(nu());if(e&&oi(i)){var s=ds(i);if(s.position==="fixed")return null}var r=Eh(i);for(gd(r)&&(r=r.host);oi(r)&&["html","body"].indexOf(Wi(r))<0;){var n=ds(r);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||t&&n.willChange==="filter"||t&&n.filter&&n.filter!=="none")return r;r=r.parentNode}return null}function _a(i){for(var t=$e(i),e=Rp(i);e&&u1(e)&&ds(e).position==="static";)e=Rp(e);return e&&(Wi(e)==="html"||Wi(e)==="body"&&ds(e).position==="static")?t:e||d1(i)||t}function yd(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Fo(i,t,e){return Tr(i,Fl(t,e))}function f1(i,t,e){var s=Fo(i,t,e);return s>e?e:s}function t_(){return{top:0,right:0,bottom:0,left:0}}function e_(i){return Object.assign({},t_(),i)}function i_(i,t){return t.reduce(function(e,s){return e[s]=i,e},{})}var p1=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,e_(typeof t!="number"?t:i_(t,Kn))};function m1(i){var t,e=i.state,s=i.name,r=i.options,n=e.elements.arrow,o=e.modifiersData.popperOffsets,a=$i(e.placement),l=yd(a),h=[ve,Ue].indexOf(a)>=0,c=h?"height":"width";if(!(!n||!o)){var u=p1(r.padding,e),d=vd(n),p=l==="y"?_e:ve,m=l==="y"?Ne:Ue,g=e.rects.reference[c]+e.rects.reference[l]-o[l]-e.rects.popper[c],_=o[l]-e.rects.reference[l],x=_a(n),b=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,y=g/2-_/2,w=u[p],T=b-d[c]-u[m],D=b/2-d[c]/2+y,I=Fo(w,D,T),P=l;e.modifiersData[s]=(t={},t[P]=I,t.centerOffset=I-D,t)}}function g1(i){var t=i.state,e=i.options,s=e.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Jg(t.elements.popper,r)&&(t.elements.arrow=r))}const s_={name:"arrow",enabled:!0,phase:"main",fn:m1,effect:g1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Dn(i){return i.split("-")[1]}var _1={top:"auto",right:"auto",bottom:"auto",left:"auto"};function v1(i,t){var e=i.x,s=i.y,r=t.devicePixelRatio||1;return{x:Mn(e*r)/r||0,y:Mn(s*r)/r||0}}function Dp(i){var t,e=i.popper,s=i.popperRect,r=i.placement,n=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,h=i.adaptive,c=i.roundOffsets,u=i.isFixed,d=o.x,p=d===void 0?0:d,m=o.y,g=m===void 0?0:m,_=typeof c=="function"?c({x:p,y:g}):{x:p,y:g};p=_.x,g=_.y;var x=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),y=ve,w=_e,T=window;if(h){var D=_a(e),I="clientHeight",P="clientWidth";if(D===$e(e)&&(D=Vs(e),ds(D).position!=="static"&&a==="absolute"&&(I="scrollHeight",P="scrollWidth")),D=D,r===_e||(r===ve||r===Ue)&&n===In){w=Ne;var S=u&&D===T&&T.visualViewport?T.visualViewport.height:D[I];g-=S-s.height,g*=l?1:-1}if(r===ve||(r===_e||r===Ne)&&n===In){y=Ue;var M=u&&D===T&&T.visualViewport?T.visualViewport.width:D[P];p-=M-s.width,p*=l?1:-1}}var O=Object.assign({position:a},h&&_1),N=c===!0?v1({x:p,y:g},$e(e)):{x:p,y:g};if(p=N.x,g=N.y,l){var B;return Object.assign({},O,(B={},B[w]=b?"0":"",B[y]=x?"0":"",B.transform=(T.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",B))}return Object.assign({},O,(t={},t[w]=b?g+"px":"",t[y]=x?p+"px":"",t.transform="",t))}function y1(i){var t=i.state,e=i.options,s=e.gpuAcceleration,r=s===void 0?!0:s,n=e.adaptive,o=n===void 0?!0:n,a=e.roundOffsets,l=a===void 0?!0:a,h={placement:$i(t.placement),variation:Dn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Dp(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Dp(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const xd={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:y1,data:{}};var Ya={passive:!0};function x1(i){var t=i.state,e=i.instance,s=i.options,r=s.scroll,n=r===void 0?!0:r,o=s.resize,a=o===void 0?!0:o,l=$e(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&h.forEach(function(c){c.addEventListener("scroll",e.update,Ya)}),a&&l.addEventListener("resize",e.update,Ya),function(){n&&h.forEach(function(c){c.removeEventListener("scroll",e.update,Ya)}),a&&l.removeEventListener("resize",e.update,Ya)}}const bd={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:x1,data:{}};var b1={left:"right",right:"left",bottom:"top",top:"bottom"};function wl(i){return i.replace(/left|right|bottom|top/g,function(t){return b1[t]})}var w1={start:"end",end:"start"};function Op(i){return i.replace(/start|end/g,function(t){return w1[t]})}function wd(i){var t=$e(i),e=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:e,scrollTop:s}}function Td(i){return Rn(Vs(i)).left+wd(i).scrollLeft}function T1(i,t){var e=$e(i),s=Vs(i),r=e.visualViewport,n=s.clientWidth,o=s.clientHeight,a=0,l=0;if(r){n=r.width,o=r.height;var h=Qg();(h||!h&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:n,height:o,x:a+Td(i),y:l}}function E1(i){var t,e=Vs(i),s=wd(i),r=(t=i.ownerDocument)==null?void 0:t.body,n=Tr(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Tr(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-s.scrollLeft+Td(i),l=-s.scrollTop;return ds(r||e).direction==="rtl"&&(a+=Tr(e.clientWidth,r?r.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function Ed(i){var t=ds(i),e=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+s)}function r_(i){return["html","body","#document"].indexOf(Wi(i))>=0?i.ownerDocument.body:oi(i)&&Ed(i)?i:r_(Eh(i))}function Bo(i,t){var e;t===void 0&&(t=[]);var s=r_(i),r=s===((e=i.ownerDocument)==null?void 0:e.body),n=$e(s),o=r?[n].concat(n.visualViewport||[],Ed(s)?s:[]):s,a=t.concat(o);return r?a:a.concat(Bo(Eh(o)))}function ou(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function A1(i,t){var e=Rn(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function kp(i,t,e){return t===pd?ou(T1(i,e)):kr(t)?A1(t,e):ou(E1(Vs(i)))}function C1(i){var t=Bo(Eh(i)),e=["absolute","fixed"].indexOf(ds(i).position)>=0,s=e&&oi(i)?_a(i):i;return kr(s)?t.filter(function(r){return kr(r)&&Jg(r,s)&&Wi(r)!=="body"}):[]}function S1(i,t,e,s){var r=t==="clippingParents"?C1(i):[].concat(t),n=[].concat(r,[e]),o=n[0],a=n.reduce(function(l,h){var c=kp(i,h,s);return l.top=Tr(c.top,l.top),l.right=Fl(c.right,l.right),l.bottom=Fl(c.bottom,l.bottom),l.left=Tr(c.left,l.left),l},kp(i,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function n_(i){var t=i.reference,e=i.element,s=i.placement,r=s?$i(s):null,n=s?Dn(s):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(r){case _e:l={x:o,y:t.y-e.height};break;case Ne:l={x:o,y:t.y+t.height};break;case Ue:l={x:t.x+t.width,y:a};break;case ve:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var h=r?yd(r):null;if(h!=null){var c=h==="y"?"height":"width";switch(n){case Or:l[h]=l[h]-(t[c]/2-e[c]/2);break;case In:l[h]=l[h]+(t[c]/2-e[c]/2);break}}return l}function On(i,t){t===void 0&&(t={});var e=t,s=e.placement,r=s===void 0?i.placement:s,n=e.strategy,o=n===void 0?i.strategy:n,a=e.boundary,l=a===void 0?$g:a,h=e.rootBoundary,c=h===void 0?pd:h,u=e.elementContext,d=u===void 0?ln:u,p=e.altBoundary,m=p===void 0?!1:p,g=e.padding,_=g===void 0?0:g,x=e_(typeof _!="number"?_:i_(_,Kn)),b=d===ln?Gg:ln,y=i.rects.popper,w=i.elements[m?b:d],T=S1(kr(w)?w:w.contextElement||Vs(i.elements.popper),l,c,o),D=Rn(i.elements.reference),I=n_({reference:D,element:y,strategy:"absolute",placement:r}),P=ou(Object.assign({},y,I)),S=d===ln?P:D,M={top:T.top-S.top+x.top,bottom:S.bottom-T.bottom+x.bottom,left:T.left-S.left+x.left,right:S.right-T.right+x.right},O=i.modifiersData.offset;if(d===ln&&O){var N=O[r];Object.keys(M).forEach(function(B){var F=[Ue,Ne].indexOf(B)>=0?1:-1,U=[_e,Ne].indexOf(B)>=0?"y":"x";M[B]+=N[U]*F})}return M}function P1(i,t){t===void 0&&(t={});var e=t,s=e.placement,r=e.boundary,n=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,h=l===void 0?md:l,c=Dn(s),u=c?a?ru:ru.filter(function(m){return Dn(m)===c}):Kn,d=u.filter(function(m){return h.indexOf(m)>=0});d.length===0&&(d=u);var p=d.reduce(function(m,g){return m[g]=On(i,{placement:g,boundary:r,rootBoundary:n,padding:o})[$i(g)],m},{});return Object.keys(p).sort(function(m,g){return p[m]-p[g]})}function I1(i){if($i(i)===Th)return[];var t=wl(i);return[Op(i),t,Op(t)]}function M1(i){var t=i.state,e=i.options,s=i.name;if(!t.modifiersData[s]._skip){for(var r=e.mainAxis,n=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,h=e.padding,c=e.boundary,u=e.rootBoundary,d=e.altBoundary,p=e.flipVariations,m=p===void 0?!0:p,g=e.allowedAutoPlacements,_=t.options.placement,x=$i(_),b=x===_,y=l||(b||!m?[wl(_)]:I1(_)),w=[_].concat(y).reduce(function(z,X){return z.concat($i(X)===Th?P1(t,{placement:X,boundary:c,rootBoundary:u,padding:h,flipVariations:m,allowedAutoPlacements:g}):X)},[]),T=t.rects.reference,D=t.rects.popper,I=new Map,P=!0,S=w[0],M=0;M<w.length;M++){var O=w[M],N=$i(O),B=Dn(O)===Or,F=[_e,Ne].indexOf(N)>=0,U=F?"width":"height",V=On(t,{placement:O,boundary:c,rootBoundary:u,altBoundary:d,padding:h}),k=F?B?Ue:ve:B?Ne:_e;T[U]>D[U]&&(k=wl(k));var W=wl(k),$=[];if(n&&$.push(V[N]<=0),a&&$.push(V[k]<=0,V[W]<=0),$.every(function(z){return z})){S=O,P=!1;break}I.set(O,$)}if(P)for(var E=m?3:1,L=function(X){var tt=w.find(function(et){var ht=I.get(et);if(ht)return ht.slice(0,X).every(function(ct){return ct})});if(tt)return S=tt,"break"},G=E;G>0;G--){var R=L(G);if(R==="break")break}t.placement!==S&&(t.modifiersData[s]._skip=!0,t.placement=S,t.reset=!0)}}const o_={name:"flip",enabled:!0,phase:"main",fn:M1,requiresIfExists:["offset"],data:{_skip:!1}};function Fp(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function Bp(i){return[_e,Ue,Ne,ve].some(function(t){return i[t]>=0})}function R1(i){var t=i.state,e=i.name,s=t.rects.reference,r=t.rects.popper,n=t.modifiersData.preventOverflow,o=On(t,{elementContext:"reference"}),a=On(t,{altBoundary:!0}),l=Fp(o,s),h=Fp(a,r,n),c=Bp(l),u=Bp(h);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:c,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":u})}const a_={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:R1};function D1(i,t,e){var s=$i(i),r=[ve,_e].indexOf(s)>=0?-1:1,n=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=n[0],a=n[1];return o=o||0,a=(a||0)*r,[ve,Ue].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function O1(i){var t=i.state,e=i.options,s=i.name,r=e.offset,n=r===void 0?[0,0]:r,o=md.reduce(function(c,u){return c[u]=D1(u,t.rects,n),c},{}),a=o[t.placement],l=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=o}const l_={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:O1};function k1(i){var t=i.state,e=i.name;t.modifiersData[e]=n_({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Ad={name:"popperOffsets",enabled:!0,phase:"read",fn:k1,data:{}};function F1(i){return i==="x"?"y":"x"}function B1(i){var t=i.state,e=i.options,s=i.name,r=e.mainAxis,n=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,h=e.rootBoundary,c=e.altBoundary,u=e.padding,d=e.tether,p=d===void 0?!0:d,m=e.tetherOffset,g=m===void 0?0:m,_=On(t,{boundary:l,rootBoundary:h,padding:u,altBoundary:c}),x=$i(t.placement),b=Dn(t.placement),y=!b,w=yd(x),T=F1(w),D=t.modifiersData.popperOffsets,I=t.rects.reference,P=t.rects.popper,S=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,M=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(D){if(n){var B,F=w==="y"?_e:ve,U=w==="y"?Ne:Ue,V=w==="y"?"height":"width",k=D[w],W=k+_[F],$=k-_[U],E=p?-P[V]/2:0,L=b===Or?I[V]:P[V],G=b===Or?-P[V]:-I[V],R=t.elements.arrow,z=p&&R?vd(R):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:t_(),tt=X[F],et=X[U],ht=Fo(0,I[V],z[V]),ct=y?I[V]/2-E-ht-tt-M.mainAxis:L-ht-tt-M.mainAxis,at=y?-I[V]/2+E+ht+et+M.mainAxis:G+ht+et+M.mainAxis,j=t.elements.arrow&&_a(t.elements.arrow),gt=j?w==="y"?j.clientTop||0:j.clientLeft||0:0,xt=(B=O==null?void 0:O[w])!=null?B:0,Gt=k+ct-xt-gt,St=k+at-xt,Pt=Fo(p?Fl(W,Gt):W,k,p?Tr($,St):$);D[w]=Pt,N[w]=Pt-k}if(a){var re,pe=w==="x"?_e:ve,ye=w==="x"?Ne:Ue,Se=D[T],Di=T==="y"?"height":"width",qs=Se+_[pe],Ks=Se-_[ye],bs=[_e,ve].indexOf(x)!==-1,ws=(re=O==null?void 0:O[T])!=null?re:0,Ts=bs?qs:Se-I[Di]-P[Di]-ws+M.altAxis,ci=bs?Se+I[Di]+P[Di]-ws-M.altAxis:Ks,ne=p&&bs?f1(Ts,Se,ci):Fo(p?Ts:qs,Se,p?ci:Ks);D[T]=ne,N[T]=ne-Se}t.modifiersData[s]=N}}const h_={name:"preventOverflow",enabled:!0,phase:"main",fn:B1,requiresIfExists:["offset"]};function L1(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function N1(i){return i===$e(i)||!oi(i)?wd(i):L1(i)}function U1(i){var t=i.getBoundingClientRect(),e=Mn(t.width)/i.offsetWidth||1,s=Mn(t.height)/i.offsetHeight||1;return e!==1||s!==1}function $1(i,t,e){e===void 0&&(e=!1);var s=oi(t),r=oi(t)&&U1(t),n=Vs(t),o=Rn(i,r,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!e)&&((Wi(t)!=="body"||Ed(n))&&(a=N1(t)),oi(t)?(l=Rn(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):n&&(l.x=Td(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function G1(i){var t=new Map,e=new Set,s=[];i.forEach(function(n){t.set(n.name,n)});function r(n){e.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&r(l)}}),s.push(n)}return i.forEach(function(n){e.has(n.name)||r(n)}),s}function H1(i){var t=G1(i);return Zg.reduce(function(e,s){return e.concat(t.filter(function(r){return r.phase===s}))},[])}function z1(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function V1(i){var t=i.reduce(function(e,s){var r=e[s.name];return e[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,e},{});return Object.keys(t).map(function(e){return t[e]})}var Lp={placement:"bottom",modifiers:[],strategy:"absolute"};function Np(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Ah(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,s=e===void 0?[]:e,r=t.defaultOptions,n=r===void 0?Lp:r;return function(a,l,h){h===void 0&&(h=n);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Lp,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},u=[],d=!1,p={state:c,setOptions:function(x){var b=typeof x=="function"?x(c.options):x;g(),c.options=Object.assign({},n,c.options,b),c.scrollParents={reference:kr(a)?Bo(a):a.contextElement?Bo(a.contextElement):[],popper:Bo(l)};var y=H1(V1([].concat(s,c.options.modifiers)));return c.orderedModifiers=y.filter(function(w){return w.enabled}),m(),p.update()},forceUpdate:function(){if(!d){var x=c.elements,b=x.reference,y=x.popper;if(Np(b,y)){c.rects={reference:$1(b,_a(y),c.options.strategy==="fixed"),popper:vd(y)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(M){return c.modifiersData[M.name]=Object.assign({},M.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var T=c.orderedModifiers[w],D=T.fn,I=T.options,P=I===void 0?{}:I,S=T.name;typeof D=="function"&&(c=D({state:c,options:P,name:S,instance:p})||c)}}}},update:z1(function(){return new Promise(function(_){p.forceUpdate(),_(c)})}),destroy:function(){g(),d=!0}};if(!Np(a,l))return p;p.setOptions(h).then(function(_){!d&&h.onFirstUpdate&&h.onFirstUpdate(_)});function m(){c.orderedModifiers.forEach(function(_){var x=_.name,b=_.options,y=b===void 0?{}:b,w=_.effect;if(typeof w=="function"){var T=w({state:c,name:x,instance:p,options:y}),D=function(){};u.push(T||D)}})}function g(){u.forEach(function(_){return _()}),u=[]}return p}}var j1=Ah(),W1=[bd,Ad,xd,_d],X1=Ah({defaultModifiers:W1}),Y1=[bd,Ad,xd,_d,l_,o_,h_,s_,a_],q1=Ah({defaultModifiers:Y1});const K1=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Xg,afterRead:Vg,afterWrite:Kg,applyStyles:_d,arrow:s_,auto:Th,basePlacements:Kn,beforeMain:jg,beforeRead:Hg,beforeWrite:Yg,bottom:Ne,clippingParents:$g,computeStyles:xd,createPopper:q1,createPopperBase:j1,createPopperLite:X1,detectOverflow:On,end:In,eventListeners:bd,flip:o_,hide:a_,left:ve,main:Wg,modifierPhases:Zg,offset:l_,placements:md,popper:ln,popperGenerator:Ah,popperOffsets:Ad,preventOverflow:h_,read:zg,reference:Gg,right:Ue,start:Or,top:_e,variationPlacements:ru,viewport:pd,write:qg},Symbol.toStringTag,{value:"Module"})),Z1=a1(K1);/*!
  * Bootstrap v5.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(i,t){(function(e,s){i.exports=s(Z1)})(ko,function(e){function s(C){const f=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(C){for(const v in C)if(v!=="default"){const A=Object.getOwnPropertyDescriptor(C,v);Object.defineProperty(f,v,A.get?A:{enumerable:!0,get:()=>C[v]})}}return f.default=C,Object.freeze(f)}const r=s(e),n=new Map,o={set(C,f,v){n.has(C)||n.set(C,new Map);const A=n.get(C);A.has(f)||A.size===0?A.set(f,v):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(A.keys())[0]}.`)},get:(C,f)=>n.has(C)&&n.get(C).get(f)||null,remove(C,f){if(!n.has(C))return;const v=n.get(C);v.delete(f),v.size===0&&n.delete(C)}},a="transitionend",l=C=>(C&&window.CSS&&window.CSS.escape&&(C=C.replace(/#([^\s"#']+)/g,(f,v)=>`#${CSS.escape(v)}`)),C),h=C=>{C.dispatchEvent(new Event(a))},c=C=>!(!C||typeof C!="object")&&(C.jquery!==void 0&&(C=C[0]),C.nodeType!==void 0),u=C=>c(C)?C.jquery?C[0]:C:typeof C=="string"&&C.length>0?document.querySelector(l(C)):null,d=C=>{if(!c(C)||C.getClientRects().length===0)return!1;const f=getComputedStyle(C).getPropertyValue("visibility")==="visible",v=C.closest("details:not([open])");if(!v)return f;if(v!==C){const A=C.closest("summary");if(A&&A.parentNode!==v||A===null)return!1}return f},p=C=>!C||C.nodeType!==Node.ELEMENT_NODE||!!C.classList.contains("disabled")||(C.disabled!==void 0?C.disabled:C.hasAttribute("disabled")&&C.getAttribute("disabled")!=="false"),m=C=>{if(!document.documentElement.attachShadow)return null;if(typeof C.getRootNode=="function"){const f=C.getRootNode();return f instanceof ShadowRoot?f:null}return C instanceof ShadowRoot?C:C.parentNode?m(C.parentNode):null},g=()=>{},_=C=>{C.offsetHeight},x=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,b=[],y=()=>document.documentElement.dir==="rtl",w=C=>{var f;f=()=>{const v=x();if(v){const A=C.NAME,H=v.fn[A];v.fn[A]=C.jQueryInterface,v.fn[A].Constructor=C,v.fn[A].noConflict=()=>(v.fn[A]=H,C.jQueryInterface)}},document.readyState==="loading"?(b.length||document.addEventListener("DOMContentLoaded",()=>{for(const v of b)v()}),b.push(f)):f()},T=(C,f=[],v=C)=>typeof C=="function"?C(...f):v,D=(C,f,v=!0)=>{if(!v)return void T(C);const A=(st=>{if(!st)return 0;let{transitionDuration:_t,transitionDelay:Ot}=window.getComputedStyle(st);const xe=Number.parseFloat(_t),Pe=Number.parseFloat(Ot);return xe||Pe?(_t=_t.split(",")[0],Ot=Ot.split(",")[0],1e3*(Number.parseFloat(_t)+Number.parseFloat(Ot))):0})(f)+5;let H=!1;const K=({target:st})=>{st===f&&(H=!0,f.removeEventListener(a,K),T(C))};f.addEventListener(a,K),setTimeout(()=>{H||h(f)},A)},I=(C,f,v,A)=>{const H=C.length;let K=C.indexOf(f);return K===-1?!v&&A?C[H-1]:C[0]:(K+=v?1:-1,A&&(K=(K+H)%H),C[Math.max(0,Math.min(K,H-1))])},P=/[^.]*(?=\..*)\.|.*/,S=/\..*/,M=/::\d+$/,O={};let N=1;const B={mouseenter:"mouseover",mouseleave:"mouseout"},F=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function U(C,f){return f&&`${f}::${N++}`||C.uidEvent||N++}function V(C){const f=U(C);return C.uidEvent=f,O[f]=O[f]||{},O[f]}function k(C,f,v=null){return Object.values(C).find(A=>A.callable===f&&A.delegationSelector===v)}function W(C,f,v){const A=typeof f=="string",H=A?v:f||v;let K=G(C);return F.has(K)||(K=C),[A,H,K]}function $(C,f,v,A,H){if(typeof f!="string"||!C)return;let[K,st,_t]=W(f,v,A);f in B&&(st=(rr=>function(fi){if(!fi.relatedTarget||fi.relatedTarget!==fi.delegateTarget&&!fi.delegateTarget.contains(fi.relatedTarget))return rr.call(this,fi)})(st));const Ot=V(C),xe=Ot[_t]||(Ot[_t]={}),Pe=k(xe,st,K?v:null);if(Pe)return void(Pe.oneOff=Pe.oneOff&&H);const di=U(st,f.replace(P,"")),es=K?function(is,rr,fi){return function lo(Xa){const s1=is.querySelectorAll(rr);for(let{target:nr}=Xa;nr&&nr!==this;nr=nr.parentNode)for(const r1 of s1)if(r1===nr)return z(Xa,{delegateTarget:nr}),lo.oneOff&&R.off(is,Xa.type,rr,fi),fi.apply(nr,[Xa])}}(C,v,st):function(is,rr){return function fi(lo){return z(lo,{delegateTarget:is}),fi.oneOff&&R.off(is,lo.type,rr),rr.apply(is,[lo])}}(C,st);es.delegationSelector=K?v:null,es.callable=st,es.oneOff=H,es.uidEvent=di,xe[di]=es,C.addEventListener(_t,es,K)}function E(C,f,v,A,H){const K=k(f[v],A,H);K&&(C.removeEventListener(v,K,!!H),delete f[v][K.uidEvent])}function L(C,f,v,A){const H=f[v]||{};for(const[K,st]of Object.entries(H))K.includes(A)&&E(C,f,v,st.callable,st.delegationSelector)}function G(C){return C=C.replace(S,""),B[C]||C}const R={on(C,f,v,A){$(C,f,v,A,!1)},one(C,f,v,A){$(C,f,v,A,!0)},off(C,f,v,A){if(typeof f!="string"||!C)return;const[H,K,st]=W(f,v,A),_t=st!==f,Ot=V(C),xe=Ot[st]||{},Pe=f.startsWith(".");if(K===void 0){if(Pe)for(const di of Object.keys(Ot))L(C,Ot,di,f.slice(1));for(const[di,es]of Object.entries(xe)){const is=di.replace(M,"");_t&&!f.includes(is)||E(C,Ot,st,es.callable,es.delegationSelector)}}else{if(!Object.keys(xe).length)return;E(C,Ot,st,K,H?v:null)}},trigger(C,f,v){if(typeof f!="string"||!C)return null;const A=x();let H=null,K=!0,st=!0,_t=!1;f!==G(f)&&A&&(H=A.Event(f,v),A(C).trigger(H),K=!H.isPropagationStopped(),st=!H.isImmediatePropagationStopped(),_t=H.isDefaultPrevented());const Ot=z(new Event(f,{bubbles:K,cancelable:!0}),v);return _t&&Ot.preventDefault(),st&&C.dispatchEvent(Ot),Ot.defaultPrevented&&H&&H.preventDefault(),Ot}};function z(C,f={}){for(const[v,A]of Object.entries(f))try{C[v]=A}catch{Object.defineProperty(C,v,{configurable:!0,get:()=>A})}return C}function X(C){if(C==="true")return!0;if(C==="false")return!1;if(C===Number(C).toString())return Number(C);if(C===""||C==="null")return null;if(typeof C!="string")return C;try{return JSON.parse(decodeURIComponent(C))}catch{return C}}function tt(C){return C.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`)}const et={setDataAttribute(C,f,v){C.setAttribute(`data-bs-${tt(f)}`,v)},removeDataAttribute(C,f){C.removeAttribute(`data-bs-${tt(f)}`)},getDataAttributes(C){if(!C)return{};const f={},v=Object.keys(C.dataset).filter(A=>A.startsWith("bs")&&!A.startsWith("bsConfig"));for(const A of v){let H=A.replace(/^bs/,"");H=H.charAt(0).toLowerCase()+H.slice(1,H.length),f[H]=X(C.dataset[A])}return f},getDataAttribute:(C,f)=>X(C.getAttribute(`data-bs-${tt(f)}`))};class ht{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(f){return f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f}_mergeConfigObj(f,v){const A=c(v)?et.getDataAttribute(v,"config"):{};return{...this.constructor.Default,...typeof A=="object"?A:{},...c(v)?et.getDataAttributes(v):{},...typeof f=="object"?f:{}}}_typeCheckConfig(f,v=this.constructor.DefaultType){for(const[H,K]of Object.entries(v)){const st=f[H],_t=c(st)?"element":(A=st)==null?`${A}`:Object.prototype.toString.call(A).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(K).test(_t))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${H}" provided type "${_t}" but expected type "${K}".`)}var A}}class ct extends ht{constructor(f,v){super(),(f=u(f))&&(this._element=f,this._config=this._getConfig(v),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),R.off(this._element,this.constructor.EVENT_KEY);for(const f of Object.getOwnPropertyNames(this))this[f]=null}_queueCallback(f,v,A=!0){D(f,v,A)}_getConfig(f){return f=this._mergeConfigObj(f,this._element),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}static getInstance(f){return o.get(u(f),this.DATA_KEY)}static getOrCreateInstance(f,v={}){return this.getInstance(f)||new this(f,typeof v=="object"?v:null)}static get VERSION(){return"5.3.1"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(f){return`${f}${this.EVENT_KEY}`}}const at=C=>{let f=C.getAttribute("data-bs-target");if(!f||f==="#"){let v=C.getAttribute("href");if(!v||!v.includes("#")&&!v.startsWith("."))return null;v.includes("#")&&!v.startsWith("#")&&(v=`#${v.split("#")[1]}`),f=v&&v!=="#"?v.trim():null}return l(f)},j={find:(C,f=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(f,C)),findOne:(C,f=document.documentElement)=>Element.prototype.querySelector.call(f,C),children:(C,f)=>[].concat(...C.children).filter(v=>v.matches(f)),parents(C,f){const v=[];let A=C.parentNode.closest(f);for(;A;)v.push(A),A=A.parentNode.closest(f);return v},prev(C,f){let v=C.previousElementSibling;for(;v;){if(v.matches(f))return[v];v=v.previousElementSibling}return[]},next(C,f){let v=C.nextElementSibling;for(;v;){if(v.matches(f))return[v];v=v.nextElementSibling}return[]},focusableChildren(C){const f=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(v=>`${v}:not([tabindex^="-"])`).join(",");return this.find(f,C).filter(v=>!p(v)&&d(v))},getSelectorFromElement(C){const f=at(C);return f&&j.findOne(f)?f:null},getElementFromSelector(C){const f=at(C);return f?j.findOne(f):null},getMultipleElementsFromSelector(C){const f=at(C);return f?j.find(f):[]}},gt=(C,f="hide")=>{const v=`click.dismiss${C.EVENT_KEY}`,A=C.NAME;R.on(document,v,`[data-bs-dismiss="${A}"]`,function(H){if(["A","AREA"].includes(this.tagName)&&H.preventDefault(),p(this))return;const K=j.getElementFromSelector(this)||this.closest(`.${A}`);C.getOrCreateInstance(K)[f]()})},xt=".bs.alert",Gt=`close${xt}`,St=`closed${xt}`;class Pt extends ct{static get NAME(){return"alert"}close(){if(R.trigger(this._element,Gt).defaultPrevented)return;this._element.classList.remove("show");const f=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,f)}_destroyElement(){this._element.remove(),R.trigger(this._element,St),this.dispose()}static jQueryInterface(f){return this.each(function(){const v=Pt.getOrCreateInstance(this);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f](this)}})}}gt(Pt,"close"),w(Pt);const re='[data-bs-toggle="button"]';class pe extends ct{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(f){return this.each(function(){const v=pe.getOrCreateInstance(this);f==="toggle"&&v[f]()})}}R.on(document,"click.bs.button.data-api",re,C=>{C.preventDefault();const f=C.target.closest(re);pe.getOrCreateInstance(f).toggle()}),w(pe);const ye=".bs.swipe",Se=`touchstart${ye}`,Di=`touchmove${ye}`,qs=`touchend${ye}`,Ks=`pointerdown${ye}`,bs=`pointerup${ye}`,ws={endCallback:null,leftCallback:null,rightCallback:null},Ts={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ci extends ht{constructor(f,v){super(),this._element=f,f&&ci.isSupported()&&(this._config=this._getConfig(v),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return ws}static get DefaultType(){return Ts}static get NAME(){return"swipe"}dispose(){R.off(this._element,ye)}_start(f){this._supportPointerEvents?this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX):this._deltaX=f.touches[0].clientX}_end(f){this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX-this._deltaX),this._handleSwipe(),T(this._config.endCallback)}_move(f){this._deltaX=f.touches&&f.touches.length>1?0:f.touches[0].clientX-this._deltaX}_handleSwipe(){const f=Math.abs(this._deltaX);if(f<=40)return;const v=f/this._deltaX;this._deltaX=0,v&&T(v>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(R.on(this._element,Ks,f=>this._start(f)),R.on(this._element,bs,f=>this._end(f)),this._element.classList.add("pointer-event")):(R.on(this._element,Se,f=>this._start(f)),R.on(this._element,Di,f=>this._move(f)),R.on(this._element,qs,f=>this._end(f)))}_eventIsPointerPenTouch(f){return this._supportPointerEvents&&(f.pointerType==="pen"||f.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ne=".bs.carousel",Wf=".data-api",so="next",jr="prev",Wr="left",La="right",px=`slide${ne}`,Qh=`slid${ne}`,mx=`keydown${ne}`,gx=`mouseenter${ne}`,_x=`mouseleave${ne}`,vx=`dragstart${ne}`,yx=`load${ne}${Wf}`,xx=`click${ne}${Wf}`,Xf="carousel",Na="active",Yf=".active",qf=".carousel-item",bx=Yf+qf,wx={ArrowLeft:La,ArrowRight:Wr},Tx={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ex={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Xr extends ct{constructor(f,v){super(f,v),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=j.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Xf&&this.cycle()}static get Default(){return Tx}static get DefaultType(){return Ex}static get NAME(){return"carousel"}next(){this._slide(so)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(jr)}pause(){this._isSliding&&h(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?R.one(this._element,Qh,()=>this.cycle()):this.cycle())}to(f){const v=this._getItems();if(f>v.length-1||f<0)return;if(this._isSliding)return void R.one(this._element,Qh,()=>this.to(f));const A=this._getItemIndex(this._getActive());if(A===f)return;const H=f>A?so:jr;this._slide(H,v[f])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(f){return f.defaultInterval=f.interval,f}_addEventListeners(){this._config.keyboard&&R.on(this._element,mx,f=>this._keydown(f)),this._config.pause==="hover"&&(R.on(this._element,gx,()=>this.pause()),R.on(this._element,_x,()=>this._maybeEnableCycle())),this._config.touch&&ci.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const v of j.find(".carousel-item img",this._element))R.on(v,vx,A=>A.preventDefault());const f={leftCallback:()=>this._slide(this._directionToOrder(Wr)),rightCallback:()=>this._slide(this._directionToOrder(La)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ci(this._element,f)}_keydown(f){if(/input|textarea/i.test(f.target.tagName))return;const v=wx[f.key];v&&(f.preventDefault(),this._slide(this._directionToOrder(v)))}_getItemIndex(f){return this._getItems().indexOf(f)}_setActiveIndicatorElement(f){if(!this._indicatorsElement)return;const v=j.findOne(Yf,this._indicatorsElement);v.classList.remove(Na),v.removeAttribute("aria-current");const A=j.findOne(`[data-bs-slide-to="${f}"]`,this._indicatorsElement);A&&(A.classList.add(Na),A.setAttribute("aria-current","true"))}_updateInterval(){const f=this._activeElement||this._getActive();if(!f)return;const v=Number.parseInt(f.getAttribute("data-bs-interval"),10);this._config.interval=v||this._config.defaultInterval}_slide(f,v=null){if(this._isSliding)return;const A=this._getActive(),H=f===so,K=v||I(this._getItems(),A,H,this._config.wrap);if(K===A)return;const st=this._getItemIndex(K),_t=di=>R.trigger(this._element,di,{relatedTarget:K,direction:this._orderToDirection(f),from:this._getItemIndex(A),to:st});if(_t(px).defaultPrevented||!A||!K)return;const Ot=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(st),this._activeElement=K;const xe=H?"carousel-item-start":"carousel-item-end",Pe=H?"carousel-item-next":"carousel-item-prev";K.classList.add(Pe),_(K),A.classList.add(xe),K.classList.add(xe),this._queueCallback(()=>{K.classList.remove(xe,Pe),K.classList.add(Na),A.classList.remove(Na,Pe,xe),this._isSliding=!1,_t(Qh)},A,this._isAnimated()),Ot&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return j.findOne(bx,this._element)}_getItems(){return j.find(qf,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(f){return y()?f===Wr?jr:so:f===Wr?so:jr}_orderToDirection(f){return y()?f===jr?Wr:La:f===jr?La:Wr}static jQueryInterface(f){return this.each(function(){const v=Xr.getOrCreateInstance(this,f);if(typeof f!="number"){if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f]()}}else v.to(f)})}}R.on(document,xx,"[data-bs-slide], [data-bs-slide-to]",function(C){const f=j.getElementFromSelector(this);if(!f||!f.classList.contains(Xf))return;C.preventDefault();const v=Xr.getOrCreateInstance(f),A=this.getAttribute("data-bs-slide-to");return A?(v.to(A),void v._maybeEnableCycle()):et.getDataAttribute(this,"slide")==="next"?(v.next(),void v._maybeEnableCycle()):(v.prev(),void v._maybeEnableCycle())}),R.on(window,yx,()=>{const C=j.find('[data-bs-ride="carousel"]');for(const f of C)Xr.getOrCreateInstance(f)}),w(Xr);const ro=".bs.collapse",Ax=`show${ro}`,Cx=`shown${ro}`,Sx=`hide${ro}`,Px=`hidden${ro}`,Ix=`click${ro}.data-api`,Jh="show",Yr="collapse",Ua="collapsing",Mx=`:scope .${Yr} .${Yr}`,tc='[data-bs-toggle="collapse"]',Rx={parent:null,toggle:!0},Dx={parent:"(null|element)",toggle:"boolean"};class qr extends ct{constructor(f,v){super(f,v),this._isTransitioning=!1,this._triggerArray=[];const A=j.find(tc);for(const H of A){const K=j.getSelectorFromElement(H),st=j.find(K).filter(_t=>_t===this._element);K!==null&&st.length&&this._triggerArray.push(H)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Rx}static get DefaultType(){return Dx}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let f=[];if(this._config.parent&&(f=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(H=>H!==this._element).map(H=>qr.getOrCreateInstance(H,{toggle:!1}))),f.length&&f[0]._isTransitioning||R.trigger(this._element,Ax).defaultPrevented)return;for(const H of f)H.hide();const v=this._getDimension();this._element.classList.remove(Yr),this._element.classList.add(Ua),this._element.style[v]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const A=`scroll${v[0].toUpperCase()+v.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ua),this._element.classList.add(Yr,Jh),this._element.style[v]="",R.trigger(this._element,Cx)},this._element,!0),this._element.style[v]=`${this._element[A]}px`}hide(){if(this._isTransitioning||!this._isShown()||R.trigger(this._element,Sx).defaultPrevented)return;const f=this._getDimension();this._element.style[f]=`${this._element.getBoundingClientRect()[f]}px`,_(this._element),this._element.classList.add(Ua),this._element.classList.remove(Yr,Jh);for(const v of this._triggerArray){const A=j.getElementFromSelector(v);A&&!this._isShown(A)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0,this._element.style[f]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ua),this._element.classList.add(Yr),R.trigger(this._element,Px)},this._element,!0)}_isShown(f=this._element){return f.classList.contains(Jh)}_configAfterMerge(f){return f.toggle=!!f.toggle,f.parent=u(f.parent),f}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const f=this._getFirstLevelChildren(tc);for(const v of f){const A=j.getElementFromSelector(v);A&&this._addAriaAndCollapsedClass([v],this._isShown(A))}}_getFirstLevelChildren(f){const v=j.find(Mx,this._config.parent);return j.find(f,this._config.parent).filter(A=>!v.includes(A))}_addAriaAndCollapsedClass(f,v){if(f.length)for(const A of f)A.classList.toggle("collapsed",!v),A.setAttribute("aria-expanded",v)}static jQueryInterface(f){const v={};return typeof f=="string"&&/show|hide/.test(f)&&(v.toggle=!1),this.each(function(){const A=qr.getOrCreateInstance(this,v);if(typeof f=="string"){if(A[f]===void 0)throw new TypeError(`No method named "${f}"`);A[f]()}})}}R.on(document,Ix,tc,function(C){(C.target.tagName==="A"||C.delegateTarget&&C.delegateTarget.tagName==="A")&&C.preventDefault();for(const f of j.getMultipleElementsFromSelector(this))qr.getOrCreateInstance(f,{toggle:!1}).toggle()}),w(qr);const Kf="dropdown",Zs=".bs.dropdown",ec=".data-api",Ox="ArrowUp",Zf="ArrowDown",kx=`hide${Zs}`,Fx=`hidden${Zs}`,Bx=`show${Zs}`,Lx=`shown${Zs}`,Qf=`click${Zs}${ec}`,Jf=`keydown${Zs}${ec}`,Nx=`keyup${Zs}${ec}`,Kr="show",Qs='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ux=`${Qs}.${Kr}`,$a=".dropdown-menu",$x=y()?"top-end":"top-start",Gx=y()?"top-start":"top-end",Hx=y()?"bottom-end":"bottom-start",zx=y()?"bottom-start":"bottom-end",Vx=y()?"left-start":"right-start",jx=y()?"right-start":"left-start",Wx={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Xx={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ui extends ct{constructor(f,v){super(f,v),this._popper=null,this._parent=this._element.parentNode,this._menu=j.next(this._element,$a)[0]||j.prev(this._element,$a)[0]||j.findOne($a,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Wx}static get DefaultType(){return Xx}static get NAME(){return Kf}toggle(){return this._isShown()?this.hide():this.show()}show(){if(p(this._element)||this._isShown())return;const f={relatedTarget:this._element};if(!R.trigger(this._element,Bx,f).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const v of[].concat(...document.body.children))R.on(v,"mouseover",g);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Kr),this._element.classList.add(Kr),R.trigger(this._element,Lx,f)}}hide(){if(p(this._element)||!this._isShown())return;const f={relatedTarget:this._element};this._completeHide(f)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(f){if(!R.trigger(this._element,kx,f).defaultPrevented){if("ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))R.off(v,"mouseover",g);this._popper&&this._popper.destroy(),this._menu.classList.remove(Kr),this._element.classList.remove(Kr),this._element.setAttribute("aria-expanded","false"),et.removeDataAttribute(this._menu,"popper"),R.trigger(this._element,Fx,f)}}_getConfig(f){if(typeof(f=super._getConfig(f)).reference=="object"&&!c(f.reference)&&typeof f.reference.getBoundingClientRect!="function")throw new TypeError(`${Kf.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return f}_createPopper(){if(r===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let f=this._element;this._config.reference==="parent"?f=this._parent:c(this._config.reference)?f=u(this._config.reference):typeof this._config.reference=="object"&&(f=this._config.reference);const v=this._getPopperConfig();this._popper=r.createPopper(f,this._menu,v)}_isShown(){return this._menu.classList.contains(Kr)}_getPlacement(){const f=this._parent;if(f.classList.contains("dropend"))return Vx;if(f.classList.contains("dropstart"))return jx;if(f.classList.contains("dropup-center"))return"top";if(f.classList.contains("dropdown-center"))return"bottom";const v=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return f.classList.contains("dropup")?v?Gx:$x:v?zx:Hx}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(v=>Number.parseInt(v,10)):typeof f=="function"?v=>f(v,this._element):f}_getPopperConfig(){const f={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(et.setDataAttribute(this._menu,"popper","static"),f.modifiers=[{name:"applyStyles",enabled:!1}]),{...f,...T(this._config.popperConfig,[f])}}_selectMenuItem({key:f,target:v}){const A=j.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(H=>d(H));A.length&&I(A,v,f===Zf,!A.includes(v)).focus()}static jQueryInterface(f){return this.each(function(){const v=ui.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f]()}})}static clearMenus(f){if(f.button===2||f.type==="keyup"&&f.key!=="Tab")return;const v=j.find(Ux);for(const A of v){const H=ui.getInstance(A);if(!H||H._config.autoClose===!1)continue;const K=f.composedPath(),st=K.includes(H._menu);if(K.includes(H._element)||H._config.autoClose==="inside"&&!st||H._config.autoClose==="outside"&&st||H._menu.contains(f.target)&&(f.type==="keyup"&&f.key==="Tab"||/input|select|option|textarea|form/i.test(f.target.tagName)))continue;const _t={relatedTarget:H._element};f.type==="click"&&(_t.clickEvent=f),H._completeHide(_t)}}static dataApiKeydownHandler(f){const v=/input|textarea/i.test(f.target.tagName),A=f.key==="Escape",H=[Ox,Zf].includes(f.key);if(!H&&!A||v&&!A)return;f.preventDefault();const K=this.matches(Qs)?this:j.prev(this,Qs)[0]||j.next(this,Qs)[0]||j.findOne(Qs,f.delegateTarget.parentNode),st=ui.getOrCreateInstance(K);if(H)return f.stopPropagation(),st.show(),void st._selectMenuItem(f);st._isShown()&&(f.stopPropagation(),st.hide(),K.focus())}}R.on(document,Jf,Qs,ui.dataApiKeydownHandler),R.on(document,Jf,$a,ui.dataApiKeydownHandler),R.on(document,Qf,ui.clearMenus),R.on(document,Nx,ui.clearMenus),R.on(document,Qf,Qs,function(C){C.preventDefault(),ui.getOrCreateInstance(this).toggle()}),w(ui);const tp="backdrop",ep="show",ip=`mousedown.bs.${tp}`,Yx={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},qx={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class sp extends ht{constructor(f){super(),this._config=this._getConfig(f),this._isAppended=!1,this._element=null}static get Default(){return Yx}static get DefaultType(){return qx}static get NAME(){return tp}show(f){if(!this._config.isVisible)return void T(f);this._append();const v=this._getElement();this._config.isAnimated&&_(v),v.classList.add(ep),this._emulateAnimation(()=>{T(f)})}hide(f){this._config.isVisible?(this._getElement().classList.remove(ep),this._emulateAnimation(()=>{this.dispose(),T(f)})):T(f)}dispose(){this._isAppended&&(R.off(this._element,ip),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const f=document.createElement("div");f.className=this._config.className,this._config.isAnimated&&f.classList.add("fade"),this._element=f}return this._element}_configAfterMerge(f){return f.rootElement=u(f.rootElement),f}_append(){if(this._isAppended)return;const f=this._getElement();this._config.rootElement.append(f),R.on(f,ip,()=>{T(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(f){D(f,this._getElement(),this._config.isAnimated)}}const Ga=".bs.focustrap",Kx=`focusin${Ga}`,Zx=`keydown.tab${Ga}`,rp="backward",Qx={autofocus:!0,trapElement:null},Jx={autofocus:"boolean",trapElement:"element"};class np extends ht{constructor(f){super(),this._config=this._getConfig(f),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Qx}static get DefaultType(){return Jx}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),R.off(document,Ga),R.on(document,Kx,f=>this._handleFocusin(f)),R.on(document,Zx,f=>this._handleKeydown(f)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,R.off(document,Ga))}_handleFocusin(f){const{trapElement:v}=this._config;if(f.target===document||f.target===v||v.contains(f.target))return;const A=j.focusableChildren(v);A.length===0?v.focus():this._lastTabNavDirection===rp?A[A.length-1].focus():A[0].focus()}_handleKeydown(f){f.key==="Tab"&&(this._lastTabNavDirection=f.shiftKey?rp:"forward")}}const op=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ap=".sticky-top",Ha="padding-right",lp="margin-right";class ic{constructor(){this._element=document.body}getWidth(){const f=document.documentElement.clientWidth;return Math.abs(window.innerWidth-f)}hide(){const f=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ha,v=>v+f),this._setElementAttributes(op,Ha,v=>v+f),this._setElementAttributes(ap,lp,v=>v-f)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ha),this._resetElementAttributes(op,Ha),this._resetElementAttributes(ap,lp)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(f,v,A){const H=this.getWidth();this._applyManipulationCallback(f,K=>{if(K!==this._element&&window.innerWidth>K.clientWidth+H)return;this._saveInitialAttribute(K,v);const st=window.getComputedStyle(K).getPropertyValue(v);K.style.setProperty(v,`${A(Number.parseFloat(st))}px`)})}_saveInitialAttribute(f,v){const A=f.style.getPropertyValue(v);A&&et.setDataAttribute(f,v,A)}_resetElementAttributes(f,v){this._applyManipulationCallback(f,A=>{const H=et.getDataAttribute(A,v);H!==null?(et.removeDataAttribute(A,v),A.style.setProperty(v,H)):A.style.removeProperty(v)})}_applyManipulationCallback(f,v){if(c(f))v(f);else for(const A of j.find(f,this._element))v(A)}}const ze=".bs.modal",tb=`hide${ze}`,eb=`hidePrevented${ze}`,hp=`hidden${ze}`,cp=`show${ze}`,ib=`shown${ze}`,sb=`resize${ze}`,rb=`click.dismiss${ze}`,nb=`mousedown.dismiss${ze}`,ob=`keydown.dismiss${ze}`,ab=`click${ze}.data-api`,up="modal-open",dp="show",sc="modal-static",lb={backdrop:!0,focus:!0,keyboard:!0},hb={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Js extends ct{constructor(f,v){super(f,v),this._dialog=j.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ic,this._addEventListeners()}static get Default(){return lb}static get DefaultType(){return hb}static get NAME(){return"modal"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||this._isTransitioning||R.trigger(this._element,cp,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(up),this._adjustDialog(),this._backdrop.show(()=>this._showElement(f)))}hide(){this._isShown&&!this._isTransitioning&&(R.trigger(this._element,tb).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(dp),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){R.off(window,ze),R.off(this._dialog,ze),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new sp({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new np({trapElement:this._element})}_showElement(f){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const v=j.findOne(".modal-body",this._dialog);v&&(v.scrollTop=0),_(this._element),this._element.classList.add(dp),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,R.trigger(this._element,ib,{relatedTarget:f})},this._dialog,this._isAnimated())}_addEventListeners(){R.on(this._element,ob,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),R.on(window,sb,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),R.on(this._element,nb,f=>{R.one(this._element,rb,v=>{this._element===f.target&&this._element===v.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(up),this._resetAdjustments(),this._scrollBar.reset(),R.trigger(this._element,hp)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(R.trigger(this._element,eb).defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,v=this._element.style.overflowY;v==="hidden"||this._element.classList.contains(sc)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(sc),this._queueCallback(()=>{this._element.classList.remove(sc),this._queueCallback(()=>{this._element.style.overflowY=v},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const f=this._element.scrollHeight>document.documentElement.clientHeight,v=this._scrollBar.getWidth(),A=v>0;if(A&&!f){const H=y()?"paddingLeft":"paddingRight";this._element.style[H]=`${v}px`}if(!A&&f){const H=y()?"paddingRight":"paddingLeft";this._element.style[H]=`${v}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(f,v){return this.each(function(){const A=Js.getOrCreateInstance(this,f);if(typeof f=="string"){if(A[f]===void 0)throw new TypeError(`No method named "${f}"`);A[f](v)}})}}R.on(document,ab,'[data-bs-toggle="modal"]',function(C){const f=j.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&C.preventDefault(),R.one(f,cp,A=>{A.defaultPrevented||R.one(f,hp,()=>{d(this)&&this.focus()})});const v=j.findOne(".modal.show");v&&Js.getInstance(v).hide(),Js.getOrCreateInstance(f).toggle(this)}),gt(Js),w(Js);const Ji=".bs.offcanvas",fp=".data-api",cb=`load${Ji}${fp}`,pp="show",mp="showing",gp="hiding",_p=".offcanvas.show",ub=`show${Ji}`,db=`shown${Ji}`,fb=`hide${Ji}`,vp=`hidePrevented${Ji}`,yp=`hidden${Ji}`,pb=`resize${Ji}`,mb=`click${Ji}${fp}`,gb=`keydown.dismiss${Ji}`,_b={backdrop:!0,keyboard:!0,scroll:!1},vb={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ts extends ct{constructor(f,v){super(f,v),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return _b}static get DefaultType(){return vb}static get NAME(){return"offcanvas"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||R.trigger(this._element,ub,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ic().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(mp),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(pp),this._element.classList.remove(mp),R.trigger(this._element,db,{relatedTarget:f})},this._element,!0))}hide(){this._isShown&&(R.trigger(this._element,fb).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(gp),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(pp,gp),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ic().reset(),R.trigger(this._element,yp)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const f=!!this._config.backdrop;return new sp({className:"offcanvas-backdrop",isVisible:f,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:f?()=>{this._config.backdrop!=="static"?this.hide():R.trigger(this._element,vp)}:null})}_initializeFocusTrap(){return new np({trapElement:this._element})}_addEventListeners(){R.on(this._element,gb,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():R.trigger(this._element,vp))})}static jQueryInterface(f){return this.each(function(){const v=ts.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f](this)}})}}R.on(document,mb,'[data-bs-toggle="offcanvas"]',function(C){const f=j.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&C.preventDefault(),p(this))return;R.one(f,yp,()=>{d(this)&&this.focus()});const v=j.findOne(_p);v&&v!==f&&ts.getInstance(v).hide(),ts.getOrCreateInstance(f).toggle(this)}),R.on(window,cb,()=>{for(const C of j.find(_p))ts.getOrCreateInstance(C).show()}),R.on(window,pb,()=>{for(const C of j.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(C).position!=="fixed"&&ts.getOrCreateInstance(C).hide()}),gt(ts),w(ts);const xp={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},yb=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),xb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,bb=(C,f)=>{const v=C.nodeName.toLowerCase();return f.includes(v)?!yb.has(v)||!!xb.test(C.nodeValue):f.filter(A=>A instanceof RegExp).some(A=>A.test(v))},wb={allowList:xp,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Tb={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Eb={entry:"(string|element|function|null)",selector:"(string|element)"};class Ab extends ht{constructor(f){super(),this._config=this._getConfig(f)}static get Default(){return wb}static get DefaultType(){return Tb}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(f=>this._resolvePossibleFunction(f)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(f){return this._checkContent(f),this._config.content={...this._config.content,...f},this}toHtml(){const f=document.createElement("div");f.innerHTML=this._maybeSanitize(this._config.template);for(const[H,K]of Object.entries(this._config.content))this._setContent(f,K,H);const v=f.children[0],A=this._resolvePossibleFunction(this._config.extraClass);return A&&v.classList.add(...A.split(" ")),v}_typeCheckConfig(f){super._typeCheckConfig(f),this._checkContent(f.content)}_checkContent(f){for(const[v,A]of Object.entries(f))super._typeCheckConfig({selector:v,entry:A},Eb)}_setContent(f,v,A){const H=j.findOne(A,f);H&&((v=this._resolvePossibleFunction(v))?c(v)?this._putElementInTemplate(u(v),H):this._config.html?H.innerHTML=this._maybeSanitize(v):H.textContent=v:H.remove())}_maybeSanitize(f){return this._config.sanitize?function(v,A,H){if(!v.length)return v;if(H&&typeof H=="function")return H(v);const K=new window.DOMParser().parseFromString(v,"text/html"),st=[].concat(...K.body.querySelectorAll("*"));for(const _t of st){const Ot=_t.nodeName.toLowerCase();if(!Object.keys(A).includes(Ot)){_t.remove();continue}const xe=[].concat(..._t.attributes),Pe=[].concat(A["*"]||[],A[Ot]||[]);for(const di of xe)bb(di,Pe)||_t.removeAttribute(di.nodeName)}return K.body.innerHTML}(f,this._config.allowList,this._config.sanitizeFn):f}_resolvePossibleFunction(f){return T(f,[this])}_putElementInTemplate(f,v){if(this._config.html)return v.innerHTML="",void v.append(f);v.textContent=f.textContent}}const Cb=new Set(["sanitize","allowList","sanitizeFn"]),rc="fade",za="show",bp=".modal",wp="hide.bs.modal",no="hover",nc="focus",Sb={AUTO:"auto",TOP:"top",RIGHT:y()?"left":"right",BOTTOM:"bottom",LEFT:y()?"right":"left"},Pb={allowList:xp,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ib={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class tr extends ct{constructor(f,v){if(r===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(f,v),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Pb}static get DefaultType(){return Ib}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),R.off(this._element.closest(bp),wp,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const f=R.trigger(this._element,this.constructor.eventName("show")),v=(m(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(f.defaultPrevented||!v)return;this._disposePopper();const A=this._getTipElement();this._element.setAttribute("aria-describedby",A.getAttribute("id"));const{container:H}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(H.append(A),R.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(A),A.classList.add(za),"ontouchstart"in document.documentElement)for(const K of[].concat(...document.body.children))R.on(K,"mouseover",g);this._queueCallback(()=>{R.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!R.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(za),"ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))R.off(f,"mouseover",g);this._activeTrigger.click=!1,this._activeTrigger[nc]=!1,this._activeTrigger[no]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),R.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(f){const v=this._getTemplateFactory(f).toHtml();if(!v)return null;v.classList.remove(rc,za),v.classList.add(`bs-${this.constructor.NAME}-auto`);const A=(H=>{do H+=Math.floor(1e6*Math.random());while(document.getElementById(H));return H})(this.constructor.NAME).toString();return v.setAttribute("id",A),this._isAnimated()&&v.classList.add(rc),v}setContent(f){this._newContent=f,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(f){return this._templateFactory?this._templateFactory.changeContent(f):this._templateFactory=new Ab({...this._config,content:f,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(f){return this.constructor.getOrCreateInstance(f.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(rc)}_isShown(){return this.tip&&this.tip.classList.contains(za)}_createPopper(f){const v=T(this._config.placement,[this,f,this._element]),A=Sb[v.toUpperCase()];return r.createPopper(this._element,f,this._getPopperConfig(A))}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(v=>Number.parseInt(v,10)):typeof f=="function"?v=>f(v,this._element):f}_resolvePossibleFunction(f){return T(f,[this._element])}_getPopperConfig(f){const v={placement:f,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:A=>{this._getTipElement().setAttribute("data-popper-placement",A.state.placement)}}]};return{...v,...T(this._config.popperConfig,[v])}}_setListeners(){const f=this._config.trigger.split(" ");for(const v of f)if(v==="click")R.on(this._element,this.constructor.eventName("click"),this._config.selector,A=>{this._initializeOnDelegatedTarget(A).toggle()});else if(v!=="manual"){const A=v===no?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),H=v===no?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");R.on(this._element,A,this._config.selector,K=>{const st=this._initializeOnDelegatedTarget(K);st._activeTrigger[K.type==="focusin"?nc:no]=!0,st._enter()}),R.on(this._element,H,this._config.selector,K=>{const st=this._initializeOnDelegatedTarget(K);st._activeTrigger[K.type==="focusout"?nc:no]=st._element.contains(K.relatedTarget),st._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},R.on(this._element.closest(bp),wp,this._hideModalHandler)}_fixTitle(){const f=this._element.getAttribute("title");f&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",f),this._element.setAttribute("data-bs-original-title",f),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(f,v){clearTimeout(this._timeout),this._timeout=setTimeout(f,v)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(f){const v=et.getDataAttributes(this._element);for(const A of Object.keys(v))Cb.has(A)&&delete v[A];return f={...v,...typeof f=="object"&&f?f:{}},f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f.container=f.container===!1?document.body:u(f.container),typeof f.delay=="number"&&(f.delay={show:f.delay,hide:f.delay}),typeof f.title=="number"&&(f.title=f.title.toString()),typeof f.content=="number"&&(f.content=f.content.toString()),f}_getDelegateConfig(){const f={};for(const[v,A]of Object.entries(this._config))this.constructor.Default[v]!==A&&(f[v]=A);return f.selector=!1,f.trigger="manual",f}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(f){return this.each(function(){const v=tr.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f]()}})}}w(tr);const Mb={...tr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Rb={...tr.DefaultType,content:"(null|string|element|function)"};class Va extends tr{static get Default(){return Mb}static get DefaultType(){return Rb}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(f){return this.each(function(){const v=Va.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f]()}})}}w(Va);const oc=".bs.scrollspy",Db=`activate${oc}`,Tp=`click${oc}`,Ob=`load${oc}.data-api`,Zr="active",ac="[href]",Ep=".nav-link",kb=`${Ep}, .nav-item > ${Ep}, .list-group-item`,Fb={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Bb={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class oo extends ct{constructor(f,v){super(f,v),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Fb}static get DefaultType(){return Bb}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const f of this._observableSections.values())this._observer.observe(f)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(f){return f.target=u(f.target)||document.body,f.rootMargin=f.offset?`${f.offset}px 0px -30%`:f.rootMargin,typeof f.threshold=="string"&&(f.threshold=f.threshold.split(",").map(v=>Number.parseFloat(v))),f}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(R.off(this._config.target,Tp),R.on(this._config.target,Tp,ac,f=>{const v=this._observableSections.get(f.target.hash);if(v){f.preventDefault();const A=this._rootElement||window,H=v.offsetTop-this._element.offsetTop;if(A.scrollTo)return void A.scrollTo({top:H,behavior:"smooth"});A.scrollTop=H}}))}_getNewObserver(){const f={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(v=>this._observerCallback(v),f)}_observerCallback(f){const v=st=>this._targetLinks.get(`#${st.target.id}`),A=st=>{this._previousScrollData.visibleEntryTop=st.target.offsetTop,this._process(v(st))},H=(this._rootElement||document.documentElement).scrollTop,K=H>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=H;for(const st of f){if(!st.isIntersecting){this._activeTarget=null,this._clearActiveClass(v(st));continue}const _t=st.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(K&&_t){if(A(st),!H)return}else K||_t||A(st)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const f=j.find(ac,this._config.target);for(const v of f){if(!v.hash||p(v))continue;const A=j.findOne(decodeURI(v.hash),this._element);d(A)&&(this._targetLinks.set(decodeURI(v.hash),v),this._observableSections.set(v.hash,A))}}_process(f){this._activeTarget!==f&&(this._clearActiveClass(this._config.target),this._activeTarget=f,f.classList.add(Zr),this._activateParents(f),R.trigger(this._element,Db,{relatedTarget:f}))}_activateParents(f){if(f.classList.contains("dropdown-item"))j.findOne(".dropdown-toggle",f.closest(".dropdown")).classList.add(Zr);else for(const v of j.parents(f,".nav, .list-group"))for(const A of j.prev(v,kb))A.classList.add(Zr)}_clearActiveClass(f){f.classList.remove(Zr);const v=j.find(`${ac}.${Zr}`,f);for(const A of v)A.classList.remove(Zr)}static jQueryInterface(f){return this.each(function(){const v=oo.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f]()}})}}R.on(window,Ob,()=>{for(const C of j.find('[data-bs-spy="scroll"]'))oo.getOrCreateInstance(C)}),w(oo);const er=".bs.tab",Lb=`hide${er}`,Nb=`hidden${er}`,Ub=`show${er}`,$b=`shown${er}`,Gb=`click${er}`,Hb=`keydown${er}`,zb=`load${er}`,Vb="ArrowLeft",Ap="ArrowRight",jb="ArrowUp",Cp="ArrowDown",lc="Home",Sp="End",ir="active",Pp="fade",hc="show",cc=":not(.dropdown-toggle)",Ip='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',uc=`.nav-link${cc}, .list-group-item${cc}, [role="tab"]${cc}, ${Ip}`,Wb=`.${ir}[data-bs-toggle="tab"], .${ir}[data-bs-toggle="pill"], .${ir}[data-bs-toggle="list"]`;class sr extends ct{constructor(f){super(f),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),R.on(this._element,Hb,v=>this._keydown(v)))}static get NAME(){return"tab"}show(){const f=this._element;if(this._elemIsActive(f))return;const v=this._getActiveElem(),A=v?R.trigger(v,Lb,{relatedTarget:f}):null;R.trigger(f,Ub,{relatedTarget:v}).defaultPrevented||A&&A.defaultPrevented||(this._deactivate(v,f),this._activate(f,v))}_activate(f,v){f&&(f.classList.add(ir),this._activate(j.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.removeAttribute("tabindex"),f.setAttribute("aria-selected",!0),this._toggleDropDown(f,!0),R.trigger(f,$b,{relatedTarget:v})):f.classList.add(hc)},f,f.classList.contains(Pp)))}_deactivate(f,v){f&&(f.classList.remove(ir),f.blur(),this._deactivate(j.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.setAttribute("aria-selected",!1),f.setAttribute("tabindex","-1"),this._toggleDropDown(f,!1),R.trigger(f,Nb,{relatedTarget:v})):f.classList.remove(hc)},f,f.classList.contains(Pp)))}_keydown(f){if(![Vb,Ap,jb,Cp,lc,Sp].includes(f.key))return;f.stopPropagation(),f.preventDefault();const v=this._getChildren().filter(H=>!p(H));let A;if([lc,Sp].includes(f.key))A=v[f.key===lc?0:v.length-1];else{const H=[Ap,Cp].includes(f.key);A=I(v,f.target,H,!0)}A&&(A.focus({preventScroll:!0}),sr.getOrCreateInstance(A).show())}_getChildren(){return j.find(uc,this._parent)}_getActiveElem(){return this._getChildren().find(f=>this._elemIsActive(f))||null}_setInitialAttributes(f,v){this._setAttributeIfNotExists(f,"role","tablist");for(const A of v)this._setInitialAttributesOnChild(A)}_setInitialAttributesOnChild(f){f=this._getInnerElement(f);const v=this._elemIsActive(f),A=this._getOuterElement(f);f.setAttribute("aria-selected",v),A!==f&&this._setAttributeIfNotExists(A,"role","presentation"),v||f.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(f,"role","tab"),this._setInitialAttributesOnTargetPanel(f)}_setInitialAttributesOnTargetPanel(f){const v=j.getElementFromSelector(f);v&&(this._setAttributeIfNotExists(v,"role","tabpanel"),f.id&&this._setAttributeIfNotExists(v,"aria-labelledby",`${f.id}`))}_toggleDropDown(f,v){const A=this._getOuterElement(f);if(!A.classList.contains("dropdown"))return;const H=(K,st)=>{const _t=j.findOne(K,A);_t&&_t.classList.toggle(st,v)};H(".dropdown-toggle",ir),H(".dropdown-menu",hc),A.setAttribute("aria-expanded",v)}_setAttributeIfNotExists(f,v,A){f.hasAttribute(v)||f.setAttribute(v,A)}_elemIsActive(f){return f.classList.contains(ir)}_getInnerElement(f){return f.matches(uc)?f:j.findOne(uc,f)}_getOuterElement(f){return f.closest(".nav-item, .list-group-item")||f}static jQueryInterface(f){return this.each(function(){const v=sr.getOrCreateInstance(this);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f]()}})}}R.on(document,Gb,Ip,function(C){["A","AREA"].includes(this.tagName)&&C.preventDefault(),p(this)||sr.getOrCreateInstance(this).show()}),R.on(window,zb,()=>{for(const C of j.find(Wb))sr.getOrCreateInstance(C)}),w(sr);const Es=".bs.toast",Xb=`mouseover${Es}`,Yb=`mouseout${Es}`,qb=`focusin${Es}`,Kb=`focusout${Es}`,Zb=`hide${Es}`,Qb=`hidden${Es}`,Jb=`show${Es}`,t1=`shown${Es}`,Mp="hide",ja="show",Wa="showing",e1={animation:"boolean",autohide:"boolean",delay:"number"},i1={animation:!0,autohide:!0,delay:5e3};class ao extends ct{constructor(f,v){super(f,v),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return i1}static get DefaultType(){return e1}static get NAME(){return"toast"}show(){R.trigger(this._element,Jb).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Mp),_(this._element),this._element.classList.add(ja,Wa),this._queueCallback(()=>{this._element.classList.remove(Wa),R.trigger(this._element,t1),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(R.trigger(this._element,Zb).defaultPrevented||(this._element.classList.add(Wa),this._queueCallback(()=>{this._element.classList.add(Mp),this._element.classList.remove(Wa,ja),R.trigger(this._element,Qb)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ja),super.dispose()}isShown(){return this._element.classList.contains(ja)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(f,v){switch(f.type){case"mouseover":case"mouseout":this._hasMouseInteraction=v;break;case"focusin":case"focusout":this._hasKeyboardInteraction=v}if(v)return void this._clearTimeout();const A=f.relatedTarget;this._element===A||this._element.contains(A)||this._maybeScheduleHide()}_setListeners(){R.on(this._element,Xb,f=>this._onInteraction(f,!0)),R.on(this._element,Yb,f=>this._onInteraction(f,!1)),R.on(this._element,qb,f=>this._onInteraction(f,!0)),R.on(this._element,Kb,f=>this._onInteraction(f,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(f){return this.each(function(){const v=ao.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f](this)}})}}return gt(ao),w(ao),{Alert:Pt,Button:pe,Carousel:Xr,Collapse:qr,Dropdown:ui,Modal:Js,Offcanvas:ts,Popover:Va,ScrollSpy:oo,Tab:sr,Toast:ao,Tooltip:tr}})})(l1);const Q1={context:void 0,registry:void 0},J1=(i,t)=>i===t,Pi=Symbol("solid-proxy"),Up=Symbol("solid-track"),tw=Symbol("solid-dev-component"),Bl={equals:J1};let c_=v_;const xs=1,Ll=2,u_={owned:null,cleanups:null,context:null,owner:null};var wt=null;let dc=null,Mt=null,ue=null,us=null,Ch=0;function d_(i,t){const e=Mt,s=wt,r=i.length===0,n=t===void 0?s:t,o=r?u_:{owned:null,cleanups:null,context:n?n.context:null,owner:n},a=r?i:()=>i(()=>Ii(()=>Ih(o)));wt=o,Mt=null;try{return Gr(a,!0)}finally{Mt=e,wt=s}}function Rt(i,t){t=t?Object.assign({},Bl,t):Bl;const e={value:i,observers:null,observerSlots:null,comparator:t.equals||void 0},s=r=>(typeof r=="function"&&(r=r(e.value)),__(e,r));return[g_.bind(e),s]}function au(i,t,e){const s=Ph(i,t,!0,xs);Zn(s)}function Gi(i,t,e){const s=Ph(i,t,!1,xs);Zn(s)}function te(i,t,e){c_=rw;const s=Ph(i,t,!1,xs);(!e||!e.render)&&(s.user=!0),us?us.push(s):Zn(s)}function ae(i,t,e){e=e?Object.assign({},Bl,e):Bl;const s=Ph(i,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=e.equals||void 0,Zn(s),g_.bind(s)}function ew(i){return Gr(i,!1)}function Ii(i){if(Mt===null)return i();const t=Mt;Mt=null;try{return i()}finally{Mt=t}}function lu(i,t,e){const s=Array.isArray(i);let r,n=e&&e.defer;return o=>{let a;if(s){a=Array(i.length);for(let h=0;h<i.length;h++)a[h]=i[h]()}else a=i();if(n){n=!1;return}const l=Ii(()=>t(a,r,o));return r=a,l}}function f_(i){te(()=>Ii(i))}function kn(i){return wt===null||(wt.cleanups===null?wt.cleanups=[i]:wt.cleanups.push(i)),i}function hu(){return Mt}function p_(){return wt}function m_(i,t){const e=wt,s=Mt;wt=i,Mt=null;try{return Gr(t,!0)}catch(r){Cd(r)}finally{wt=e,Mt=s}}function Sh(i,t){const e=Symbol("context");return{id:e,Provider:ow(e),defaultValue:i}}function va(i){return wt&&wt.context&&wt.context[i.id]!==void 0?wt.context[i.id]:i.defaultValue}function ya(i){const t=ae(i),e=ae(()=>cu(t()));return e.toArray=()=>{const s=e();return Array.isArray(s)?s:s!=null?[s]:[]},e}function g_(){if(this.sources&&this.state)if(this.state===xs)Zn(this);else{const i=ue;ue=null,Gr(()=>Ul(this),!1),ue=i}if(Mt){const i=this.observers?this.observers.length:0;Mt.sources?(Mt.sources.push(this),Mt.sourceSlots.push(i)):(Mt.sources=[this],Mt.sourceSlots=[i]),this.observers?(this.observers.push(Mt),this.observerSlots.push(Mt.sources.length-1)):(this.observers=[Mt],this.observerSlots=[Mt.sources.length-1])}return this.value}function __(i,t,e){let s=i.value;return(!i.comparator||!i.comparator(s,t))&&(i.value=t,i.observers&&i.observers.length&&Gr(()=>{for(let r=0;r<i.observers.length;r+=1){const n=i.observers[r],o=dc&&dc.running;o&&dc.disposed.has(n),(o?!n.tState:!n.state)&&(n.pure?ue.push(n):us.push(n),n.observers&&y_(n)),o||(n.state=xs)}if(ue.length>1e6)throw ue=[],new Error},!1)),t}function Zn(i){if(!i.fn)return;Ih(i);const t=wt,e=Mt,s=Ch;Mt=wt=i,iw(i,i.value,s),Mt=e,wt=t}function iw(i,t,e){let s;try{s=i.fn(t)}catch(r){return i.pure&&(i.state=xs,i.owned&&i.owned.forEach(Ih),i.owned=null),i.updatedAt=e+1,Cd(r)}(!i.updatedAt||i.updatedAt<=e)&&(i.updatedAt!=null&&"observers"in i?__(i,s):i.value=s,i.updatedAt=e)}function Ph(i,t,e,s=xs,r){const n={fn:i,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:wt,context:wt?wt.context:null,pure:e};return wt===null||wt!==u_&&(wt.owned?wt.owned.push(n):wt.owned=[n]),n}function Nl(i){if(i.state===0)return;if(i.state===Ll)return Ul(i);if(i.suspense&&Ii(i.suspense.inFallback))return i.suspense.effects.push(i);const t=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<Ch);)i.state&&t.push(i);for(let e=t.length-1;e>=0;e--)if(i=t[e],i.state===xs)Zn(i);else if(i.state===Ll){const s=ue;ue=null,Gr(()=>Ul(i,t[0]),!1),ue=s}}function Gr(i,t){if(ue)return i();let e=!1;t||(ue=[]),us?e=!0:us=[],Ch++;try{const s=i();return sw(e),s}catch(s){e||(us=null),ue=null,Cd(s)}}function sw(i){if(ue&&(v_(ue),ue=null),i)return;const t=us;us=null,t.length&&Gr(()=>c_(t),!1)}function v_(i){for(let t=0;t<i.length;t++)Nl(i[t])}function rw(i){let t,e=0;for(t=0;t<i.length;t++){const s=i[t];s.user?i[e++]=s:Nl(s)}for(t=0;t<e;t++)Nl(i[t])}function Ul(i,t){i.state=0;for(let e=0;e<i.sources.length;e+=1){const s=i.sources[e];if(s.sources){const r=s.state;r===xs?s!==t&&(!s.updatedAt||s.updatedAt<Ch)&&Nl(s):r===Ll&&Ul(s,t)}}}function y_(i){for(let t=0;t<i.observers.length;t+=1){const e=i.observers[t];e.state||(e.state=Ll,e.pure?ue.push(e):us.push(e),e.observers&&y_(e))}}function Ih(i){let t;if(i.sources)for(;i.sources.length;){const e=i.sources.pop(),s=i.sourceSlots.pop(),r=e.observers;if(r&&r.length){const n=r.pop(),o=e.observerSlots.pop();s<r.length&&(n.sourceSlots[o]=s,r[s]=n,e.observerSlots[s]=o)}}if(i.owned){for(t=i.owned.length-1;t>=0;t--)Ih(i.owned[t]);i.owned=null}if(i.cleanups){for(t=i.cleanups.length-1;t>=0;t--)i.cleanups[t]();i.cleanups=null}i.state=0}function nw(i){return i instanceof Error?i:new Error(typeof i=="string"?i:"Unknown error",{cause:i})}function Cd(i,t=wt){throw nw(i)}function cu(i){if(typeof i=="function"&&!i.length)return cu(i());if(Array.isArray(i)){const t=[];for(let e=0;e<i.length;e++){const s=cu(i[e]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return i}function ow(i,t){return function(s){let r;return Gi(()=>r=Ii(()=>(wt.context={...wt.context,[i]:s.value},ya(()=>s.children))),void 0),r}}function it(i,t){return Ii(()=>i(t||{}))}function qa(){return!0}const uu={get(i,t,e){return t===Pi?e:i.get(t)},has(i,t){return t===Pi?!0:i.has(t)},set:qa,deleteProperty:qa,getOwnPropertyDescriptor(i,t){return{configurable:!0,enumerable:!0,get(){return i.get(t)},set:qa,deleteProperty:qa}},ownKeys(i){return i.keys()}};function fc(i){return(i=typeof i=="function"?i():i)?i:{}}function aw(){for(let i=0,t=this.length;i<t;++i){const e=this[i]();if(e!==void 0)return e}}function Tt(...i){let t=!1;for(let n=0;n<i.length;n++){const o=i[n];t=t||!!o&&Pi in o,i[n]=typeof o=="function"?(t=!0,ae(o)):o}if(t)return new Proxy({get(n){for(let o=i.length-1;o>=0;o--){const a=fc(i[o])[n];if(a!==void 0)return a}},has(n){for(let o=i.length-1;o>=0;o--)if(n in fc(i[o]))return!0;return!1},keys(){const n=[];for(let o=0;o<i.length;o++)n.push(...Object.keys(fc(i[o])));return[...new Set(n)]}},uu);const e={},s={},r=new Set;for(let n=i.length-1;n>=0;n--){const o=i[n];if(!o)continue;const a=Object.getOwnPropertyNames(o);for(let l=0,h=a.length;l<h;l++){const c=a[l];if(c==="__proto__"||c==="constructor")continue;const u=Object.getOwnPropertyDescriptor(o,c);if(!r.has(c))u.get?(r.add(c),Object.defineProperty(e,c,{enumerable:!0,configurable:!0,get:aw.bind(s[c]=[u.get.bind(o)])})):(u.value!==void 0&&r.add(c),e[c]=u.value);else{const d=s[c];d?u.get?d.push(u.get.bind(o)):u.value!==void 0&&d.push(()=>u.value):e[c]===void 0&&(e[c]=u.value)}}}return e}function He(i,...t){if(Pi in i){const r=new Set(t.length>1?t.flat():t[0]),n=t.map(o=>new Proxy({get(a){return o.includes(a)?i[a]:void 0},has(a){return o.includes(a)&&a in i},keys(){return o.filter(a=>a in i)}},uu));return n.push(new Proxy({get(o){return r.has(o)?void 0:i[o]},has(o){return r.has(o)?!1:o in i},keys(){return Object.keys(i).filter(o=>!r.has(o))}},uu)),n}const e={},s=t.map(()=>({}));for(const r of Object.getOwnPropertyNames(i)){const n=Object.getOwnPropertyDescriptor(i,r),o=!n.get&&!n.set&&n.enumerable&&n.writable&&n.configurable;let a=!1,l=0;for(const h of t)h.includes(r)&&(a=!0,o?s[l][r]=n.value:Object.defineProperty(s[l],r,n)),++l;a||(o?e[r]=n.value:Object.defineProperty(e,r,n))}return[...s,e]}const lw=i=>`Stale read from <${i}>.`;function Mh(i){const t=i.keyed,e=ae(()=>i.when,void 0,{equals:(s,r)=>t?s===r:!s==!r});return ae(()=>{const s=e();if(s){const r=i.children;return typeof r=="function"&&r.length>0?Ii(()=>r(t?s:()=>{if(!Ii(e))throw lw("Show");return i.when})):r}return i.fallback},void 0,void 0)}const hw=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],cw=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...hw]),uw=new Set(["innerHTML","textContent","innerText","children"]),dw=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),fw=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function pw(i,t){const e=fw[i];return typeof e=="object"?e[t]?e.$:void 0:e}const mw=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),gw=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),_w={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function vw(i,t,e){let s=e.length,r=t.length,n=s,o=0,a=0,l=t[r-1].nextSibling,h=null;for(;o<r||a<n;){if(t[o]===e[a]){o++,a++;continue}for(;t[r-1]===e[n-1];)r--,n--;if(r===o){const c=n<s?a?e[a-1].nextSibling:e[n-a]:l;for(;a<n;)i.insertBefore(e[a++],c)}else if(n===a)for(;o<r;)(!h||!h.has(t[o]))&&t[o].remove(),o++;else if(t[o]===e[n-1]&&e[a]===t[r-1]){const c=t[--r].nextSibling;i.insertBefore(e[a++],t[o++].nextSibling),i.insertBefore(e[--n],c),t[r]=e[n]}else{if(!h){h=new Map;let u=a;for(;u<n;)h.set(e[u],u++)}const c=h.get(t[o]);if(c!=null)if(a<c&&c<n){let u=o,d=1,p;for(;++u<r&&u<n&&!((p=h.get(t[u]))==null||p!==c+d);)d++;if(d>c-a){const m=t[o];for(;a<c;)i.insertBefore(e[a++],m)}else i.replaceChild(e[a++],t[o++])}else o++;else t[o++].remove()}}}const $p="_$DX_DELEGATE";function Sd(i,t,e,s={}){let r;return d_(n=>{r=n,t===document?i():Wt(t,i(),t.firstChild?null:void 0,e)},s.owner),()=>{r(),t.textContent=""}}function se(i,t,e){let s;const r=()=>{const o=document.createElement("template");return o.innerHTML=i,e?o.content.firstChild.firstChild:o.content.firstChild},n=t?()=>Ii(()=>document.importNode(s||(s=r()),!0)):()=>(s||(s=r())).cloneNode(!0);return n.cloneNode=n,n}function Pd(i,t=window.document){const e=t[$p]||(t[$p]=new Set);for(let s=0,r=i.length;s<r;s++){const n=i[s];e.has(n)||(e.add(n),t.addEventListener(n,Ew))}}function kt(i,t,e){e==null?i.removeAttribute(t):i.setAttribute(t,e)}function yw(i,t,e,s){s==null?i.removeAttributeNS(t,e):i.setAttributeNS(t,e,s)}function Id(i,t){t==null?i.removeAttribute("class"):i.className=t}function du(i,t,e,s){if(s)Array.isArray(e)?(i[`$$${t}`]=e[0],i[`$$${t}Data`]=e[1]):i[`$$${t}`]=e;else if(Array.isArray(e)){const r=e[0];i.addEventListener(t,e[0]=n=>r.call(i,e[1],n))}else i.addEventListener(t,e)}function xw(i,t,e={}){const s=Object.keys(t||{}),r=Object.keys(e);let n,o;for(n=0,o=r.length;n<o;n++){const a=r[n];!a||a==="undefined"||t[a]||(Gp(i,a,!1),delete e[a])}for(n=0,o=s.length;n<o;n++){const a=s[n],l=!!t[a];!a||a==="undefined"||e[a]===l||!l||(Gp(i,a,!0),e[a]=l)}return e}function bw(i,t,e){if(!t)return e?kt(i,"style"):t;const s=i.style;if(typeof t=="string")return s.cssText=t;typeof e=="string"&&(s.cssText=e=void 0),e||(e={}),t||(t={});let r,n;for(n in e)t[n]==null&&s.removeProperty(n),delete e[n];for(n in t)r=t[n],r!==e[n]&&(s.setProperty(n,r),e[n]=r);return e}function Xi(i,t={},e,s){const r={};return s||Gi(()=>r.children=Fn(i,t.children,r.children)),Gi(()=>t.ref&&t.ref(i)),Gi(()=>ww(i,t,e,!0,r,!0)),r}function yr(i,t,e){return Ii(()=>i(t,e))}function Wt(i,t,e,s){if(e!==void 0&&!s&&(s=[]),typeof t!="function")return Fn(i,t,s,e);Gi(r=>Fn(i,t(),r,e),s)}function ww(i,t,e,s,r={},n=!1){t||(t={});for(const o in r)if(!(o in t)){if(o==="children")continue;r[o]=Hp(i,o,null,r[o],e,n)}for(const o in t){if(o==="children"){s||Fn(i,t.children);continue}const a=t[o];r[o]=Hp(i,o,a,r[o],e,n)}}function Tw(i){return i.toLowerCase().replace(/-([a-z])/g,(t,e)=>e.toUpperCase())}function Gp(i,t,e){const s=t.trim().split(/\s+/);for(let r=0,n=s.length;r<n;r++)i.classList.toggle(s[r],e)}function Hp(i,t,e,s,r,n){let o,a,l,h,c;if(t==="style")return bw(i,e,s);if(t==="classList")return xw(i,e,s);if(e===s)return s;if(t==="ref")n||e(i);else if(t.slice(0,3)==="on:"){const u=t.slice(3);s&&i.removeEventListener(u,s),e&&i.addEventListener(u,e)}else if(t.slice(0,10)==="oncapture:"){const u=t.slice(10);s&&i.removeEventListener(u,s,!0),e&&i.addEventListener(u,e,!0)}else if(t.slice(0,2)==="on"){const u=t.slice(2).toLowerCase(),d=mw.has(u);if(!d&&s){const p=Array.isArray(s)?s[0]:s;i.removeEventListener(u,p)}(d||e)&&(du(i,u,e,d),d&&Pd([u]))}else if(t.slice(0,5)==="attr:")kt(i,t.slice(5),e);else if((c=t.slice(0,5)==="prop:")||(l=uw.has(t))||!r&&((h=pw(t,i.tagName))||(a=cw.has(t)))||(o=i.nodeName.includes("-")))c&&(t=t.slice(5),a=!0),t==="class"||t==="className"?Id(i,e):o&&!a&&!l?i[Tw(t)]=e:i[h||t]=e;else{const u=r&&t.indexOf(":")>-1&&_w[t.split(":")[0]];u?yw(i,u,t,e):kt(i,dw[t]||t,e)}return e}function Ew(i){const t=`$$${i.type}`;let e=i.composedPath&&i.composedPath()[0]||i.target;for(i.target!==e&&Object.defineProperty(i,"target",{configurable:!0,value:e}),Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return e||document}});e;){const s=e[t];if(s&&!e.disabled){const r=e[`${t}Data`];if(r!==void 0?s.call(e,r,i):s.call(e,i),i.cancelBubble)return}e=e._$host||e.parentNode||e.host}}function Fn(i,t,e,s,r){for(;typeof e=="function";)e=e();if(t===e)return e;const n=typeof t,o=s!==void 0;if(i=o&&e[0]&&e[0].parentNode||i,n==="string"||n==="number")if(n==="number"&&(t=t.toString()),o){let a=e[0];a&&a.nodeType===3?a.data=t:a=document.createTextNode(t),e=Qr(i,e,s,a)}else e!==""&&typeof e=="string"?e=i.firstChild.data=t:e=i.textContent=t;else if(t==null||n==="boolean")e=Qr(i,e,s);else{if(n==="function")return Gi(()=>{let a=t();for(;typeof a=="function";)a=a();e=Fn(i,a,e,s)}),()=>e;if(Array.isArray(t)){const a=[],l=e&&Array.isArray(e);if(fu(a,t,e,r))return Gi(()=>e=Fn(i,a,e,s,!0)),()=>e;if(a.length===0){if(e=Qr(i,e,s),o)return e}else l?e.length===0?zp(i,a,s):vw(i,e,a):(e&&Qr(i),zp(i,a));e=a}else if(t.nodeType){if(Array.isArray(e)){if(o)return e=Qr(i,e,s,t);Qr(i,e,null,t)}else e==null||e===""||!i.firstChild?i.appendChild(t):i.replaceChild(t,i.firstChild);e=t}else console.warn("Unrecognized value. Skipped inserting",t)}return e}function fu(i,t,e,s){let r=!1;for(let n=0,o=t.length;n<o;n++){let a=t[n],l=e&&e[n],h;if(!(a==null||a===!0||a===!1))if((h=typeof a)=="object"&&a.nodeType)i.push(a);else if(Array.isArray(a))r=fu(i,a,l)||r;else if(h==="function")if(s){for(;typeof a=="function";)a=a();r=fu(i,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||r}else i.push(a),r=!0;else{const c=String(a);l&&l.nodeType===3&&l.data===c?i.push(l):i.push(document.createTextNode(c))}}return r}function zp(i,t,e=null){for(let s=0,r=t.length;s<r;s++)i.insertBefore(t[s],e)}function Qr(i,t,e,s){if(e===void 0)return i.textContent="";const r=s||document.createTextNode("");if(t.length){let n=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(r!==a){const l=a.parentNode===i;!n&&!o?l?i.replaceChild(r,a):i.insertBefore(r,e):l&&a.remove()}else n=!0}}else i.insertBefore(r,e);return[r]}const Aw=!1,Cw="http://www.w3.org/2000/svg";function x_(i,t=!1){return t?document.createElementNS(Cw,i):document.createElement(i)}function Sw(i){const{useShadow:t}=i,e=document.createTextNode(""),s=()=>i.mount||document.body,r=p_();let n,o=!!Q1.context;return te(()=>{n||(n=m_(r,()=>ae(()=>i.children)));const a=s();if(a instanceof HTMLHeadElement){const[l,h]=Rt(!1),c=()=>h(!0);d_(u=>Wt(a,()=>l()?u():n(),null)),kn(c)}else{const l=x_(i.isSVG?"g":"div",i.isSVG),h=t&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return e.parentNode},configurable:!0}),Wt(h,n),a.appendChild(l),i.ref&&i.ref(l),kn(()=>a.removeChild(l))}},void 0,{render:!o}),e}function Md(i){const[t,e]=He(i,["component"]),s=ae(()=>t.component);return ae(()=>{const r=s();switch(typeof r){case"function":return Object.assign(r,{[tw]:!0}),Ii(()=>r(e));case"string":const n=gw.has(r),o=x_(r,n);return Xi(o,e,n),o}})}const Pw=document.getElementById("app"),b_=document.getElementById("controls"),w_=document.getElementById("screen"),T_=document.getElementById("menu");if(!b_)throw new Error("Controls element not found!");if(!w_)throw new Error("Screen element not found!");if(!Pw)throw new Error("App element not found!");if(!T_)throw new Error("Menu element not found!");const ti=()=>({current:void 0}),pu=Symbol("store-raw"),wn=Symbol("store-node"),as=Symbol("store-has"),E_=Symbol("store-self");function A_(i){let t=i[Pi];if(!t&&(Object.defineProperty(i,Pi,{value:t=new Proxy(i,Rw)}),!Array.isArray(i))){const e=Object.keys(i),s=Object.getOwnPropertyDescriptors(i);for(let r=0,n=e.length;r<n;r++){const o=e[r];s[o].get&&Object.defineProperty(i,o,{enumerable:s[o].enumerable,get:s[o].get.bind(t)})}}return t}function $l(i){let t;return i!=null&&typeof i=="object"&&(i[Pi]||!(t=Object.getPrototypeOf(i))||t===Object.prototype||Array.isArray(i))}function Vo(i,t=new Set){let e,s,r,n;if(e=i!=null&&i[pu])return e;if(!$l(i)||t.has(i))return i;if(Array.isArray(i)){Object.isFrozen(i)?i=i.slice(0):t.add(i);for(let o=0,a=i.length;o<a;o++)r=i[o],(s=Vo(r,t))!==r&&(i[o]=s)}else{Object.isFrozen(i)?i=Object.assign({},i):t.add(i);const o=Object.keys(i),a=Object.getOwnPropertyDescriptors(i);for(let l=0,h=o.length;l<h;l++)n=o[l],!a[n].get&&(r=i[n],(s=Vo(r,t))!==r&&(i[n]=s))}return i}function Gl(i,t){let e=i[t];return e||Object.defineProperty(i,t,{value:e=Object.create(null)}),e}function jo(i,t,e){if(i[t])return i[t];const[s,r]=Rt(e,{equals:!1,internal:!0});return s.$=r,i[t]=s}function Iw(i,t){const e=Reflect.getOwnPropertyDescriptor(i,t);return!e||e.get||!e.configurable||t===Pi||t===wn||(delete e.value,delete e.writable,e.get=()=>i[Pi][t]),e}function C_(i){hu()&&jo(Gl(i,wn),E_)()}function Mw(i){return C_(i),Reflect.ownKeys(i)}const Rw={get(i,t,e){if(t===pu)return i;if(t===Pi)return e;if(t===Up)return C_(i),e;const s=Gl(i,wn),r=s[t];let n=r?r():i[t];if(t===wn||t===as||t==="__proto__")return n;if(!r){const o=Object.getOwnPropertyDescriptor(i,t);hu()&&(typeof n!="function"||i.hasOwnProperty(t))&&!(o&&o.get)&&(n=jo(s,t,n)())}return $l(n)?A_(n):n},has(i,t){return t===pu||t===Pi||t===Up||t===wn||t===as||t==="__proto__"?!0:(hu()&&jo(Gl(i,as),t)(),t in i)},set(){return!0},deleteProperty(){return!0},ownKeys:Mw,getOwnPropertyDescriptor:Iw};function Hl(i,t,e,s=!1){if(!s&&i[t]===e)return;const r=i[t],n=i.length;e===void 0?(delete i[t],i[as]&&i[as][t]&&r!==void 0&&i[as][t].$()):(i[t]=e,i[as]&&i[as][t]&&r===void 0&&i[as][t].$());let o=Gl(i,wn),a;if((a=jo(o,t,r))&&a.$(()=>e),Array.isArray(i)&&i.length!==n){for(let l=i.length;l<n;l++)(a=o[l])&&a.$();(a=jo(o,"length",n))&&a.$(i.length)}(a=o[E_])&&a.$()}function S_(i,t){const e=Object.keys(t);for(let s=0;s<e.length;s+=1){const r=e[s];Hl(i,r,t[r])}}function Dw(i,t){if(typeof t=="function"&&(t=t(i)),t=Vo(t),Array.isArray(t)){if(i===t)return;let e=0,s=t.length;for(;e<s;e++){const r=t[e];i[e]!==r&&Hl(i,e,r)}Hl(i,"length",s)}else S_(i,t)}function yo(i,t,e=[]){let s,r=i;if(t.length>1){s=t.shift();const o=typeof s,a=Array.isArray(i);if(Array.isArray(s)){for(let l=0;l<s.length;l++)yo(i,[s[l]].concat(t),e);return}else if(a&&o==="function"){for(let l=0;l<i.length;l++)s(i[l],l)&&yo(i,[l].concat(t),e);return}else if(a&&o==="object"){const{from:l=0,to:h=i.length-1,by:c=1}=s;for(let u=l;u<=h;u+=c)yo(i,[u].concat(t),e);return}else if(t.length>1){yo(i[s],t,[s].concat(e));return}r=i[s],e=[s].concat(e)}let n=t[0];typeof n=="function"&&(n=n(r,e),n===r)||s===void 0&&n==null||(n=Vo(n),s===void 0||$l(r)&&$l(n)&&!Array.isArray(n)?S_(r,n):Hl(i,s,n))}function P_(...[i,t]){const e=Vo(i||{}),s=Array.isArray(e),r=A_(e);function n(...o){ew(()=>{s&&o.length===1?Dw(e,o[0]):yo(e,o)})}return[r,n]}var I_={exports:{}};function Rd(){}Rd.prototype={on:function(i,t,e){var s=this.e||(this.e={});return(s[i]||(s[i]=[])).push({fn:t,ctx:e}),this},once:function(i,t,e){var s=this;function r(){s.off(i,r),t.apply(e,arguments)}return r._=t,this.on(i,r,e)},emit:function(i){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[i]||[]).slice(),s=0,r=e.length;for(s;s<r;s++)e[s].fn.apply(e[s].ctx,t);return this},off:function(i,t){var e=this.e||(this.e={}),s=e[i],r=[];if(s&&t)for(var n=0,o=s.length;n<o;n++)s[n].fn!==t&&s[n].fn._!==t&&r.push(s[n]);return r.length?e[i]=r:delete e[i],this}};I_.exports=Rd;var Ow=I_.exports.TinyEmitter=Rd;const Xe=new Ow;var bt=(i=>(i.CHERRY="CHERRY",i.SEVEN="SEVEN",i.BARx1="BARx1",i.BARx2="BARx2",i.BARx3="BARx3",i.BACKGROUND="BACKGROUND",i))(bt||{}),zl=(i=>(i.IMAGES="IMAGES",i.AUDIOS="AUDIOS",i))(zl||{}),he=(i=>(i[i.WIDTH=426]="WIDTH",i[i.HEIGHT=240]="HEIGHT",i))(he||{}),_n=(i=>(i[i.WIDTH=142]="WIDTH",i[i.HEIGHT=240]="HEIGHT",i))(_n||{}),zt=(i=>(i[i.WIDTH=142]="WIDTH",i[i.HEIGHT=120]="HEIGHT",i[i.LINE_THICKNESS=1]="LINE_THICKNESS",i))(zt||{}),hn=(i=>(i.TEST="test",i.DEV="development",i.PROD="production",i.CRAZY_GAMES="crazy",i.GITHUB_PAGES="github",i))(hn||{}),ki=(i=>(i.RED="RED",i.BLUE="BLUE",i))(ki||{});class kw{constructor(t){this.mode=t}isDev(){return this.mode===hn.DEV}isCrazyGames(){return this.mode===hn.CRAZY_GAMES}isGithubPages(){return this.mode===hn.GITHUB_PAGES}isProd(){return this.mode===hn.PROD}isTest(){return this.mode===hn.TEST}}const Bn=new kw("github"),[Os,Lo]=Rt(35),[mu,Fw]=Rt(64e3),[xi,M_]=Rt(1),[Us,Rh]=Rt(0),[Vl,R_]=Rt(!1),[xo,Bw]=P_({isSlot:!0,isDouble:!1}),[D_,Dd]=P_({getMoreCredits:!1,oneMoreChance:!1}),[O_,Od]=Rt(!1),ks=()=>{Dd({getMoreCredits:!1,oneMoreChance:!1}),Od(!1)},Vp=()=>{ks(),Xe.emit("adRejected")},Lw=()=>{Dd({getMoreCredits:!0,oneMoreChance:!1}),Od(!0)},Nw=()=>{Dd({getMoreCredits:!1,oneMoreChance:!0}),Od(!0)},Uw=async()=>{if(!Bn.isCrazyGames()){Lo(Os()+30),ks();return}await window.CrazyGames.SDK.game.gameplayStop(),window.CrazyGames.SDK.ad.requestAd("rewarded",{adStarted:()=>{console.log("Ad started!")},adError:i=>{ks(),console.log("Ad error!",i),Lo(Os()+10),window.CrazyGames.SDK.game.gameplayStart()},adFinished:()=>{ks(),console.log("Ad rewarded!"),Lo(Os()+30),window.CrazyGames.SDK.game.gameplayStart()}})},$w=async()=>{await window.CrazyGames.SDK.game.gameplayStop(),window.CrazyGames.SDK.ad.requestAd("rewarded",{adStarted:()=>{console.log("Ad started!")},adError:i=>{ks(),console.log("Ad error!",i),Xe.emit("adError"),window.CrazyGames.SDK.game.gameplayStart()},adFinished:()=>{ks(),Xe.emit("adFinished"),window.CrazyGames.SDK.game.gameplayStart()}})},Gw=i=>Lo(Os()+i),Hw=i=>Lo(Os()-i),zw=()=>M_(xi()+1),Vw=()=>M_(xi()-1),k_=()=>Rh(0),jw=()=>Rh(Us()*2),Ww=()=>R_(!Vl());(function i(){!O_()&&Fw(mu()-~~(Math.random()*30)-5),setTimeout(i,Math.random()*1e4+5e3)})();const Xw=se('<svg stroke-width="0"></svg>',2),Yw=se("<title></title>",2);function xa(i,t){const e=Tt(i.a,t),[s,r]=He(e,["src"]);return(()=>{const n=Xw.cloneNode(!0);return Xi(n,Tt({get stroke(){return i.a.stroke},get color(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},r,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},get innerHTML(){return i.c},xmlns:"http://www.w3.org/2000/svg"}),!0,!0),Wt(n,()=>Aw,null),Wt(n,(()=>{const o=ae(()=>!!t.title);return()=>o()&&(()=>{const a=Yw.cloneNode(!0);return Wt(a,()=>t.title),a})()})(),null),n})()}function qw(i){return xa({a:{viewBox:"0 0 1024 1024"},c:'<path d="M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"/>'},i)}function Kw(i){return xa({a:{viewBox:"0 0 1024 1024"},c:'<path d="M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"/><path d="M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8Z"/>'},i)}var gu={exports:{}};(function(i,t){(function(){var e,s,r,n,o,a,l,h,c,u,d,p,m,g,_,x,b,y,w,T,D,I,P,S,M,O,N,B,F,U,V,k,W=[].slice;b='<span class="odometer-value"></span>',g='<span class="odometer-ribbon"><span class="odometer-ribbon-inner">'+b+"</span></span>",n='<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">'+g+"</span></span>",l='<span class="odometer-formatting-mark"></span>',r="(,ddd).dd",h=/^\(?([^)]*)\)?(?:(.)(d+))?$/,c=30,a=2e3,e=20,u=2,o=.5,d=1e3/c,s=1e3/e,_="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",M=document.createElement("div").style,x=M.transition!=null||M.webkitTransition!=null||M.mozTransition!=null||M.oTransition!=null,P=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,p=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,w=function($){var E;return E=document.createElement("div"),E.innerHTML=$,E.children[0]},I=function($,E){return $.className=$.className.replace(new RegExp("(^| )"+E.split(" ").join("|")+"( |$)","gi")," ")},y=function($,E){return I($,E),$.className+=" "+E},O=function($,E){var L;if(document.createEvent!=null)return L=document.createEvent("HTMLEvents"),L.initEvent(E,!0,!0),$.dispatchEvent(L)},D=function(){var $,E;return($=(E=window.performance)!=null&&typeof E.now=="function"?E.now():void 0)!=null?$:+new Date},S=function($,E){return E==null&&(E=0),E?($*=Math.pow(10,E),$+=.5,$=Math.floor($),$/=Math.pow(10,E)):Math.round($)},N=function($){return $<0?Math.ceil($):Math.floor($)},T=function($){return $-S($)},F=!1,(B=function(){var $,E,L,G,R;if(!F&&window.jQuery!=null){for(F=!0,G=["html","text"],R=[],E=0,L=G.length;E<L;E++)$=G[E],R.push(function(z){var X;return X=window.jQuery.fn[z],window.jQuery.fn[z]=function(tt){var et;return tt==null||((et=this[0])!=null?et.odometer:void 0)==null?X.apply(this,arguments):this[0].odometer.update(tt)}}($));return R}})(),setTimeout(B,0),m=function(){function $(E){var L,G,R,z,X,tt,et,ht,ct,at=this;if(this.options=E,this.el=this.options.el,this.el.odometer!=null)return this.el.odometer;this.el.odometer=this,et=$.options;for(L in et)R=et[L],this.options[L]==null&&(this.options[L]=R);(z=this.options).duration==null&&(z.duration=a),this.MAX_VALUES=this.options.duration/d/u|0,this.resetFormat(),this.value=this.cleanValue((ht=this.options.value)!=null?ht:""),this.renderInside(),this.render();try{for(ct=["innerHTML","innerText","textContent"],X=0,tt=ct.length;X<tt;X++)G=ct[X],this.el[G]!=null&&function(j){return Object.defineProperty(at.el,j,{get:function(){var gt;return j==="innerHTML"?at.inside.outerHTML:(gt=at.inside.innerText)!=null?gt:at.inside.textContent},set:function(gt){return at.update(gt)}})}(G)}catch{this.watchForMutations()}}return $.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},$.prototype.watchForMutations=function(){var E=this;if(p!=null)try{return this.observer==null&&(this.observer=new p(function(L){var G;return G=E.el.innerText,E.renderInside(),E.render(E.value),E.update(G)})),this.watchMutations=!0,this.startWatchingMutations()}catch{}},$.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})},$.prototype.stopWatchingMutations=function(){var E;return(E=this.observer)!=null?E.disconnect():void 0},$.prototype.cleanValue=function(E){var L;return typeof E=="string"&&(E=E.replace((L=this.format.radix)!=null?L:".","<radix>"),E=E.replace(/[.,]/g,""),E=E.replace("<radix>","."),E=parseFloat(E,10)||0),S(E,this.format.precision)},$.prototype.bindTransitionEnd=function(){var E,L,G,R,z,X,tt=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,L=!1,z=_.split(" "),X=[],G=0,R=z.length;G<R;G++)E=z[G],X.push(this.el.addEventListener(E,function(){return L||(L=!0,setTimeout(function(){return tt.render(),L=!1,O(tt.el,"odometerdone")},0)),!0},!1));return X}},$.prototype.resetFormat=function(){var E,L,G,R,z,X,tt,et;if(E=(tt=this.options.format)!=null?tt:r,E||(E="d"),G=h.exec(E),!G)throw new Error("Odometer: Unparsable digit format");return et=G.slice(1,4),X=et[0],z=et[1],L=et[2],R=(L!=null?L.length:void 0)||0,this.format={repeating:X,radix:z,precision:R}},$.prototype.render=function(E){var L,G,R,z,X,tt,et;for(E==null&&(E=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",X=this.options.theme,L=this.el.className.split(" "),z=[],tt=0,et=L.length;tt<et;tt++)if(G=L[tt],!!G.length){if(R=/^odometer-theme-(.+)$/.exec(G)){X=R[1];continue}/^odometer(-|$)/.test(G)||z.push(G)}return z.push("odometer"),x||z.push("odometer-no-transitions"),X?z.push("odometer-theme-"+X):z.push("odometer-auto-theme"),this.el.className=z.join(" "),this.ribbons={},this.formatDigits(E),this.startWatchingMutations()},$.prototype.formatDigits=function(E){var L,G,R,z,X,tt,et,ht,ct,at;if(this.digits=[],this.options.formatFunction)for(R=this.options.formatFunction(E),ct=R.split("").reverse(),X=0,et=ct.length;X<et;X++)G=ct[X],G.match(/0-9/)?(L=this.renderDigit(),L.querySelector(".odometer-value").innerHTML=G,this.digits.push(L),this.insertDigit(L)):this.addSpacer(G);else for(z=!this.format.precision||!T(E)||!1,at=E.toString().split("").reverse(),tt=0,ht=at.length;tt<ht;tt++)L=at[tt],L==="."&&(z=!0),this.addDigit(L,z)},$.prototype.update=function(E){var L,G=this;if(E=this.cleanValue(E),!!(L=E-this.value))return I(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),L>0?y(this.el,"odometer-animating-up"):y(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(E),this.startWatchingMutations(),setTimeout(function(){return G.el.offsetHeight,y(G.el,"odometer-animating")},0),this.value=E},$.prototype.renderDigit=function(){return w(n)},$.prototype.insertDigit=function(E,L){return L!=null?this.inside.insertBefore(E,L):this.inside.children.length?this.inside.insertBefore(E,this.inside.children[0]):this.inside.appendChild(E)},$.prototype.addSpacer=function(E,L,G){var R;return R=w(l),R.innerHTML=E,G&&y(R,G),this.insertDigit(R,L)},$.prototype.addDigit=function(E,L){var G,R,z,X;if(L==null&&(L=!0),E==="-")return this.addSpacer(E,null,"odometer-negation-mark");if(E===".")return this.addSpacer((X=this.format.radix)!=null?X:".",null,"odometer-radix-mark");if(L)for(z=!1;;){if(!this.format.repeating.length){if(z)throw new Error("Bad odometer format without digits");this.resetFormat(),z=!0}if(G=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),G==="d")break;this.addSpacer(G)}return R=this.renderDigit(),R.querySelector(".odometer-value").innerHTML=E,this.digits.push(R),this.insertDigit(R)},$.prototype.animate=function(E){return!x||this.options.animation==="count"?this.animateCount(E):this.animateSlide(E)},$.prototype.animateCount=function(E){var L,G,R,z,X,tt=this;if(G=+E-this.value)return z=R=D(),L=this.value,(X=function(){var et,ht,ct;if(D()-z>tt.options.duration){tt.value=E,tt.render(),O(tt.el,"odometerdone");return}return et=D()-R,et>s&&(R=D(),ct=et/tt.options.duration,ht=G*ct,L+=ht,tt.render(Math.round(L))),P!=null?P(X):setTimeout(X,s)})()},$.prototype.getDigitCount=function(){var E,L,G,R,z,X;for(R=1<=arguments.length?W.call(arguments,0):[],E=z=0,X=R.length;z<X;E=++z)G=R[E],R[E]=Math.abs(G);return L=Math.max.apply(Math,R),Math.ceil(Math.log(L+1)/Math.log(10))},$.prototype.getFractionalDigitCount=function(){var E,L,G,R,z,X,tt;for(z=1<=arguments.length?W.call(arguments,0):[],L=/^\-?\d*\.(\d*?)0*$/,E=X=0,tt=z.length;X<tt;E=++X)R=z[E],z[E]=R.toString(),G=L.exec(z[E]),G==null?z[E]=0:z[E]=G[1].length;return Math.max.apply(Math,z)},$.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},$.prototype.animateSlide=function(E){var L,G,R,z,X,tt,et,ht,ct,at,j,gt,xt,Gt,St,Pt,re,pe,ye,Se,Di,qs,Ks,bs,ws,Ts,ci;if(Pt=this.value,ht=this.getFractionalDigitCount(Pt,E),ht&&(E=E*Math.pow(10,ht),Pt=Pt*Math.pow(10,ht)),!!(R=E-Pt)){for(this.bindTransitionEnd(),z=this.getDigitCount(Pt,E),X=[],L=0,j=ye=0;0<=z?ye<z:ye>z;j=0<=z?++ye:--ye){if(re=N(Pt/Math.pow(10,z-j-1)),et=N(E/Math.pow(10,z-j-1)),tt=et-re,Math.abs(tt)>this.MAX_VALUES){for(at=[],gt=tt/(this.MAX_VALUES+this.MAX_VALUES*L*o),G=re;tt>0&&G<et||tt<0&&G>et;)at.push(Math.round(G)),G+=gt;at[at.length-1]!==et&&at.push(et),L++}else at=(function(){ci=[];for(var ne=re;re<=et?ne<=et:ne>=et;re<=et?ne++:ne--)ci.push(ne);return ci}).apply(this);for(j=Se=0,qs=at.length;Se<qs;j=++Se)ct=at[j],at[j]=Math.abs(ct%10);X.push(at)}for(this.resetDigits(),Ts=X.reverse(),j=Di=0,Ks=Ts.length;Di<Ks;j=++Di)for(at=Ts[j],this.digits[j]||this.addDigit(" ",j>=ht),(pe=this.ribbons)[j]==null&&(pe[j]=this.digits[j].querySelector(".odometer-ribbon-inner")),this.ribbons[j].innerHTML="",R<0&&(at=at.reverse()),xt=ws=0,bs=at.length;ws<bs;xt=++ws)ct=at[xt],St=document.createElement("div"),St.className="odometer-value",St.innerHTML=ct,this.ribbons[j].appendChild(St),xt===at.length-1&&y(St,"odometer-last-value"),xt===0&&y(St,"odometer-first-value");if(re<0&&this.addDigit("-"),Gt=this.inside.querySelector(".odometer-radix-mark"),Gt!=null&&Gt.parent.removeChild(Gt),ht)return this.addSpacer(this.format.radix,this.digits[ht-1],"odometer-radix-mark")}},$}(),m.options=(V=window.odometerOptions)!=null?V:{},setTimeout(function(){var $,E,L,G,R;if(window.odometerOptions){G=window.odometerOptions,R=[];for($ in G)E=G[$],R.push((L=m.options)[$]!=null?(L=m.options)[$]:L[$]=E);return R}},0),m.init=function(){var $,E,L,G,R,z;if(document.querySelectorAll!=null){for(E=document.querySelectorAll(m.options.selector||".odometer"),z=[],L=0,G=E.length;L<G;L++)$=E[L],z.push($.odometer=new m({el:$,value:(R=$.innerText)!=null?R:$.textContent}));return z}},((k=document.documentElement)!=null?k.doScroll:void 0)!=null&&document.createEventObject!=null?(U=document.onreadystatechange,document.onreadystatechange=function(){return document.readyState==="complete"&&m.options.auto!==!1&&m.init(),U!=null?U.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(m.options.auto!==!1)return m.init()},!1),t!==null?i.exports=m:window.Odometer=m}).call(ko)})(gu,gu.exports);var Zw=gu.exports;const Dh=wh(Zw);const Qw=se('<div><div class="label">Bet</div><div class="controls"><button class="btn btn-sm btn-outline-light"></button><span class="value"></span><button class="btn btn-sm btn-outline-light">'),Jw=i=>{const[t,e]=Rt(!1),[s,r]=Rt(""),n=ti(),o=ti(),a=1,l=15,h=()=>{xi()<l&&zw()},c=()=>{xi()>a&&Vw()};return te(()=>{o.current||n.current&&(o.current=new Dh({el:n.current,value:xi(),theme:"minimal"}))},{layout:!0}),te(()=>{var u;(u=o.current)==null||u.update(xi())}),te(()=>{e(i.disabled),r(i.disabled?"disabled":"")}),(()=>{const u=Qw(),d=u.firstChild,p=d.nextSibling,m=p.firstChild,g=m.nextSibling,_=g.nextSibling;return m.$$click=c,Wt(m,it(qw,{})),Wt(g,xi),_.$$click=h,Wt(_,it(Kw,{})),Gi(x=>{const b=`total-bet ${s()}`,y=t(),w=t();return b!==x._v$&&Id(u,x._v$=b),y!==x._v$2&&(m.disabled=x._v$2=y),w!==x._v$3&&(_.disabled=x._v$3=w),x},{_v$:void 0,_v$2:void 0,_v$3:void 0}),u})()};Pd(["click"]);function tT(i){return xa({a:{viewBox:"0 0 16 16"},c:'<path d="M16 6h-6l2.243-2.243C11.11 2.624 9.603 2 8 2s-3.109.624-4.243 1.757C2.624 4.89 2 6.397 2 8s.624 3.109 1.757 4.243C4.89 13.376 6.397 14 8 14a5.963 5.963 0 0 0 4.516-2.049l1.505 1.317a8 8 0 1 1-.364-10.924L16 0v6z"/>'},i)}var js=(i=>(i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2",i))(js||{}),kd=(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS",i))(kd||{}),jl=(i=>(i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL",i))(jl||{}),lt=(i=>(i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR",i))(lt||{}),bi=(i=>(i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN",i))(bi||{}),Y=(i=>(i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.RG=33319]="RG",i[i.RED=6403]="RED",i[i.RGBA_INTEGER=36249]="RGBA_INTEGER",i[i.RGB_INTEGER=36248]="RGB_INTEGER",i[i.RG_INTEGER=33320]="RG_INTEGER",i[i.RED_INTEGER=36244]="RED_INTEGER",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",i))(Y||{}),Er=(i=>(i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i))(Er||{}),ot=(i=>(i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",i[i.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",i[i.BYTE=5120]="BYTE",i[i.SHORT=5122]="SHORT",i[i.INT=5124]="INT",i[i.FLOAT=5126]="FLOAT",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",i[i.HALF_FLOAT=36193]="HALF_FLOAT",i))(ot||{}),Wl=(i=>(i[i.FLOAT=0]="FLOAT",i[i.INT=1]="INT",i[i.UINT=2]="UINT",i))(Wl||{}),wi=(i=>(i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR",i))(wi||{}),Hi=(i=>(i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",i))(Hi||{}),Mi=(i=>(i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL",i))(Mi||{}),hi=(i=>(i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",i))(hi||{}),yi=(i=>(i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT",i))(yi||{}),Oh=(i=>(i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL",i))(Oh||{}),Fe=(i=>(i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp",i))(Fe||{}),Xt=(i=>(i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",i[i.COLOR=4]="COLOR",i))(Xt||{}),F_=(i=>(i[i.RED=1]="RED",i[i.GREEN=2]="GREEN",i[i.BLUE=4]="BLUE",i[i.ALPHA=8]="ALPHA",i))(F_||{}),Vt=(i=>(i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH",i))(Vt||{}),Ei=(i=>(i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",i))(Ei||{});const B_={createCanvas:(i,t)=>{const e=document.createElement("canvas");return e.width=i,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,t)=>fetch(i,t),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")},Z={ADAPTER:B_,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var pc=/iPhone/i,jp=/iPod/i,Wp=/iPad/i,Xp=/\biOS-universal(?:.+)Mac\b/i,mc=/\bAndroid(?:.+)Mobile\b/i,Yp=/Android/i,Jr=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ka=/Silk/i,ss=/Windows Phone/i,qp=/\bWindows(?:.+)ARM\b/i,Kp=/BlackBerry/i,Zp=/BB10/i,Qp=/Opera Mini/i,Jp=/\b(CriOS|Chrome)(?:.+)Mobile/i,tm=/Mobile(?:.+)Firefox\b/i,em=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function eT(i){return function(t){return t.test(i)}}function im(i){var t={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?t.userAgent=i:i&&i.userAgent&&(t={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var e=t.userAgent,s=e.split("[FBAN");typeof s[1]<"u"&&(e=s[0]),s=e.split("Twitter"),typeof s[1]<"u"&&(e=s[0]);var r=eT(e),n={apple:{phone:r(pc)&&!r(ss),ipod:r(jp),tablet:!r(pc)&&(r(Wp)||em(t))&&!r(ss),universal:r(Xp),device:(r(pc)||r(jp)||r(Wp)||r(Xp)||em(t))&&!r(ss)},amazon:{phone:r(Jr),tablet:!r(Jr)&&r(Ka),device:r(Jr)||r(Ka)},android:{phone:!r(ss)&&r(Jr)||!r(ss)&&r(mc),tablet:!r(ss)&&!r(Jr)&&!r(mc)&&(r(Ka)||r(Yp)),device:!r(ss)&&(r(Jr)||r(Ka)||r(mc)||r(Yp))||r(/\bokhttp\b/i)},windows:{phone:r(ss),tablet:r(qp),device:r(ss)||r(qp)},other:{blackberry:r(Kp),blackberry10:r(Zp),opera:r(Qp),firefox:r(tm),chrome:r(Jp),device:r(Kp)||r(Zp)||r(Qp)||r(tm)||r(Jp)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const iT=im.default??im,Ti=iT(globalThis.navigator);Z.RETINA_PREFIX=/@([0-9\.]+)x/;Z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var L_={exports:{}};(function(i){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function n(l,h,c,u,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new r(c,u||l,d),m=e?e+h:h;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new s:delete l._events[h]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],c,u;if(this._eventsCount===0)return h;for(u in c=this._events)t.call(c,u)&&h.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},a.prototype.listeners=function(h){var c=e?e+h:h,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,p=u.length,m=new Array(p);d<p;d++)m[d]=u[d].fn;return m},a.prototype.listenerCount=function(h){var c=e?e+h:h,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(h,c,u,d,p,m){var g=e?e+h:h;if(!this._events[g])return!1;var _=this._events[g],x=arguments.length,b,y;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,c),!0;case 3:return _.fn.call(_.context,c,u),!0;case 4:return _.fn.call(_.context,c,u,d),!0;case 5:return _.fn.call(_.context,c,u,d,p),!0;case 6:return _.fn.call(_.context,c,u,d,p,m),!0}for(y=1,b=new Array(x-1);y<x;y++)b[y-1]=arguments[y];_.fn.apply(_.context,b)}else{var w=_.length,T;for(y=0;y<w;y++)switch(_[y].once&&this.removeListener(h,_[y].fn,void 0,!0),x){case 1:_[y].fn.call(_[y].context);break;case 2:_[y].fn.call(_[y].context,c);break;case 3:_[y].fn.call(_[y].context,c,u);break;case 4:_[y].fn.call(_[y].context,c,u,d);break;default:if(!b)for(T=1,b=new Array(x-1);T<x;T++)b[T-1]=arguments[T];_[y].fn.apply(_[y].context,b)}}return!0},a.prototype.on=function(h,c,u){return n(this,h,c,u,!1)},a.prototype.once=function(h,c,u){return n(this,h,c,u,!0)},a.prototype.removeListener=function(h,c,u,d){var p=e?e+h:h;if(!this._events[p])return this;if(!c)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===c&&(!d||m.once)&&(!u||m.context===u)&&o(this,p);else{for(var g=0,_=[],x=m.length;g<x;g++)(m[g].fn!==c||d&&!m[g].once||u&&m[g].context!==u)&&_.push(m[g]);_.length?this._events[p]=_.length===1?_[0]:_:o(this,p)}return this},a.prototype.removeAllListeners=function(h){var c;return h?(c=e?e+h:h,this._events[c]&&o(this,c)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,i.exports=a})(L_);var sT=L_.exports;const Qn=wh(sT);var Fd={exports:{}};Fd.exports=kh;Fd.exports.default=kh;function kh(i,t,e){e=e||2;var s=t&&t.length,r=s?t[0]*e:i.length,n=N_(i,0,r,e,!0),o=[];if(!n||n.next===n.prev)return o;var a,l,h,c,u,d,p;if(s&&(n=lT(i,t,n,e)),i.length>80*e){a=h=i[0],l=c=i[1];for(var m=e;m<r;m+=e)u=i[m],d=i[m+1],u<a&&(a=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);p=Math.max(h-a,c-l),p=p!==0?32767/p:0}return Wo(n,o,e,a,l,p,0),o}function N_(i,t,e,s,r){var n,o;if(r===yu(i,t,e,s)>0)for(n=t;n<e;n+=s)o=sm(n,i[n],i[n+1],o);else for(n=e-s;n>=t;n-=s)o=sm(n,i[n],i[n+1],o);return o&&Fh(o,o.next)&&(Yo(o),o=o.next),o}function Fr(i,t){if(!i)return i;t||(t=i);var e=i,s;do if(s=!1,!e.steiner&&(Fh(e,e.next)||Bt(e.prev,e,e.next)===0)){if(Yo(e),e=t=e.prev,e===e.next)break;s=!0}else e=e.next;while(s||e!==t);return t}function Wo(i,t,e,s,r,n,o){if(i){!o&&n&&fT(i,s,r,n);for(var a=i,l,h;i.prev!==i.next;){if(l=i.prev,h=i.next,n?nT(i,s,r,n):rT(i)){t.push(l.i/e|0),t.push(i.i/e|0),t.push(h.i/e|0),Yo(i),i=h.next,a=h.next;continue}if(i=h,i===a){o?o===1?(i=oT(Fr(i),t,e),Wo(i,t,e,s,r,n,2)):o===2&&aT(i,t,e,s,r,n):Wo(Fr(i),t,e,s,r,n,1);break}}}}function rT(i){var t=i.prev,e=i,s=i.next;if(Bt(t,e,s)>=0)return!1;for(var r=t.x,n=e.x,o=s.x,a=t.y,l=e.y,h=s.y,c=r<n?r<o?r:o:n<o?n:o,u=a<l?a<h?a:h:l<h?l:h,d=r>n?r>o?r:o:n>o?n:o,p=a>l?a>h?a:h:l>h?l:h,m=s.next;m!==t;){if(m.x>=c&&m.x<=d&&m.y>=u&&m.y<=p&&vn(r,a,n,l,o,h,m.x,m.y)&&Bt(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function nT(i,t,e,s){var r=i.prev,n=i,o=i.next;if(Bt(r,n,o)>=0)return!1;for(var a=r.x,l=n.x,h=o.x,c=r.y,u=n.y,d=o.y,p=a<l?a<h?a:h:l<h?l:h,m=c<u?c<d?c:d:u<d?u:d,g=a>l?a>h?a:h:l>h?l:h,_=c>u?c>d?c:d:u>d?u:d,x=_u(p,m,t,e,s),b=_u(g,_,t,e,s),y=i.prevZ,w=i.nextZ;y&&y.z>=x&&w&&w.z<=b;){if(y.x>=p&&y.x<=g&&y.y>=m&&y.y<=_&&y!==r&&y!==o&&vn(a,c,l,u,h,d,y.x,y.y)&&Bt(y.prev,y,y.next)>=0||(y=y.prevZ,w.x>=p&&w.x<=g&&w.y>=m&&w.y<=_&&w!==r&&w!==o&&vn(a,c,l,u,h,d,w.x,w.y)&&Bt(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=x;){if(y.x>=p&&y.x<=g&&y.y>=m&&y.y<=_&&y!==r&&y!==o&&vn(a,c,l,u,h,d,y.x,y.y)&&Bt(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=b;){if(w.x>=p&&w.x<=g&&w.y>=m&&w.y<=_&&w!==r&&w!==o&&vn(a,c,l,u,h,d,w.x,w.y)&&Bt(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function oT(i,t,e){var s=i;do{var r=s.prev,n=s.next.next;!Fh(r,n)&&U_(r,s,s.next,n)&&Xo(r,n)&&Xo(n,r)&&(t.push(r.i/e|0),t.push(s.i/e|0),t.push(n.i/e|0),Yo(s),Yo(s.next),s=i=n),s=s.next}while(s!==i);return Fr(s)}function aT(i,t,e,s,r,n){var o=i;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&gT(o,a)){var l=$_(o,a);o=Fr(o,o.next),l=Fr(l,l.next),Wo(o,t,e,s,r,n,0),Wo(l,t,e,s,r,n,0);return}a=a.next}o=o.next}while(o!==i)}function lT(i,t,e,s){var r=[],n,o,a,l,h;for(n=0,o=t.length;n<o;n++)a=t[n]*s,l=n<o-1?t[n+1]*s:i.length,h=N_(i,a,l,s,!1),h===h.next&&(h.steiner=!0),r.push(mT(h));for(r.sort(hT),n=0;n<r.length;n++)e=cT(r[n],e);return e}function hT(i,t){return i.x-t.x}function cT(i,t){var e=uT(i,t);if(!e)return t;var s=$_(e,i);return Fr(s,s.next),Fr(e,e.next)}function uT(i,t){var e=t,s=i.x,r=i.y,n=-1/0,o;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var a=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=s&&a>n&&(n=a,o=e.x<e.next.x?e:e.next,a===s))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,h=o.x,c=o.y,u=1/0,d;e=o;do s>=e.x&&e.x>=h&&s!==e.x&&vn(r<c?s:n,r,h,c,r<c?n:s,r,e.x,e.y)&&(d=Math.abs(r-e.y)/(s-e.x),Xo(e,i)&&(d<u||d===u&&(e.x>o.x||e.x===o.x&&dT(o,e)))&&(o=e,u=d)),e=e.next;while(e!==l);return o}function dT(i,t){return Bt(i.prev,i,t.prev)<0&&Bt(t.next,i,i.next)<0}function fT(i,t,e,s){var r=i;do r.z===0&&(r.z=_u(r.x,r.y,t,e,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,pT(r)}function pT(i){var t,e,s,r,n,o,a,l,h=1;do{for(e=i,i=null,n=null,o=0;e;){for(o++,s=e,a=0,t=0;t<h&&(a++,s=s.nextZ,!!s);t++);for(l=h;a>0||l>0&&s;)a!==0&&(l===0||!s||e.z<=s.z)?(r=e,e=e.nextZ,a--):(r=s,s=s.nextZ,l--),n?n.nextZ=r:i=r,r.prevZ=n,n=r;e=s}n.nextZ=null,h*=2}while(o>1);return i}function _u(i,t,e,s,r){return i=(i-e)*r|0,t=(t-s)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function mT(i){var t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function vn(i,t,e,s,r,n,o,a){return(r-o)*(t-a)>=(i-o)*(n-a)&&(i-o)*(s-a)>=(e-o)*(t-a)&&(e-o)*(n-a)>=(r-o)*(s-a)}function gT(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!_T(i,t)&&(Xo(i,t)&&Xo(t,i)&&vT(i,t)&&(Bt(i.prev,i,t.prev)||Bt(i,t.prev,t))||Fh(i,t)&&Bt(i.prev,i,i.next)>0&&Bt(t.prev,t,t.next)>0)}function Bt(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Fh(i,t){return i.x===t.x&&i.y===t.y}function U_(i,t,e,s){var r=Qa(Bt(i,t,e)),n=Qa(Bt(i,t,s)),o=Qa(Bt(e,s,i)),a=Qa(Bt(e,s,t));return!!(r!==n&&o!==a||r===0&&Za(i,e,t)||n===0&&Za(i,s,t)||o===0&&Za(e,i,s)||a===0&&Za(e,t,s))}function Za(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function Qa(i){return i>0?1:i<0?-1:0}function _T(i,t){var e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&U_(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function Xo(i,t){return Bt(i.prev,i,i.next)<0?Bt(i,t,i.next)>=0&&Bt(i,i.prev,t)>=0:Bt(i,t,i.prev)<0||Bt(i,i.next,t)<0}function vT(i,t){var e=i,s=!1,r=(i.x+t.x)/2,n=(i.y+t.y)/2;do e.y>n!=e.next.y>n&&e.next.y!==e.y&&r<(e.next.x-e.x)*(n-e.y)/(e.next.y-e.y)+e.x&&(s=!s),e=e.next;while(e!==i);return s}function $_(i,t){var e=new vu(i.i,i.x,i.y),s=new vu(t.i,t.x,t.y),r=i.next,n=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,s.next=e,e.prev=s,n.next=s,s.prev=n,s}function sm(i,t,e,s){var r=new vu(i,t,e);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function Yo(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function vu(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}kh.deviation=function(i,t,e,s){var r=t&&t.length,n=r?t[0]*e:i.length,o=Math.abs(yu(i,0,n,e));if(r)for(var a=0,l=t.length;a<l;a++){var h=t[a]*e,c=a<l-1?t[a+1]*e:i.length;o-=Math.abs(yu(i,h,c,e))}var u=0;for(a=0;a<s.length;a+=3){var d=s[a]*e,p=s[a+1]*e,m=s[a+2]*e;u+=Math.abs((i[d]-i[m])*(i[p+1]-i[d+1])-(i[d]-i[p])*(i[m+1]-i[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function yu(i,t,e,s){for(var r=0,n=t,o=e-s;n<e;n+=s)r+=(i[o]-i[n])*(i[n+1]+i[o+1]),o=n;return r}kh.flatten=function(i){for(var t=i[0][0].length,e={vertices:[],holes:[],dimensions:t},s=0,r=0;r<i.length;r++){for(var n=0;n<i[r].length;n++)for(var o=0;o<t;o++)e.vertices.push(i[r][n][o]);r>0&&(s+=i[r-1].length,e.holes.push(s))}return e};var yT=Fd.exports;const G_=wh(yT);var Xl={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */Xl.exports;(function(i,t){(function(e){var s=t&&!t.nodeType&&t,r=i&&!i.nodeType&&i,n=typeof ko=="object"&&ko;(n.global===n||n.window===n||n.self===n)&&(e=n);var o,a=2147483647,l=36,h=1,c=26,u=38,d=700,p=72,m=128,g="-",_=/^xn--/,x=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=l-h,T=Math.floor,D=String.fromCharCode,I;function P(E){throw RangeError(y[E])}function S(E,L){for(var G=E.length,R=[];G--;)R[G]=L(E[G]);return R}function M(E,L){var G=E.split("@"),R="";G.length>1&&(R=G[0]+"@",E=G[1]),E=E.replace(b,".");var z=E.split("."),X=S(z,L).join(".");return R+X}function O(E){for(var L=[],G=0,R=E.length,z,X;G<R;)z=E.charCodeAt(G++),z>=55296&&z<=56319&&G<R?(X=E.charCodeAt(G++),(X&64512)==56320?L.push(((z&1023)<<10)+(X&1023)+65536):(L.push(z),G--)):L.push(z);return L}function N(E){return S(E,function(L){var G="";return L>65535&&(L-=65536,G+=D(L>>>10&1023|55296),L=56320|L&1023),G+=D(L),G}).join("")}function B(E){return E-48<10?E-22:E-65<26?E-65:E-97<26?E-97:l}function F(E,L){return E+22+75*(E<26)-((L!=0)<<5)}function U(E,L,G){var R=0;for(E=G?T(E/d):E>>1,E+=T(E/L);E>w*c>>1;R+=l)E=T(E/w);return T(R+(w+1)*E/(E+u))}function V(E){var L=[],G=E.length,R,z=0,X=m,tt=p,et,ht,ct,at,j,gt,xt,Gt,St;for(et=E.lastIndexOf(g),et<0&&(et=0),ht=0;ht<et;++ht)E.charCodeAt(ht)>=128&&P("not-basic"),L.push(E.charCodeAt(ht));for(ct=et>0?et+1:0;ct<G;){for(at=z,j=1,gt=l;ct>=G&&P("invalid-input"),xt=B(E.charCodeAt(ct++)),(xt>=l||xt>T((a-z)/j))&&P("overflow"),z+=xt*j,Gt=gt<=tt?h:gt>=tt+c?c:gt-tt,!(xt<Gt);gt+=l)St=l-Gt,j>T(a/St)&&P("overflow"),j*=St;R=L.length+1,tt=U(z-at,R,at==0),T(z/R)>a-X&&P("overflow"),X+=T(z/R),z%=R,L.splice(z++,0,X)}return N(L)}function k(E){var L,G,R,z,X,tt,et,ht,ct,at,j,gt=[],xt,Gt,St,Pt;for(E=O(E),xt=E.length,L=m,G=0,X=p,tt=0;tt<xt;++tt)j=E[tt],j<128&&gt.push(D(j));for(R=z=gt.length,z&&gt.push(g);R<xt;){for(et=a,tt=0;tt<xt;++tt)j=E[tt],j>=L&&j<et&&(et=j);for(Gt=R+1,et-L>T((a-G)/Gt)&&P("overflow"),G+=(et-L)*Gt,L=et,tt=0;tt<xt;++tt)if(j=E[tt],j<L&&++G>a&&P("overflow"),j==L){for(ht=G,ct=l;at=ct<=X?h:ct>=X+c?c:ct-X,!(ht<at);ct+=l)Pt=ht-at,St=l-at,gt.push(D(F(at+Pt%St,0))),ht=T(Pt/St);gt.push(D(F(ht,0))),X=U(G,Gt,R==z),G=0,++R}++G,++L}return gt.join("")}function W(E){return M(E,function(L){return _.test(L)?V(L.slice(4).toLowerCase()):L})}function $(E){return M(E,function(L){return x.test(L)?"xn--"+k(L):L})}if(o={version:"1.3.2",ucs2:{decode:O,encode:N},decode:V,encode:k,toASCII:$,toUnicode:W},s&&r)if(i.exports==s)r.exports=o;else for(I in o)o.hasOwnProperty(I)&&(s[I]=o[I]);else e.punycode=o})(ko)})(Xl,Xl.exports);var xT=Xl.exports,bT={isString:function(i){return typeof i=="string"},isObject:function(i){return typeof i=="object"&&i!==null},isNull:function(i){return i===null},isNullOrUndefined:function(i){return i==null}},qo={};function wT(i,t){return Object.prototype.hasOwnProperty.call(i,t)}var TT=function(i,t,e,s){t=t||"&",e=e||"=";var r={};if(typeof i!="string"||i.length===0)return r;var n=/\+/g;i=i.split(t);var o=1e3;s&&typeof s.maxKeys=="number"&&(o=s.maxKeys);var a=i.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var h=i[l].replace(n,"%20"),c=h.indexOf(e),u,d,p,m;c>=0?(u=h.substr(0,c),d=h.substr(c+1)):(u=h,d=""),p=decodeURIComponent(u),m=decodeURIComponent(d),wT(r,p)?Array.isArray(r[p])?r[p].push(m):r[p]=[r[p],m]:r[p]=m}return r},ho=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}},ET=function(i,t,e,s){return t=t||"&",e=e||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(r){var n=encodeURIComponent(ho(r))+e;return Array.isArray(i[r])?i[r].map(function(o){return n+encodeURIComponent(ho(o))}).join(t):n+encodeURIComponent(ho(i[r]))}).join(t):s?encodeURIComponent(ho(s))+e+encodeURIComponent(ho(i)):""};qo.decode=qo.parse=TT;qo.encode=qo.stringify=ET;var AT=xT,Fi=bT,CT=Bh,ST=NT,PT=LT;function Ai(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var IT=/^([a-z0-9.+-]+:)/i,MT=/:[0-9]*$/,RT=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,DT=["<",">",'"',"`"," ","\r",`
`,"	"],OT=["{","}","|","\\","^","`"].concat(DT),xu=["'"].concat(OT),rm=["%","/","?",";","#"].concat(xu),nm=["/","?","#"],kT=255,om=/^[+a-z0-9A-Z_-]{0,63}$/,FT=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,BT={javascript:!0,"javascript:":!0},bu={javascript:!0,"javascript:":!0},Tn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},wu=qo;function Bh(i,t,e){if(i&&Fi.isObject(i)&&i instanceof Ai)return i;var s=new Ai;return s.parse(i,t,e),s}Ai.prototype.parse=function(i,t,e){if(!Fi.isString(i))throw new TypeError("Parameter 'url' must be a string, not "+typeof i);var s=i.indexOf("?"),r=s!==-1&&s<i.indexOf("#")?"?":"#",n=i.split(r),o=/\\/g;n[0]=n[0].replace(o,"/"),i=n.join(r);var a=i;if(a=a.trim(),!e&&i.split("#").length===1){var l=RT.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=wu.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=IT.exec(a);if(h){h=h[0];var c=h.toLowerCase();this.protocol=c,a=a.substr(h.length)}if(e||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=a.substr(0,2)==="//";u&&!(h&&bu[h])&&(a=a.substr(2),this.slashes=!0)}if(!bu[h]&&(u||h&&!Tn[h])){for(var d=-1,p=0;p<nm.length;p++){var m=a.indexOf(nm[p]);m!==-1&&(d===-1||m<d)&&(d=m)}var g,_;d===-1?_=a.lastIndexOf("@"):_=a.lastIndexOf("@",d),_!==-1&&(g=a.slice(0,_),a=a.slice(_+1),this.auth=decodeURIComponent(g)),d=-1;for(var p=0;p<rm.length;p++){var m=a.indexOf(rm[p]);m!==-1&&(d===-1||m<d)&&(d=m)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x)for(var b=this.hostname.split(/\./),p=0,y=b.length;p<y;p++){var w=b[p];if(w&&!w.match(om)){for(var T="",D=0,I=w.length;D<I;D++)w.charCodeAt(D)>127?T+="x":T+=w[D];if(!T.match(om)){var P=b.slice(0,p),S=b.slice(p+1),M=w.match(FT);M&&(P.push(M[1]),S.unshift(M[2])),S.length&&(a="/"+S.join(".")+a),this.hostname=P.join(".");break}}}this.hostname.length>kT?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=AT.toASCII(this.hostname));var O=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+O,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!BT[c])for(var p=0,y=xu.length;p<y;p++){var B=xu[p];if(a.indexOf(B)!==-1){var F=encodeURIComponent(B);F===B&&(F=escape(B)),a=a.split(B).join(F)}}var U=a.indexOf("#");U!==-1&&(this.hash=a.substr(U),a=a.slice(0,U));var V=a.indexOf("?");if(V!==-1?(this.search=a.substr(V),this.query=a.substr(V+1),t&&(this.query=wu.parse(this.query)),a=a.slice(0,V)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Tn[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var O=this.pathname||"",k=this.search||"";this.path=O+k}return this.href=this.format(),this};function LT(i){return Fi.isString(i)&&(i=Bh(i)),i instanceof Ai?i.format():Ai.prototype.format.call(i)}Ai.prototype.format=function(){var i=this.auth||"";i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":"),i+="@");var t=this.protocol||"",e=this.pathname||"",s=this.hash||"",r=!1,n="";this.host?r=i+this.host:this.hostname&&(r=i+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&Fi.isObject(this.query)&&Object.keys(this.query).length&&(n=wu.stringify(this.query));var o=this.search||n&&"?"+n||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Tn[t])&&r!==!1?(r="//"+(r||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):r||(r=""),s&&s.charAt(0)!=="#"&&(s="#"+s),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+r+e+o+s};function NT(i,t){return Bh(i,!1,!0).resolve(t)}Ai.prototype.resolve=function(i){return this.resolveObject(Bh(i,!1,!0)).format()};Ai.prototype.resolveObject=function(i){if(Fi.isString(i)){var t=new Ai;t.parse(i,!1,!0),i=t}for(var e=new Ai,s=Object.keys(this),r=0;r<s.length;r++){var n=s[r];e[n]=this[n]}if(e.hash=i.hash,i.href==="")return e.href=e.format(),e;if(i.slashes&&!i.protocol){for(var o=Object.keys(i),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(e[l]=i[l])}return Tn[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(i.protocol&&i.protocol!==e.protocol){if(!Tn[i.protocol]){for(var h=Object.keys(i),c=0;c<h.length;c++){var u=h[c];e[u]=i[u]}return e.href=e.format(),e}if(e.protocol=i.protocol,!i.host&&!bu[i.protocol]){for(var y=(i.pathname||"").split("/");y.length&&!(i.host=y.shift()););i.host||(i.host=""),i.hostname||(i.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),e.pathname=y.join("/")}else e.pathname=i.pathname;if(e.search=i.search,e.query=i.query,e.host=i.host||"",e.auth=i.auth,e.hostname=i.hostname||i.host,e.port=i.port,e.pathname||e.search){var d=e.pathname||"",p=e.search||"";e.path=d+p}return e.slashes=e.slashes||i.slashes,e.href=e.format(),e}var m=e.pathname&&e.pathname.charAt(0)==="/",g=i.host||i.pathname&&i.pathname.charAt(0)==="/",_=g||m||e.host&&i.pathname,x=_,b=e.pathname&&e.pathname.split("/")||[],y=i.pathname&&i.pathname.split("/")||[],w=e.protocol&&!Tn[e.protocol];if(w&&(e.hostname="",e.port=null,e.host&&(b[0]===""?b[0]=e.host:b.unshift(e.host)),e.host="",i.protocol&&(i.hostname=null,i.port=null,i.host&&(y[0]===""?y[0]=i.host:y.unshift(i.host)),i.host=null),_=_&&(y[0]===""||b[0]==="")),g)e.host=i.host||i.host===""?i.host:e.host,e.hostname=i.hostname||i.hostname===""?i.hostname:e.hostname,e.search=i.search,e.query=i.query,b=y;else if(y.length)b||(b=[]),b.pop(),b=b.concat(y),e.search=i.search,e.query=i.query;else if(!Fi.isNullOrUndefined(i.search)){if(w){e.hostname=e.host=b.shift();var T=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;T&&(e.auth=T.shift(),e.host=e.hostname=T.shift())}return e.search=i.search,e.query=i.query,(!Fi.isNull(e.pathname)||!Fi.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!b.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var D=b.slice(-1)[0],I=(e.host||i.host||b.length>1)&&(D==="."||D==="..")||D==="",P=0,S=b.length;S>=0;S--)D=b[S],D==="."?b.splice(S,1):D===".."?(b.splice(S,1),P++):P&&(b.splice(S,1),P--);if(!_&&!x)for(;P--;P)b.unshift("..");_&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),I&&b.join("/").substr(-1)!=="/"&&b.push("");var M=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(w){e.hostname=e.host=M?"":b.length?b.shift():"";var T=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;T&&(e.auth=T.shift(),e.host=e.hostname=T.shift())}return _=_||e.host&&b.length,_&&!M&&b.unshift(""),b.length?e.pathname=b.join("/"):(e.pathname=null,e.path=null),(!Fi.isNull(e.pathname)||!Fi.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=i.auth||e.auth,e.slashes=e.slashes||i.slashes,e.href=e.format(),e};Ai.prototype.parseHost=function(){var i=this.host,t=MT.exec(i);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),i=i.substr(0,i.length-t.length)),i&&(this.hostname=i)};const H_={parse:CT,format:PT,resolve:ST};function pi(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function co(i){return i.split("?")[0].split("#")[0]}function UT(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $T(i,t,e){return i.replace(new RegExp(UT(t),"g"),e)}function GT(i,t){let e="",s=0,r=-1,n=0,o=-1;for(let a=0;a<=i.length;++a){if(a<i.length)o=i.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||n===1))if(r!==a-1&&n===2){if(e.length<2||s!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",s=0):(e=e.slice(0,l),s=e.length-1-e.lastIndexOf("/")),r=a,n=0;continue}}else if(e.length===2||e.length===1){e="",s=0,r=a,n=0;continue}}t&&(e.length>0?e+="/..":e="..",s=2)}else e.length>0?e+=`/${i.slice(r+1,a)}`:e=i.slice(r+1,a),s=a-r-1;r=a,n=0}else o===46&&n!==-1?++n:n=-1}return e}const le={toPosix(i){return $T(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},hasProtocol(i){return/^[^/:]+:\//.test(this.toPosix(i))},getProtocol(i){pi(i),i=this.toPosix(i);let t="";const e=/^file:\/\/\//.exec(i),s=/^[^/:]+:\/\//.exec(i),r=/^[^/:]+:\//.exec(i);if(e||s||r){const n=(e==null?void 0:e[0])||(s==null?void 0:s[0])||(r==null?void 0:r[0]);t=n,i=i.slice(n.length)}return t},toAbsolute(i,t,e){if(this.isDataUrl(i))return i;const s=co(this.toPosix(t??Z.ADAPTER.getBaseUrl())),r=co(this.toPosix(e??this.rootname(s)));return pi(i),i=this.toPosix(i),i.startsWith("/")?le.join(r,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(i=this.toPosix(i),pi(i),i.length===0)return".";let t="";const e=i.startsWith("/");this.hasProtocol(i)&&(t=this.rootname(i),i=i.slice(t.length));const s=i.endsWith("/");return i=GT(i,!1),i.length>0&&s&&(i+="/"),e?`/${i}`:t+i},isAbsolute(i){return pi(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let t;for(let e=0;e<i.length;++e){const s=i[e];if(pi(s),s.length>0)if(t===void 0)t=s;else{const r=i[e-1]??"";this.extname(r)?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(i){if(pi(i),i.length===0)return".";i=this.toPosix(i);let t=i.charCodeAt(0);const e=t===47;let s=-1,r=!0;const n=this.getProtocol(i),o=i;i=i.slice(n.length);for(let a=i.length-1;a>=1;--a)if(t=i.charCodeAt(a),t===47){if(!r){s=a;break}}else r=!1;return s===-1?e?"/":this.isUrl(o)?n+i:n:e&&s===1?"//":n+i.slice(0,s)},rootname(i){pi(i),i=this.toPosix(i);let t="";if(i.startsWith("/")?t="/":t=this.getProtocol(i),this.isUrl(i)){const e=i.indexOf("/",t.length);e!==-1?t=i.slice(0,e):t=i,t.endsWith("/")||(t+="/")}return t},basename(i,t){pi(i),t&&pi(t),i=co(this.toPosix(i));let e=0,s=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=i.length){if(t.length===i.length&&t===i)return"";let o=t.length-1,a=-1;for(n=i.length-1;n>=0;--n){const l=i.charCodeAt(n);if(l===47){if(!r){e=n+1;break}}else a===-1&&(r=!1,a=n+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(s=n):(o=-1,s=a))}return e===s?s=a:s===-1&&(s=i.length),i.slice(e,s)}for(n=i.length-1;n>=0;--n)if(i.charCodeAt(n)===47){if(!r){e=n+1;break}}else s===-1&&(r=!1,s=n+1);return s===-1?"":i.slice(e,s)},extname(i){pi(i),i=co(this.toPosix(i));let t=-1,e=0,s=-1,r=!0,n=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===47){if(!r){e=o+1;break}continue}s===-1&&(r=!1,s=o+1),a===46?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||s===-1||n===0||n===1&&t===s-1&&t===e+1?"":i.slice(t,s)},parse(i){pi(i);const t={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return t;i=co(this.toPosix(i));let e=i.charCodeAt(0);const s=this.isAbsolute(i);let r;t.root=this.rootname(i),s||this.hasProtocol(i)?r=1:r=0;let n=-1,o=0,a=-1,l=!0,h=i.length-1,c=0;for(;h>=r;--h){if(e=i.charCodeAt(h),e===47){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),e===46?n===-1?n=h:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||a===-1||c===0||c===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&s?t.base=t.name=i.slice(1,a):t.base=t.name=i.slice(o,a)):(o===0&&s?(t.name=i.slice(1,n),t.base=i.slice(1,a)):(t.name=i.slice(o,n),t.base=i.slice(o,a)),t.ext=i.slice(n,a)),t.dir=this.dirname(i),t},sep:"/",delimiter:":"},am={};function ut(i,t,e=3){if(am[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`):(s=s.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${i}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`),console.warn(s))),am[t]=!0}function HT(){ut("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function zT(){ut("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let gc;function z_(){return typeof gc>"u"&&(gc=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:Z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Z.ADAPTER.getWebGLRenderingContext())return!1;const s=Z.ADAPTER.createCanvas();let r=s.getContext("webgl",t)||s.getContext("experimental-webgl",t);const n=!!((e=r==null?void 0:r.getContextAttributes())!=null&&e.stencil);if(r){const o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,n}catch{return!1}}()),gc}var VT={grad:.9,turn:360,rad:360/(2*Math.PI)},rs=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},Zt=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*i)/e+0},ei=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),i>e?e:i>t?i:t},V_=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},lm=function(i){return{r:ei(i.r,0,255),g:ei(i.g,0,255),b:ei(i.b,0,255),a:ei(i.a)}},_c=function(i){return{r:Zt(i.r),g:Zt(i.g),b:Zt(i.b),a:Zt(i.a,3)}},jT=/^#([0-9a-f]{3,8})$/i,Ja=function(i){var t=i.toString(16);return t.length<2?"0"+t:t},j_=function(i){var t=i.r,e=i.g,s=i.b,r=i.a,n=Math.max(t,e,s),o=n-Math.min(t,e,s),a=o?n===t?(e-s)/o:n===e?2+(s-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:r}},W_=function(i){var t=i.h,e=i.s,s=i.v,r=i.a;t=t/360*6,e/=100,s/=100;var n=Math.floor(t),o=s*(1-e),a=s*(1-(t-n)*e),l=s*(1-(1-t+n)*e),h=n%6;return{r:255*[s,a,o,o,l,s][h],g:255*[l,s,s,a,o,o][h],b:255*[o,o,l,s,s,a][h],a:r}},hm=function(i){return{h:V_(i.h),s:ei(i.s,0,100),l:ei(i.l,0,100),a:ei(i.a)}},cm=function(i){return{h:Zt(i.h),s:Zt(i.s),l:Zt(i.l),a:Zt(i.a,3)}},um=function(i){return W_((e=(t=i).s,{h:t.h,s:(e*=((s=t.l)<50?s:100-s)/100)>0?2*e/(s+e)*100:0,v:s+e,a:t.a}));var t,e,s},No=function(i){return{h:(t=j_(i)).h,s:(r=(200-(e=t.s))*(s=t.v)/100)>0&&r<200?e*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,e,s,r},WT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,XT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Tu={string:[[function(i){var t=jT.exec(i);return t?(i=t[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Zt(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?Zt(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var t=YT.exec(i)||qT.exec(i);return t?t[2]!==t[4]||t[4]!==t[6]?null:lm({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(i){var t=WT.exec(i)||XT.exec(i);if(!t)return null;var e,s,r=hm({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(VT[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return um(r)},"hsl"]],object:[[function(i){var t=i.r,e=i.g,s=i.b,r=i.a,n=r===void 0?1:r;return rs(t)&&rs(e)&&rs(s)?lm({r:Number(t),g:Number(e),b:Number(s),a:Number(n)}):null},"rgb"],[function(i){var t=i.h,e=i.s,s=i.l,r=i.a,n=r===void 0?1:r;if(!rs(t)||!rs(e)||!rs(s))return null;var o=hm({h:Number(t),s:Number(e),l:Number(s),a:Number(n)});return um(o)},"hsl"],[function(i){var t=i.h,e=i.s,s=i.v,r=i.a,n=r===void 0?1:r;if(!rs(t)||!rs(e)||!rs(s))return null;var o=function(a){return{h:V_(a.h),s:ei(a.s,0,100),v:ei(a.v,0,100),a:ei(a.a)}}({h:Number(t),s:Number(e),v:Number(s),a:Number(n)});return W_(o)},"hsv"]]},dm=function(i,t){for(var e=0;e<t.length;e++){var s=t[e][0](i);if(s)return[s,t[e][1]]}return[null,void 0]},KT=function(i){return typeof i=="string"?dm(i.trim(),Tu.string):typeof i=="object"&&i!==null?dm(i,Tu.object):[null,void 0]},vc=function(i,t){var e=No(i);return{h:e.h,s:ei(e.s+100*t,0,100),l:e.l,a:e.a}},yc=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},fm=function(i,t){var e=No(i);return{h:e.h,s:e.s,l:ei(e.l+100*t,0,100),a:e.a}},Eu=function(){function i(t){this.parsed=KT(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return Zt(yc(this.rgba),2)},i.prototype.isDark=function(){return yc(this.rgba)<.5},i.prototype.isLight=function(){return yc(this.rgba)>=.5},i.prototype.toHex=function(){return t=_c(this.rgba),e=t.r,s=t.g,r=t.b,o=(n=t.a)<1?Ja(Zt(255*n)):"","#"+Ja(e)+Ja(s)+Ja(r)+o;var t,e,s,r,n,o},i.prototype.toRgb=function(){return _c(this.rgba)},i.prototype.toRgbString=function(){return t=_c(this.rgba),e=t.r,s=t.g,r=t.b,(n=t.a)<1?"rgba("+e+", "+s+", "+r+", "+n+")":"rgb("+e+", "+s+", "+r+")";var t,e,s,r,n},i.prototype.toHsl=function(){return cm(No(this.rgba))},i.prototype.toHslString=function(){return t=cm(No(this.rgba)),e=t.h,s=t.s,r=t.l,(n=t.a)<1?"hsla("+e+", "+s+"%, "+r+"%, "+n+")":"hsl("+e+", "+s+"%, "+r+"%)";var t,e,s,r,n},i.prototype.toHsv=function(){return t=j_(this.rgba),{h:Zt(t.h),s:Zt(t.s),v:Zt(t.v),a:Zt(t.a,3)};var t},i.prototype.invert=function(){return Oi({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},i.prototype.saturate=function(t){return t===void 0&&(t=.1),Oi(vc(this.rgba,t))},i.prototype.desaturate=function(t){return t===void 0&&(t=.1),Oi(vc(this.rgba,-t))},i.prototype.grayscale=function(){return Oi(vc(this.rgba,-1))},i.prototype.lighten=function(t){return t===void 0&&(t=.1),Oi(fm(this.rgba,t))},i.prototype.darken=function(t){return t===void 0&&(t=.1),Oi(fm(this.rgba,-t))},i.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},i.prototype.alpha=function(t){return typeof t=="number"?Oi({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Zt(this.rgba.a,3);var e},i.prototype.hue=function(t){var e=No(this.rgba);return typeof t=="number"?Oi({h:t,s:e.s,l:e.l,a:e.a}):Zt(e.h)},i.prototype.isEqual=function(t){return this.toHex()===Oi(t).toHex()},i}(),Oi=function(i){return i instanceof Eu?i:new Eu(i)},pm=[],ZT=function(i){i.forEach(function(t){pm.indexOf(t)<0&&(t(Eu,Tu),pm.push(t))})};function QT(i,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in e)s[e[r]]=r;var n={};i.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,h=s[this.toHex()];if(h)return h;if(o!=null&&o.closest){var c=this.toRgb(),u=1/0,d="black";if(!n.length)for(var p in e)n[p]=new i(e[p]).toRgb();for(var m in e){var g=(a=c,l=n[m],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<u&&(u=g,d=m)}return d}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":e[a];return l?new i(l).toRgb():null},"name"])}ZT([QT]);const En=class{constructor(i=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=i}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(i){return this.value=i,this}set value(i){if(i instanceof En)this._value=this.cloneSource(i._value),this._int=i._int,this._components.set(i._components);else{if(i===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,i))&&(this.normalize(i),this._value=this.cloneSource(i))}}get value(){return this._value}cloneSource(i){return typeof i=="string"||typeof i=="number"||i instanceof Number||i===null?i:Array.isArray(i)||ArrayBuffer.isView(i)?i.slice(0):typeof i=="object"&&i!==null?{...i}:i}isSourceEqual(i,t){const e=typeof i;if(e!==typeof t)return!1;if(e==="number"||e==="string"||i instanceof Number)return i===t;if(Array.isArray(i)&&Array.isArray(t)||ArrayBuffer.isView(i)&&ArrayBuffer.isView(t))return i.length!==t.length?!1:i.every((r,n)=>r===t[n]);if(i!==null&&t!==null){const r=Object.keys(i),n=Object.keys(t);return r.length!==n.length?!1:r.every(o=>i[o]===t[o])}return i===t}toRgba(){const[i,t,e,s]=this._components;return{r:i,g:t,b:e,a:s}}toRgb(){const[i,t,e]=this._components;return{r:i,g:t,b:e}}toRgbaString(){const[i,t,e]=this.toUint8RgbArray();return`rgba(${i},${t},${e},${this.alpha})`}toUint8RgbArray(i){const[t,e,s]=this._components;return i=i??[],i[0]=Math.round(t*255),i[1]=Math.round(e*255),i[2]=Math.round(s*255),i}toRgbArray(i){i=i??[];const[t,e,s]=this._components;return i[0]=t,i[1]=e,i[2]=s,i}toNumber(){return this._int}toLittleEndianNumber(){const i=this._int;return(i>>16)+(i&65280)+((i&255)<<16)}multiply(i){const[t,e,s,r]=En.temp.setValue(i)._components;return this._components[0]*=t,this._components[1]*=e,this._components[2]*=s,this._components[3]*=r,this.refreshInt(),this._value=null,this}premultiply(i,t=!0){return t&&(this._components[0]*=i,this._components[1]*=i,this._components[2]*=i),this._components[3]=i,this.refreshInt(),this._value=null,this}toPremultiplied(i,t=!0){if(i===1)return(255<<24)+this._int;if(i===0)return t?0:this._int;let e=this._int>>16&255,s=this._int>>8&255,r=this._int&255;return t&&(e=e*i+.5|0,s=s*i+.5|0,r=r*i+.5|0),(i*255<<24)+(e<<16)+(s<<8)+r}toHex(){const i=this._int.toString(16);return`#${"000000".substring(0,6-i.length)+i}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(i){return this._components[3]=this._clamp(i),this}round(i){const[t,e,s]=this._components;return this._components[0]=Math.round(t*i)/i,this._components[1]=Math.round(e*i)/i,this._components[2]=Math.round(s*i)/i,this.refreshInt(),this._value=null,this}toArray(i){i=i??[];const[t,e,s,r]=this._components;return i[0]=t,i[1]=e,i[2]=s,i[3]=r,i}normalize(i){let t,e,s,r;if((typeof i=="number"||i instanceof Number)&&i>=0&&i<=16777215){const n=i;t=(n>>16&255)/255,e=(n>>8&255)/255,s=(n&255)/255,r=1}else if((Array.isArray(i)||i instanceof Float32Array)&&i.length>=3&&i.length<=4)i=this._clamp(i),[t,e,s,r=1]=i;else if((i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&i.length>=3&&i.length<=4)i=this._clamp(i,0,255),[t,e,s,r=255]=i,t/=255,e/=255,s/=255,r/=255;else if(typeof i=="string"||typeof i=="object"){if(typeof i=="string"){const o=En.HEX_PATTERN.exec(i);o&&(i=`#${o[2]}`)}const n=Oi(i);n.isValid()&&({r:t,g:e,b:s,a:r}=n.rgba,t/=255,e/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=e,this._components[2]=s,this._components[3]=r,this.refreshInt();else throw new Error(`Unable to convert color ${i}`)}refreshInt(){this._clamp(this._components);const[i,t,e]=this._components;this._int=(i*255<<16)+(t*255<<8)+(e*255|0)}_clamp(i,t=0,e=1){return typeof i=="number"?Math.min(Math.max(i,t),e):(i.forEach((s,r)=>{i[r]=Math.min(Math.max(s,t),e)}),i)}};let vt=En;vt.shared=new En;vt.temp=new En;vt.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function ba(i,t=[]){return ut("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),vt.shared.setValue(i).toRgbArray(t)}function X_(i){return ut("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),vt.shared.setValue(i).toHex()}function JT(i){return ut("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),vt.shared.setValue(i).toNumber()}function wa(i){return ut("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),vt.shared.setValue(i).toNumber()}function tE(){const i=[],t=[];for(let s=0;s<32;s++)i[s]=s,t[s]=s;i[lt.NORMAL_NPM]=lt.NORMAL,i[lt.ADD_NPM]=lt.ADD,i[lt.SCREEN_NPM]=lt.SCREEN,t[lt.NORMAL]=lt.NORMAL_NPM,t[lt.ADD]=lt.ADD_NPM,t[lt.SCREEN]=lt.SCREEN_NPM;const e=[];return e.push(t),e.push(i),e}const Bd=tE();function Ld(i,t){return Bd[t?1:0][i]}function eE(i,t,e,s=!0){return ut("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),vt.shared.setValue(i).premultiply(t,s).toArray(e??new Float32Array(4))}function iE(i,t){return ut("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),vt.shared.setValue(i).toPremultiplied(t)}function sE(i,t,e,s=!0){return ut("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),vt.shared.setValue(i).premultiply(t,s).toArray(e??new Float32Array(4))}const Y_=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function q_(i,t=null){const e=i*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let s=0,r=0;s<e;s+=6,r+=4)t[s+0]=r+0,t[s+1]=r+1,t[s+2]=r+2,t[s+3]=r+0,t[s+4]=r+2,t[s+5]=r+3;return t}function Lh(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}const rE={Float32Array,Uint32Array,Int32Array,Uint8Array};function nE(i,t){let e=0,s=0;const r={};for(let l=0;l<i.length;l++)s+=t[l],e+=i[l].length;const n=new ArrayBuffer(e*4);let o=null,a=0;for(let l=0;l<i.length;l++){const h=t[l],c=i[l],u=Lh(c);r[u]||(r[u]=new rE[u](n)),o=r[u];for(let d=0;d<c.length;d++){const p=(d/h|0)*s+a,m=d%h;o[p+m]=c[d]}a+=h}return new Float32Array(n)}function Ko(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Au(i){return!(i&i-1)&&!!i}function Cu(i){let t=(i>65535?1:0)<<4;i>>>=t;let e=(i>255?1:0)<<3;return i>>>=e,t|=e,e=(i>15?1:0)<<2,i>>>=e,t|=e,e=(i>3?1:0)<<1,i>>>=e,t|=e,t|i>>1}function Ar(i,t,e){const s=i.length;let r;if(t>=s||e===0)return;e=t+e>s?s-t:e;const n=s-e;for(r=t;r<n;++r)i[r]=i[r+e];i.length=n}function cs(i){return i===0?0:i<0?-1:1}let oE=0;function $s(){return++oE}const K_=class{constructor(i,t,e,s){this.left=i,this.top=t,this.right=e,this.bottom=s}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Yl=K_;Yl.EMPTY=new K_(0,0,0,0);const Su={},me=Object.create(null),Re=Object.create(null);function aE(){let i;for(i in me)me[i].destroy();for(i in Re)Re[i].destroy()}function lE(){let i;for(i in me)delete me[i];for(i in Re)delete Re[i]}class Z_{constructor(t,e,s){this._canvas=Z.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=s||Z.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function mm(i,t,e){for(let s=0,r=4*e*t;s<t;++s,r+=4)if(i[r+3]!==0)return!1;return!0}function gm(i,t,e,s,r){const n=4*t;for(let o=s,a=s*n+4*e;o<=r;++o,a+=n)if(i[a+3]!==0)return!1;return!0}function Q_(i){const{width:t,height:e}=i,s=i.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");const n=s.getImageData(0,0,t,e).data;let o=0,a=0,l=t-1,h=e-1;for(;a<e&&mm(n,t,a);)++a;if(a===e)return Yl.EMPTY;for(;mm(n,t,h);)--h;for(;gm(n,t,o,a,h);)++o;for(;gm(n,t,l,a,h);)--l;return++l,++h,new Yl(o,a,l,h)}function J_(i){const t=Q_(i),{width:e,height:s}=t;let r=null;if(!t.isEmpty()){const n=i.getContext("2d");if(n===null)throw new TypeError("Failed to get canvas 2D context");r=n.getImageData(t.left,t.top,e,s)}return{width:e,height:s,data:r}}function hE(i){const t=Y_.exec(i);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}let tl;function t0(i,t=globalThis.location){if(i.startsWith("data:"))return"";t=t||globalThis.location,tl||(tl=document.createElement("a")),tl.href=i;const e=H_.parse(tl.href),s=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!s||e.protocol!==t.protocol?"anonymous":""}function fs(i,t=1){var s;const e=(s=Z.RETINA_PREFIX)==null?void 0:s.exec(i);return e?parseFloat(e[1]):t}const cE=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Re,BoundingBox:Yl,CanvasRenderTarget:Z_,DATA_URI:Y_,EventEmitter:Qn,ProgramCache:Su,TextureCache:me,clearTextureCache:lE,correctBlendMode:Ld,createIndicesForQuads:q_,decomposeDataUri:hE,deprecation:ut,destroyTextureCache:aE,determineCrossOrigin:t0,earcut:G_,getBufferType:Lh,getCanvasBoundingBox:Q_,getResolutionOfUrl:fs,hex2rgb:ba,hex2string:X_,interleaveTypedArrays:nE,isMobile:Ti,isPow2:Au,isWebGLSupported:z_,log2:Cu,nextPow2:Ko,path:le,premultiplyBlendMode:Bd,premultiplyRgba:eE,premultiplyTint:iE,premultiplyTintToRgba:sE,removeItems:Ar,rgb2hex:wa,sayHello:zT,sign:cs,skipHello:HT,string2hex:JT,trimCanvas:J_,uid:$s,url:H_},Symbol.toStringTag,{value:"Module"}));var Q=(i=>(i.Renderer="renderer",i.Application="application",i.RendererSystem="renderer-webgl-system",i.RendererPlugin="renderer-webgl-plugin",i.CanvasRendererSystem="renderer-canvas-system",i.CanvasRendererPlugin="renderer-canvas-plugin",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i))(Q||{});const Pu=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},_m=(i,t)=>Pu(i).priority??t,nt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(Pu).forEach(t=>{t.type.forEach(e=>{var s,r;return(r=(s=this._removeHandlers)[e])==null?void 0:r.call(s,t)})}),this},add(...i){return i.map(Pu).forEach(t=>{t.type.forEach(e=>{const s=this._addHandlers,r=this._queue;s[e]?s[e](t):(r[e]=r[e]||[],r[e].push(t))})}),this},handle(i,t,e){const s=this._addHandlers,r=this._removeHandlers;if(s[i]||r[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=t,r[i]=e;const n=this._queue;return n[i]&&(n[i].forEach(o=>t(o)),delete n[i]),this},handleByMap(i,t){return this.handle(i,e=>{t[e.name]=e.ref},e=>{delete t[e.name]})},handleByList(i,t,e=-1){return this.handle(i,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((r,n)=>_m(n,e)-_m(r,e)))},s=>{const r=t.indexOf(s.ref);r!==-1&&t.splice(r,1)})}};class ql{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const uE=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function dE(i){let t="";for(let e=0;e<i;++e)e>0&&(t+=`
else `),e<i-1&&(t+=`if(test == ${e}.0){}`);return t}function e0(i,t){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const s=uE.replace(/%forloop%/gi,dE(i));if(t.shaderSource(e,s),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))i=i/2|0;else break}return i}const xc=0,bc=1,wc=2,Tc=3,Ec=4,Ac=5;class Zi{constructor(){this.data=0,this.blendMode=lt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<xc)}set blend(t){!!(this.data&1<<xc)!==t&&(this.data^=1<<xc)}get offsets(){return!!(this.data&1<<bc)}set offsets(t){!!(this.data&1<<bc)!==t&&(this.data^=1<<bc)}get culling(){return!!(this.data&1<<wc)}set culling(t){!!(this.data&1<<wc)!==t&&(this.data^=1<<wc)}get depthTest(){return!!(this.data&1<<Tc)}set depthTest(t){!!(this.data&1<<Tc)!==t&&(this.data^=1<<Tc)}get depthMask(){return!!(this.data&1<<Ac)}set depthMask(t){!!(this.data&1<<Ac)!==t&&(this.data^=1<<Ac)}get clockwiseFrontFace(){return!!(this.data&1<<Ec)}set clockwiseFrontFace(t){!!(this.data&1<<Ec)!==t&&(this.data^=1<<Ec)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==lt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Zi;return t.depthTest=!1,t.blend=!0,t}}const Kl=[];function Nd(i,t){if(!i)return null;let e="";if(typeof i=="string"){const s=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);s&&(e=s[1].toLowerCase())}for(let s=Kl.length-1;s>=0;--s){const r=Kl[s];if(r.test&&r.test(i,e))return new r(i,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Be{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,s,r,n,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:c}=this;this._aliasCount++;for(let u=0,d=c.length;u<d;u++)c[u][h](t,e,s,r,n,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Be.prototype,{dispatch:{value:Be.prototype.emit},run:{value:Be.prototype.emit}});class Ln{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Be("setRealSize"),this.onUpdate=new Be("update"),this.onError=new Be("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,s){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Jn extends Ln{constructor(t,e){const{width:s,height:r}=e||{};if(!s||!r)throw new Error("BufferResource width or height invalid");super(s,r),this.data=t}upload(t,e,s){const r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===hi.UNPACK);const n=e.realWidth,o=e.realHeight;return s.width===n&&s.height===o?r.texSubImage2D(e.target,0,0,0,n,o,e.format,s.type,this.data):(s.width=n,s.height=o,r.texImage2D(e.target,0,s.internalFormat,n,o,0,e.format,s.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const fE={scaleMode:wi.NEAREST,format:Y.RGBA,alphaMode:hi.NPM},cn=class extends Qn{constructor(i=null,t=null){super(),t=Object.assign({},cn.defaultOptions,t);const{alphaMode:e,mipmap:s,anisotropicLevel:r,scaleMode:n,width:o,height:a,wrapMode:l,format:h,type:c,target:u,resolution:d,resourceOptions:p}=t;i&&!(i instanceof Ln)&&(i=Nd(i,p),i.internal=!0),this.resolution=d||Z.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=r,this._wrapMode=l,this._scaleMode=n,this.format=h,this.type=c,this.target=u,this.alphaMode=e,this.uid=$s(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(i)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(i){this._mipmap!==i&&(this._mipmap=i,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(i){this._scaleMode!==i&&(this._scaleMode=i,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(i){this._wrapMode!==i&&(this._wrapMode=i,this.dirtyStyleId++)}setStyle(i,t){let e;return i!==void 0&&i!==this.scaleMode&&(this.scaleMode=i,e=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,e=!0),e&&this.dirtyStyleId++,this}setSize(i,t,e){return e=e||this.resolution,this.setRealSize(i*e,t*e,e)}setRealSize(i,t,e){return this.resolution=e||this.resolution,this.width=Math.round(i)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Au(this.realWidth)&&Au(this.realHeight)}setResolution(i){const t=this.resolution;return t===i?this:(this.resolution=i,this.valid&&(this.width=Math.round(this.width*t)/i,this.height=Math.round(this.height*t)/i,this.emit("update",this)),this._refreshPOT(),this)}setResource(i){if(this.resource===i)return this;if(this.resource)throw new Error("Resource can be set only once");return i.bind(this),this.resource=i,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(i){this.emit("error",this,i)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Re[this.cacheId],delete me[this.cacheId],this.cacheId=null),this.dispose(),cn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(i,t,e=Z.STRICT_TEXTURE_CACHE){const s=typeof i=="string";let r=null;if(s)r=i;else{if(!i._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";i._pixiId=`${o}_${$s()}`}r=i._pixiId}let n=Re[r];if(s&&e&&!n)throw new Error(`The cacheId "${r}" does not exist in BaseTextureCache.`);return n||(n=new cn(i,t),n.cacheId=r,cn.addToCache(n,r)),n}static fromBuffer(i,t,e,s){i=i||new Float32Array(t*e*4);const r=new Jn(i,{width:t,height:e}),n=i instanceof Float32Array?ot.FLOAT:ot.UNSIGNED_BYTE;return new cn(r,Object.assign({},fE,{type:n},s))}static addToCache(i,t){t&&(i.textureCacheIds.includes(t)||i.textureCacheIds.push(t),Re[t]&&Re[t]!==i&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Re[t]=i)}static removeFromCache(i){if(typeof i=="string"){const t=Re[i];if(t){const e=t.textureCacheIds.indexOf(i);return e>-1&&t.textureCacheIds.splice(e,1),delete Re[i],t}}else if(i!=null&&i.textureCacheIds){for(let t=0;t<i.textureCacheIds.length;++t)delete Re[i.textureCacheIds[t]];return i.textureCacheIds.length=0,i}return null}};let dt=cn;dt.defaultOptions={mipmap:Mi.POW2,anisotropicLevel:0,scaleMode:wi.LINEAR,wrapMode:Hi.CLAMP,alphaMode:hi.UNPACK,target:Er.TEXTURE_2D,format:Y.RGBA,type:ot.UNSIGNED_BYTE};dt._globalBatch=0;class Zl{constructor(){this.texArray=null,this.blend=0,this.type=bi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let pE=0;class Nt{constructor(t,e=!0,s=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=s,this.static=e,this.id=pE++,this.disposeRunner=new Be("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Ei.ELEMENT_ARRAY_BUFFER:Ei.ARRAY_BUFFER}get index(){return this.type===Ei.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Nt(t)}}class Zo{constructor(t,e=0,s=!1,r=ot.FLOAT,n,o,a,l=1){this.buffer=t,this.size=e,this.normalized=s,this.type=r,this.stride=n,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,s,r,n){return new Zo(t,e,s,r,n)}}const mE={Float32Array,Uint32Array,Int32Array,Uint8Array};function gE(i,t){let e=0,s=0;const r={};for(let l=0;l<i.length;l++)s+=t[l],e+=i[l].length;const n=new ArrayBuffer(e*4);let o=null,a=0;for(let l=0;l<i.length;l++){const h=t[l],c=i[l],u=Lh(c);r[u]||(r[u]=new mE[u](n)),o=r[u];for(let d=0;d<c.length;d++){const p=(d/h|0)*s+a,m=d%h;o[p+m]=c[d]}a+=h}return new Float32Array(n)}const vm={5126:4,5123:2,5121:1};let _E=0;const vE={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ps{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=_E++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Be("disposeGeometry"),this.refCount=0}addAttribute(t,e,s=0,r=!1,n,o,a,l=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Nt||(e instanceof Array&&(e=new Float32Array(e)),e=new Nt(e));const h=t.split("|");if(h.length>1){for(let u=0;u<h.length;u++)this.addAttribute(h[u],e,s,r,n);return this}let c=this.buffers.indexOf(e);return c===-1&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new Zo(c,s,r,n,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Nt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Nt(t)),t.type=Ei.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],s=new Nt;let r;for(r in this.attributes){const n=this.attributes[r],o=this.buffers[n.buffer];t.push(o.data),e.push(n.size*vm[n.type]/4),n.buffer=0}for(s.data=gE(t,e),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new ps;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new Nt(this.buffers[e].data.slice(0));for(const e in this.attributes){const s=this.attributes[e];t.attributes[e]=new Zo(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Ei.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new ps,s=[],r=[],n=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)r[l]=r[l]||0,r[l]+=o.buffers[l].data.length,n[l]=0}for(let a=0;a<o.buffers.length;a++)s[a]=new vE[Lh(o.buffers[a].data)](r[a]),e.buffers[a]=new Nt(s[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)s[l].set(o.buffers[l].data,n[l]),n[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=Ei.ELEMENT_ARRAY_BUFFER;let a=0,l=0,h=0,c=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){c=u;break}for(const u in o.attributes){const d=o.attributes[u];(d.buffer|0)===c&&(l+=d.size*vm[d.type]/4)}for(let u=0;u<t.length;u++){const d=t[u].indexBuffer.data;for(let p=0;p<d.length;p++)e.indexBuffer.data[p+h]+=a;a+=t[u].buffers[c].data.length/l,h+=d.length}}return e}}class Ud extends ps{constructor(t=!1){super(),this._buffer=new Nt(null,t,!1),this._indexBuffer=new Nt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ot.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ot.FLOAT).addAttribute("aColor",this._buffer,4,!0,ot.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ot.FLOAT).addIndex(this._indexBuffer)}}const Qo=Math.PI*2,i0=180/Math.PI,Nn=Math.PI/180;var Jt=(i=>(i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC",i))(Jt||{});let ft=class s0{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new s0(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}};const el=[new ft,new ft,new ft,new ft];class pt{constructor(t=0,e=0,s=0,r=0){this.x=Number(t),this.y=Number(e),this.width=Number(s),this.height=Number(r),this.type=Jt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new pt(0,0,0,0)}clone(){return new pt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const P=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=P)return!1;const M=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>M}const s=this.left,r=this.right,n=this.top,o=this.bottom;if(r<=s||o<=n)return!1;const a=el[0].set(t.left,t.top),l=el[1].set(t.left,t.bottom),h=el[2].set(t.right,t.top),c=el[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(u===0||(e.apply(a,a),e.apply(l,l),e.apply(h,h),e.apply(c,c),Math.max(a.x,l.x,h.x,c.x)<=s||Math.min(a.x,l.x,h.x,c.x)>=r||Math.max(a.y,l.y,h.y,c.y)<=n||Math.min(a.y,l.y,h.y,c.y)>=o))return!1;const d=u*(l.y-a.y),p=u*(a.x-l.x),m=d*s+p*n,g=d*r+p*n,_=d*s+p*o,x=d*r+p*o;if(Math.max(m,g,_,x)<=d*a.x+p*a.y||Math.min(m,g,_,x)>=d*c.x+p*c.y)return!1;const b=u*(a.y-h.y),y=u*(h.x-a.x),w=b*s+y*n,T=b*r+y*n,D=b*s+y*o,I=b*r+y*o;return!(Math.max(w,T,D,I)<=b*a.x+y*a.y||Math.min(w,T,D,I)>=b*c.x+y*c.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(s-e,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(t=1,e=.001){const s=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=s-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=s-e,this.y=r,this.height=n-r,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Nh{constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.radius=s,this.type=Jt.CIRC}clone(){return new Nh(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const s=this.radius*this.radius;let r=this.x-t,n=this.y-e;return r*=r,n*=n,r+n<=s}getBounds(){return new pt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Uh{constructor(t=0,e=0,s=0,r=0){this.x=t,this.y=e,this.width=s,this.height=r,this.type=Jt.ELIP}clone(){return new Uh(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let s=(t-this.x)/this.width,r=(e-this.y)/this.height;return s*=s,r*=r,s+r<=1}getBounds(){return new pt(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Cr{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const s=[];for(let r=0,n=e.length;r<n;r++)s.push(e[r].x,e[r].y);e=s}this.points=e,this.type=Jt.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Cr(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let s=!1;const r=this.points.length/2;for(let n=0,o=r-1;n<r;o=n++){const a=this.points[n*2],l=this.points[n*2+1],h=this.points[o*2],c=this.points[o*2+1];l>e!=c>e&&t<(h-a)*((e-l)/(c-l))+a&&(s=!s)}return s}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}}class $h{constructor(t=0,e=0,s=0,r=0,n=20){this.x=t,this.y=e,this.width=s,this.height=r,this.radius=n,this.type=Jt.RREC}clone(){return new $h(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+s&&e<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let r=t-(this.x+s),n=e-(this.y+s);const o=s*s;if(r*r+n*n<=o||(r=t-(this.x+this.width-s),r*r+n*n<=o)||(n=e-(this.y+this.height-s),r*r+n*n<=o)||(r=t-(this.x+s),r*r+n*n<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Ct{constructor(t=1,e=0,s=0,r=1,n=0,o=0){this.array=null,this.a=t,this.b=e,this.c=s,this.d=r,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,s,r,n,o){return this.a=t,this.b=e,this.c=s,this.d=r,this.tx=n,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const s=e||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,e){e=e||new ft;const s=t.x,r=t.y;return e.x=this.a*s+this.c*r+this.tx,e.y=this.b*s+this.d*r+this.ty,e}applyInverse(t,e){e=e||new ft;const s=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*s*r+-this.c*s*n+(this.ty*this.c-this.tx*this.d)*s,e.y=this.a*s*n+-this.b*s*r+(-this.ty*this.a+this.tx*this.b)*s,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*s,this.b=r*s+this.b*e,this.c=n*e-this.d*s,this.d=n*s+this.d*e,this.tx=o*e-this.ty*s,this.ty=o*s+this.ty*e,this}append(t){const e=this.a,s=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*s+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*s+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*s+t.ty*n+this.ty,this}setTransform(t,e,s,r,n,o,a,l,h){return this.a=Math.cos(a+h)*n,this.b=Math.sin(a+h)*n,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(s*this.a+r*this.c),this.ty=e-(s*this.b+r*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,r=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,s=this.b,r=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-r,n),l=Math.atan2(s,e),h=Math.abs(a+l);return h<1e-5||Math.abs(Qo-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+s*s),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*s+o.y*n),t}invert(){const t=this.a,e=this.b,s=this.c,r=this.d,n=this.tx,o=t*r-e*s;return this.a=r/o,this.b=-e/o,this.c=-s/o,this.d=t/o,this.tx=(s*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Ct;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Ct}static get TEMP_MATRIX(){return new Ct}}const ur=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],dr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],fr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],pr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Iu=[],r0=[],il=Math.sign;function yE(){for(let i=0;i<16;i++){const t=[];Iu.push(t);for(let e=0;e<16;e++){const s=il(ur[i]*ur[e]+fr[i]*dr[e]),r=il(dr[i]*ur[e]+pr[i]*dr[e]),n=il(ur[i]*fr[e]+fr[i]*pr[e]),o=il(dr[i]*fr[e]+pr[i]*pr[e]);for(let a=0;a<16;a++)if(ur[a]===s&&dr[a]===r&&fr[a]===n&&pr[a]===o){t.push(a);break}}}for(let i=0;i<16;i++){const t=new Ct;t.set(ur[i],dr[i],fr[i],pr[i],0,0),r0.push(t)}}yE();const It={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>ur[i],uY:i=>dr[i],vX:i=>fr[i],vY:i=>pr[i],inv:i=>i&8?i&15:-i&7,add:(i,t)=>Iu[i][t],sub:(i,t)=>Iu[i][It.inv(t)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,t)=>Math.abs(i)*2<=Math.abs(t)?t>=0?It.S:It.N:Math.abs(t)*2<=Math.abs(i)?i>0?It.E:It.W:t>0?i>0?It.SE:It.SW:i>0?It.NE:It.NW,matrixAppendRotationInv:(i,t,e=0,s=0)=>{const r=r0[It.inv(t)];r.tx=e,r.ty=s,i.append(r)}};class Ni{constructor(t,e,s=0,r=0){this._x=s,this._y=r,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Ni(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const n0=class{constructor(){this.worldTransform=new Ct,this.localTransform=new Ct,this.position=new Ni(this.onChange,this,0,0),this.scale=new Ni(this.onChange,this,1,1),this.pivot=new Ni(this.onChange,this,0,0),this.skew=new Ni(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(i){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){const e=i.worldTransform,s=this.worldTransform;s.a=t.a*e.a+t.b*e.c,s.b=t.a*e.b+t.b*e.d,s.c=t.c*e.a+t.d*e.c,s.d=t.c*e.b+t.d*e.d,s.tx=t.tx*e.a+t.ty*e.c+e.tx,s.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=i._worldID,this._worldID++}}setFromMatrix(i){i.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())}};let Ta=n0;Ta.IDENTITY=new n0;var xE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,bE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function ym(i,t,e){const s=i.createShader(t);return i.shaderSource(s,e),i.compileShader(s),s}function Cc(i){const t=new Array(i);for(let e=0;e<t.length;e++)t[e]=!1;return t}function o0(i,t){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Cc(2*t);case"bvec3":return Cc(3*t);case"bvec4":return Cc(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Sr=[{test:i=>i.type==="float"&&i.size===1&&!i.isArray,code:i=>`
            if(uv["${i}"] !== ud["${i}"].value)
            {
                ud["${i}"].value = uv["${i}"]
                gl.uniform1f(ud["${i}"].location, uv["${i}"])
            }
            `},{test:(i,t)=>(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray&&(t==null||t.castToBaseTexture!==void 0),code:i=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${i}"], t);

            if(ud["${i}"].value !== t)
            {
                ud["${i}"].value = t;
                gl.uniform1i(ud["${i}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(i,t)=>i.type==="mat3"&&i.size===1&&!i.isArray&&t.a!==void 0,code:i=>`
            gl.uniformMatrix3fv(ud["${i}"].location, false, uv["${i}"].toArray(true));
            `,codeUbo:i=>`
                var ${i}_matrix = uv.${i}.toArray(true);

                data[offset] = ${i}_matrix[0];
                data[offset+1] = ${i}_matrix[1];
                data[offset+2] = ${i}_matrix[2];
        
                data[offset + 4] = ${i}_matrix[3];
                data[offset + 5] = ${i}_matrix[4];
                data[offset + 6] = ${i}_matrix[5];
        
                data[offset + 8] = ${i}_matrix[6];
                data[offset + 9] = ${i}_matrix[7];
                data[offset + 10] = ${i}_matrix[8];
            `},{test:(i,t)=>i.type==="vec2"&&i.size===1&&!i.isArray&&t.x!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${i}"].location, v.x, v.y);
                }`,codeUbo:i=>`
                v = uv.${i};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:i=>i.type==="vec2"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${i}"].location, v[0], v[1]);
                }
            `},{test:(i,t)=>i.type==="vec4"&&i.size===1&&!i.isArray&&t.width!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${i}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(i,t)=>i.type==="vec4"&&i.size===1&&!i.isArray&&t.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${i}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(i,t)=>i.type==="vec3"&&i.size===1&&!i.isArray&&t.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${i}"].location, v.red, v.green, v.blue)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:i=>i.type==="vec4"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${i}"].location, v[0], v[1], v[2], v[3])
                }`}],wE={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},TE={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function EE(i,t){var s;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in i.uniforms){const n=t[r];if(!n){(s=i.uniforms[r])!=null&&s.group&&(i.uniforms[r].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const o=i.uniforms[r];let a=!1;for(let l=0;l<Sr.length;l++)if(Sr[l].test(n,o)){e.push(Sr[l].code(r,o)),a=!0;break}if(!a){const h=(n.size===1&&!n.isArray?wE:TE)[n.type].replace("location",`ud["${r}"].location`);e.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const a0={};let tn=a0;function l0(){if(tn===a0||tn!=null&&tn.isContextLost()){const i=Z.ADAPTER.createCanvas();let t;Z.PREFER_ENV>=js.WEBGL2&&(t=i.getContext("webgl2",{})),t||(t=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),tn=t}return tn}let sl;function AE(){if(!sl){sl=Fe.MEDIUM;const i=l0();i&&i.getShaderPrecisionFormat&&(sl=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?Fe.HIGH:Fe.MEDIUM)}return sl}function xm(i,t){const e=i.getShaderSource(t).split(`
`).map((h,c)=>`${c}: ${h}`),s=i.getShaderInfoLog(t),r=s.split(`
`),n={},o=r.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!n[h]?(n[h]=!0,!0):!1),a=[""];o.forEach(h=>{e[h-1]=`%c${e[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=e.join(`
`);a[0]=l,console.error(s),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function CE(i,t,e,s){i.getProgramParameter(t,i.LINK_STATUS)||(i.getShaderParameter(e,i.COMPILE_STATUS)||xm(i,e),i.getShaderParameter(s,i.COMPILE_STATUS)||xm(i,s),console.error("PixiJS Error: Could not initialize shader."),i.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(t)))}const SE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function h0(i){return SE[i]}let rl=null;const bm={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function c0(i,t){if(!rl){const e=Object.keys(bm);rl={};for(let s=0;s<e.length;++s){const r=e[s];rl[i[r]]=bm[r]}}return rl[t]}function wm(i,t,e){if(i.substring(0,9)!=="precision"){let s=t;return t===Fe.HIGH&&e!==Fe.HIGH&&(s=Fe.MEDIUM),`precision ${s} float;
${i}`}else if(e!==Fe.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}let uo;function u0(){if(typeof uo=="boolean")return uo;try{uo=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{uo=!1}return uo}let PE=0;const nl={},un=class{constructor(i,t,e="pixi-shader",s={}){this.extra={},this.id=PE++,this.vertexSrc=i||un.defaultVertexSrc,this.fragmentSrc=t||un.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(e=e.replace(/\s+/g,"-"),nl[e]?(nl[e]++,e+=`-${nl[e]}`):nl[e]=1,this.vertexSrc=`#define SHADER_NAME ${e}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${e}
${this.fragmentSrc}`,this.vertexSrc=wm(this.vertexSrc,un.defaultVertexPrecision,Fe.HIGH),this.fragmentSrc=wm(this.fragmentSrc,un.defaultFragmentPrecision,AE())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return bE}static get defaultFragmentSrc(){return xE}static from(i,t,e){const s=i+t;let r=Su[s];return r||(Su[s]=r=new un(i,t,e)),r}};let ii=un;ii.defaultVertexPrecision=Fe.HIGH;ii.defaultFragmentPrecision=Ti.apple.device?Fe.HIGH:Fe.MEDIUM;let IE=0;class ai{constructor(t,e,s){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=IE++,this.static=!!e,this.ubo=!!s,t instanceof Nt?(this.buffer=t,this.buffer.type=Ei.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Nt(new Float32Array(1)),this.buffer.type=Ei.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,s){if(!this.ubo)this.uniforms[t]=new ai(e,s);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,s){return new ai(t,e,s)}static uboFrom(t,e){return new ai(t,e??!0,!0)}}class Ci{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof ai?this.uniformGroup=e:this.uniformGroup=new ai(e):this.uniformGroup=new ai({}),this.disposeRunner=new Be("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const s in e.uniforms){const r=e.uniforms[s];if(r.group&&this.checkUniformExists(t,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,s){const r=ii.from(t,e);return new Ci(r,s)}}class d0{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const s=new Int32Array(t);for(let n=0;n<t;n++)s[n]=n;this.defaultGroupCache[t]=ai.from({uSamplers:s},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ii(this.vertexSrc,r)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ct,default:this.defaultGroupCache[t]};return new Ci(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let s=0;s<t;s++)s>0&&(e+=`
else `),s<t-1&&(e+=`if(vTextureId < ${s}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${s}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class Ql{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function ME(){return!Ti.apple.device}function RE(i){let t=!0;const e=Z.ADAPTER.getNavigator();if(Ti.tablet||Ti.phone){if(Ti.apple.device){const s=e.userAgent.match(/OS (\d+)_(\d+)?/);s&&parseInt(s[1],10)<11&&(t=!1)}if(Ti.android.device){const s=e.userAgent.match(/Android\s([0-9.]*)/);s&&parseInt(s[1],10)<7&&(t=!1)}}return t?i:4}class Ea{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var DE=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,OE=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const gi=class extends Ea{constructor(i){super(i),this.setShaderGenerator(),this.geometryClass=Ud,this.vertexSize=6,this.state=Zi.for2d(),this.size=gi.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),i.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??RE(32),this._defaultMaxTextures}static set defaultMaxTextures(i){this._defaultMaxTextures=i}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??ME(),this._canUploadSameBuffer}static set canUploadSameBuffer(i){this._canUploadSameBuffer=i}get MAX_TEXTURES(){return ut("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return OE}static get defaultFragmentTemplate(){return DE}setShaderGenerator({vertex:i=gi.defaultVertexSrc,fragment:t=gi.defaultFragmentTemplate}={}){this.shaderGenerator=new d0(i,t)}contextChange(){const i=this.renderer.gl;Z.PREFER_ENV===js.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),gi.defaultMaxTextures),this.maxTextures=e0(this.maxTextures,i)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:i,_textureArrayPool:t}=gi,e=this.size/4,s=Math.floor(e/this.maxTextures)+1;for(;i.length<e;)i.push(new Zl);for(;t.length<s;)t.push(new Ql);for(let r=0;r<this.maxTextures;r++)this._tempBoundTextures[r]=null}onPrerender(){this._flushId=0}render(i){i._texture.valid&&(this._vertexCount+i.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=i.vertexData.length/2,this._indexCount+=i.indices.length,this._bufferedTextures[this._bufferSize]=i._texture.baseTexture,this._bufferedElements[this._bufferSize++]=i)}buildTexturesAndDrawCalls(){const{_bufferedTextures:i,maxTextures:t}=this,e=gi._textureArrayPool,s=this.renderer.batch,r=this._tempBoundTextures,n=this.renderer.textureGC.count;let o=++dt._globalBatch,a=0,l=e[0],h=0;s.copyBoundTextures(r,t);for(let c=0;c<this._bufferSize;++c){const u=i[c];i[c]=null,u._batchEnabled!==o&&(l.count>=t&&(s.boundArray(l,r,o,t),this.buildDrawCalls(l,h,c),h=c,l=e[++a],++o),u._batchEnabled=o,u.touched=n,l.elements[l.count++]=u)}l.count>0&&(s.boundArray(l,r,o,t),this.buildDrawCalls(l,h,this._bufferSize),++a,++o);for(let c=0;c<r.length;c++)r[c]=null;dt._globalBatch=o}buildDrawCalls(i,t,e){const{_bufferedElements:s,_attributeBuffer:r,_indexBuffer:n,vertexSize:o}=this,a=gi._drawCallPool;let l=this._dcIndex,h=this._aIndex,c=this._iIndex,u=a[l];u.start=this._iIndex,u.texArray=i;for(let d=t;d<e;++d){const p=s[d],m=p._texture.baseTexture,g=Bd[m.alphaMode?1:0][p.blendMode];s[d]=null,t<d&&u.blend!==g&&(u.size=c-u.start,t=d,u=a[++l],u.texArray=i,u.start=c),this.packInterleavedGeometry(p,r,n,h,c),h+=p.vertexData.length/2*o,c+=p.indices.length,u.blend=g}t<e&&(u.size=c-u.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(i){const t=this.renderer.texture;for(let e=0;e<i.count;e++)t.bind(i.elements[e],i.ids[e]),i.elements[e]=null;i.count=0}updateGeometry(){const{_packedGeometries:i,_attributeBuffer:t,_indexBuffer:e}=this;gi.canUploadSameBuffer?(i[this._flushId]._buffer.update(t.rawBinaryData),i[this._flushId]._indexBuffer.update(e),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(t.rawBinaryData),i[this._flushId]._indexBuffer.update(e),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const i=this._dcIndex,{gl:t,state:e}=this.renderer,s=gi._drawCallPool;let r=null;for(let n=0;n<i;n++){const{texArray:o,type:a,size:l,start:h,blend:c}=s[n];r!==o&&(r=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,e.set(this.state),t.drawElements(a,l,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),gi.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]&&this._packedGeometries[i].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(i){const t=Ko(Math.ceil(i/8)),e=Cu(t),s=t*8;this._aBuffers.length<=e&&(this._iBuffers.length=e+1);let r=this._aBuffers[s];return r||(this._aBuffers[s]=r=new ql(s*this.vertexSize*4)),r}getIndexBuffer(i){const t=Ko(Math.ceil(i/12)),e=Cu(t),s=t*12;this._iBuffers.length<=e&&(this._iBuffers.length=e+1);let r=this._iBuffers[e];return r||(this._iBuffers[e]=r=new Uint16Array(s)),r}packInterleavedGeometry(i,t,e,s,r){const{uint32View:n,float32View:o}=t,a=s/this.vertexSize,l=i.uvs,h=i.indices,c=i.vertexData,u=i._texture.baseTexture._batchLocation,d=Math.min(i.worldAlpha,1),p=vt.shared.setValue(i._tintRGB).toPremultiplied(d,i._texture.baseTexture.alphaMode>0);for(let m=0;m<c.length;m+=2)o[s++]=c[m],o[s++]=c[m+1],o[s++]=l[m],o[s++]=l[m+1],n[s++]=p,o[s++]=u;for(let m=0;m<h.length;m++)e[r++]=a+h[m]}};let Qe=gi;Qe.defaultBatchSize=4096;Qe.extension={name:"batch",type:Q.RendererPlugin};Qe._drawCallPool=[];Qe._textureArrayPool=[];nt.add(Qe);var kE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,FE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const bo=class extends Ci{constructor(i,t,e){const s=ii.from(i||bo.defaultVertexSrc,t||bo.defaultFragmentSrc);super(s,e),this.padding=0,this.resolution=bo.defaultResolution,this.multisample=bo.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Zi}apply(i,t,e,s,r){i.applyFilter(this,t,e,s)}get blendMode(){return this.state.blendMode}set blendMode(i){this.state.blendMode=i}get resolution(){return this._resolution}set resolution(i){this._resolution=i}static get defaultVertexSrc(){return FE}static get defaultFragmentSrc(){return kE}};let mt=bo;mt.defaultResolution=1;mt.defaultMultisample=Vt.NONE;class Aa{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new vt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:s,backgroundAlpha:r}=t,n=s??e;n!==void 0&&(this.color=n),this.alpha=r}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Aa.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Aa.extension={type:[Q.RendererSystem,Q.CanvasRendererSystem],name:"background"};nt.add(Aa);class $d{constructor(t){this.renderer=t,this.emptyRenderer=new Ea(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:s}=this.renderer.texture;for(let r=e-1;r>=0;--r)t[r]=s[r]||null,t[r]&&(t[r]._batchLocation=r)}boundArray(t,e,s,r){const{elements:n,ids:o,count:a}=t;let l=0;for(let h=0;h<a;h++){const c=n[h],u=c._batchLocation;if(u>=0&&u<r&&e[u]===c){o[h]=u;continue}for(;l<r;){const d=e[l];if(d&&d._batchEnabled===s&&d._batchLocation===l){l++;continue}o[h]=l,c._batchLocation=l,e[l]=c;break}}}destroy(){this.renderer=null}}$d.extension={type:Q.RendererSystem,name:"batch"};nt.add($d);let Tm=0;class Ca{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Tm++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,s=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:s,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Tm++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let s;if(Z.PREFER_ENV>=js.WEBGL2&&(s=t.getContext("webgl2",e)),s)this.webGLVersion=2;else if(this.webGLVersion=1,s=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!s)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=s,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),s="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;s&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=s||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Ca.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};Ca.extension={type:Q.RendererSystem,name:"context"};nt.add(Ca);class BE extends Jn{upload(t,e,s){const r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===hi.UNPACK);const n=e.realWidth,o=e.realHeight;return s.width===n&&s.height===o?r.texSubImage2D(e.target,0,0,0,n,o,e.format,s.type,this.data):(s.width=n,s.height=o,r.texImage2D(e.target,0,s.internalFormat,n,o,0,e.format,s.type,this.data)),!0}}class Jl{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Be("disposeFramebuffer"),this.multisample=Vt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new dt(null,{scaleMode:wi.NEAREST,resolution:1,mipmap:Mi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new dt(new BE(null,{width:this.width,height:this.height}),{scaleMode:wi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Mi.OFF,format:Y.DEPTH_COMPONENT,type:ot.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let s=0;s<this.colorTextures.length;s++){const r=this.colorTextures[s],n=r.resolution;r.setSize(t/n,e/n)}if(this.depthTexture){const s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Gd extends dt{constructor(t={}){if(typeof t=="number"){const e=arguments[0],s=arguments[1],r=arguments[2],n=arguments[3];t={width:e,height:s,scaleMode:r,resolution:n}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Vt.NONE),super(null,t),this.mipmap=Mi.OFF,this.valid=!0,this._clear=new vt([0,0,0,0]),this.framebuffer=new Jl(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class ms extends Ln{constructor(t){const e=t,s=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;super(s,r),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,s){s===void 0&&!e.startsWith("data:")?t.crossOrigin=t0(e):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}upload(t,e,s,r){const n=t.gl,o=e.realWidth,a=e.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||r.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1&&r.buffered.length===0)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===hi.UNPACK),!this.noSubImage&&e.target===n.TEXTURE_2D&&s.width===o&&s.height===a?n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,s.type,r):(s.width=o,s.height=a,n.texImage2D(e.target,0,s.internalFormat,e.format,s.type,r)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,s=t.naturalHeight||t.videoHeight||t.height;this.resize(e,s),super.update()}dispose(){this.source=null}}class Hd extends ms{constructor(t,e){if(e=e||{},typeof t=="string"){const s=new Image;ms.crossOrigin(s,t,e.crossorigin),s.src=t,t=s}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??Z.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,s)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?e(this.process()):e(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=o=>{s(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,s=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:s?"cors":"no-cors"}).then(r=>r.blob()).then(r=>e(r,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===hi.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,s){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,s,this.bitmap),!this.preserveBitmap){let r=!0;const n=e._glTextures;for(const o in n){const a=n[o];if(a!==s&&a.dirtyId!==e.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class zd{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,s){const r=e.width,n=e.height;if(s){const o=t.width/2/r,a=t.height/2/n,l=t.x/r+o,h=t.y/n+a;s=It.add(s,It.NW),this.x0=l+o*It.uX(s),this.y0=h+a*It.uY(s),s=It.add(s,2),this.x1=l+o*It.uX(s),this.y1=h+a*It.uY(s),s=It.add(s,2),this.x2=l+o*It.uX(s),this.y2=h+a*It.uY(s),s=It.add(s,2),this.x3=l+o*It.uX(s),this.y3=h+a*It.uY(s)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Em=new zd;function ol(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}class J extends Qn{constructor(t,e,s,r,n,o,a){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new pt(0,0,1,1)),t instanceof J&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=r,this.valid=!1,this._uvs=Em,this.uvMatrix=null,this.orig=s||e,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ft(o.x,o.y):new ft(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&me[e.url]&&J.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,J.removeFromCache(this),this.textureCacheIds=null}clone(){var r;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),s=new J(this.baseTexture,!this.noFrame&&t,e,(r=this.trim)==null?void 0:r.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(s._frame=t),s}updateUvs(){this._uvs===Em&&(this._uvs=new zd),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},s=Z.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let n=null;if(r)n=t;else if(t instanceof dt){if(!t.cacheId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${$s()}`,dt.addToCache(t,t.cacheId)}n=t.cacheId}else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${$s()}`}n=t._pixiId}let o=me[n];if(r&&s&&!o)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!o&&!(t instanceof dt)?(e.resolution||(e.resolution=fs(t)),o=new J(new dt(t,e)),o.baseTexture.cacheId=n,dt.addToCache(o.baseTexture,n),J.addToCache(o,n)):!o&&t instanceof dt&&(o=new J(t),J.addToCache(o,n)),o}static fromURL(t,e){const s=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),r=J.from(t,Object.assign({resourceOptions:s},e),!1),n=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):n.load().then(()=>Promise.resolve(r))}static fromBuffer(t,e,s,r){return new J(dt.fromBuffer(t,e,s,r))}static fromLoader(t,e,s,r){const n=new dt(t,Object.assign({scaleMode:dt.defaultOptions.scaleMode,resolution:fs(e)},r)),{resource:o}=n;o instanceof Hd&&(o.url=e);const a=new J(n);return s||(s=e),dt.addToCache(a.baseTexture,s),J.addToCache(a,s),s!==e&&(dt.addToCache(a.baseTexture,e),J.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),me[e]&&me[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),me[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=me[t];if(e){const s=e.textureCacheIds.indexOf(t);return s>-1&&e.textureCacheIds.splice(s,1),delete me[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)me[t.textureCacheIds[e]]===t&&delete me[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:s,width:r,height:n}=t,o=e+r>this.baseTexture.width,a=s+n>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",h=`X: ${e} + ${r} = ${e+r} > ${this.baseTexture.width}`,c=`Y: ${s} + ${n} = ${s+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${l} ${c}`)}this.valid=r&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return J._EMPTY||(J._EMPTY=new J(new dt),ol(J._EMPTY),ol(J._EMPTY.baseTexture)),J._EMPTY}static get WHITE(){if(!J._WHITE){const t=Z.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),J._WHITE=new J(dt.from(t)),ol(J._WHITE),ol(J._WHITE.baseTexture)}return J._WHITE}}class Ws extends J{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,s=!0){const r=this.baseTexture.resolution,n=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,s&&this.baseTexture.resize(n,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Ws(new Gd(t))}}class Vd{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,s=Vt.NONE){const r=new Gd(Object.assign({width:t,height:e,resolution:1,multisample:s},this.textureOptions));return new Ws(r)}getOptimalTexture(t,e,s=1,r=Vt.NONE){let n;t=Math.ceil(t*s-1e-6),e=Math.ceil(e*s-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=Ko(t),e=Ko(e),n=((t&65535)<<16|e&65535)>>>0,r>1&&(n+=r*4294967296)):n=r>1?-r:-1,this.texturePool[n]||(this.texturePool[n]=[]);let o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e,r)),o.filterPoolKey=n,o.setResolution(s),o}getFilterTexture(t,e,s){const r=this.getOptimalTexture(t.width,t.height,e||t.resolution,s||Vt.NONE);return r.filterFrame=t.filterFrame,r}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const s=this.texturePool[e];if(s)for(let r=0;r<s.length;r++)s[r].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const s=this.texturePool[e];if(s)for(let r=0;r<s.length;r++)s[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Vd.SCREEN_KEY=-1;class f0 extends ps{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class jd extends ps{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Nt(this.vertices),this.uvBuffer=new Nt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let s=0,r=0;return this.uvs[0]=s,this.uvs[1]=r,this.uvs[2]=s+e.width/t.width,this.uvs[3]=r,this.uvs[4]=s+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=s,this.uvs[7]=r+e.height/t.height,s=e.x,r=e.y,this.vertices[0]=s,this.vertices[1]=r,this.vertices[2]=s+e.width,this.vertices[3]=r,this.vertices[4]=s+e.width,this.vertices[5]=r+e.height,this.vertices[6]=s,this.vertices[7]=r+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class p0{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Vt.NONE,this.sourceFrame=new pt,this.destinationFrame=new pt,this.bindingSourceFrame=new pt,this.bindingDestinationFrame=new pt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const al=[new ft,new ft,new ft,new ft],Sc=new Ct;class Wd{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Vd,this.statePool=[],this.quad=new f0,this.quadUv=new jd,this.tempRect=new pt,this.activeState={},this.globalUniforms=new ai({outputFrame:new pt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const s=this.renderer,r=this.defaultFilterStack,n=this.statePool.pop()||new p0,o=this.renderer.renderTexture;let a=e[0].resolution,l=e[0].multisample,h=e[0].padding,c=e[0].autoFit,u=e[0].legacy??!0;for(let m=1;m<e.length;m++){const g=e[m];a=Math.min(a,g.resolution),l=Math.min(l,g.multisample),h=this.useMaxPadding?Math.max(h,g.padding):h+g.padding,c=c&&g.autoFit,u=u||(g.legacy??!0)}r.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(n),n.resolution=a,n.multisample=l,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(h);const d=this.tempRect.copyFrom(o.sourceFrame);s.projection.transform&&this.transformAABB(Sc.copyFrom(s.projection.transform).invert(),d),c?(n.sourceFrame.fit(d),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(d)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,a,l),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const p=this.tempRect;p.x=0,p.y=0,p.width=n.sourceFrame.width,p.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(o.sourceFrame),n.bindingDestinationFrame.copyFrom(o.destinationFrame),n.transform=s.projection.transform,s.projection.transform=null,o.bind(n.renderTexture,n.sourceFrame,p),s.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),s=e.filters;this.activeState=e;const r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;const n=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*e.resolution),o[1]=Math.round(n[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*n[2]-.5*o[2],a[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){const h=r.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),s.length===1)s[0].apply(this,e.renderTexture,l.renderTexture,yi.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let h=e.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,e.resolution);c.filterFrame=h.filterFrame;let u=0;for(u=0;u<s.length-1;++u){u===1&&e.multisample>1&&(c=this.getOptimalFilterTexture(h.width,h.height,e.resolution),c.filterFrame=h.filterFrame),s[u].apply(this,h,c,yi.CLEAR,e);const d=h;h=c,c=d}s[u].apply(this,h,l.renderTexture,yi.BLEND,e),u>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=yi.CLEAR){const{renderTexture:s,state:r}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,s.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=r.stateId&1||this.forceClear;(e===yi.CLEAR||e===yi.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,s,r){const n=this.renderer;n.state.set(t.state),this.bindAndClear(s,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(bi.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(bi.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:s,destinationFrame:r}=this.activeState,{orig:n}=e._texture,o=t.set(r.width,0,0,r.height,s.x,s.y),a=e.worldTransform.copyTo(Ct.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,s=1,r=Vt.NONE){return this.texturePool.getOptimalTexture(t,e,s,r)}getFilterTexture(t,e,s){if(typeof t=="number"){const n=t;t=e,e=n}t=t||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,s||Vt.NONE);return r.filterFrame=t.filterFrame,r}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const s=al[0],r=al[1],n=al[2],o=al[3];s.set(e.left,e.top),r.set(e.left,e.bottom),n.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(s,s),t.apply(r,r),t.apply(n,n),t.apply(o,o);const a=Math.min(s.x,r.x,n.x,o.x),l=Math.min(s.y,r.y,n.y,o.y),h=Math.max(s.x,r.x,n.x,o.x),c=Math.max(s.y,r.y,n.y,o.y);e.x=a,e.y=l,e.width=h-a,e.height=c-l}roundFrame(t,e,s,r,n){if(!(t.width<=0||t.height<=0||s.width<=0||s.height<=0)){if(n){const{a:o,b:a,c:l,d:h}=n;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}n=n?Sc.copyFrom(n):Sc.identity(),n.translate(-s.x,-s.y).scale(r.width/s.width,r.height/s.height).translate(r.x,r.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}}}Wd.extension={type:Q.RendererSystem,name:"filter"};nt.add(Wd);class m0{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Vt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const LE=new pt;class Xd{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Jl(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new pt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,s=this.renderer.context.extensions.depthTexture;Z.PREFER_ENV===js.WEBGL_LEGACY&&(e=null,s=null),e?t.drawBuffers=r=>e.drawBuffersWEBGL(r):(this.hasMRT=!1,t.drawBuffers=()=>{}),s||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,s=0){const{gl:r}=this;if(t){const n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==s&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=s),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,s)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>s,a=e.height>>s,l=o/e.width;this.setViewport(e.x*l,e.y*l,o,a)}else{const o=t.width>>s,a=t.height>>s;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,s,r){const n=this.viewport;t=Math.round(t),e=Math.round(e),s=Math.round(s),r=Math.round(r),(n.width!==s||n.height!==r||n.x!==t||n.y!==e)&&(n.x=t,n.y=e,n.width=s,n.height=r,this.gl.viewport(t,e,s,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,s,r,n=jl.COLOR|jl.DEPTH){const{gl:o}=this;o.clearColor(t,e,s,r),o.clear(n)}initFramebuffer(t){const{gl:e}=this,s=new m0(e.createFramebuffer());return s.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(t),t.disposeRunner.add(this),s}resizeFramebuffer(t){const{gl:e}=this,s=t.glFramebuffers[this.CONTEXT_UID];s.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,s.stencil),s.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const r=t.colorTextures;let n=r.length;e.drawBuffers||(n=Math.min(n,1));for(let o=0;o<n;o++){const a=r[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&s.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,s.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:s}=this,r=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures;let o=n.length;s.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?r.msaaBuffer=r.msaaBuffer||s.createRenderbuffer():r.msaaBuffer&&(s.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const h=n[l],c=h.parentTextureArray||h;this.renderer.texture.bind(c,0),l===0&&r.msaaBuffer?(s.bindRenderbuffer(s.RENDERBUFFER,r.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,r.msaaBuffer)):(s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+l,h.target,c._glTextures[this.CONTEXT_UID].texture,e),a.push(s.COLOR_ATTACHMENT0+l))}if(a.length>1&&s.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const h=t.depthTexture;this.renderer.texture.bind(h,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,e)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(r.stencil=r.stencil||s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,r.stencil),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,s.DEPTH24_STENCIL8,t.width,t.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,r.stencil)):r.stencil&&(s.deleteRenderbuffer(r.stencil),r.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let s=Vt.NONE;if(t<=1||e===null)return s;for(let r=0;r<e.length;r++)if(e[r]<=t){s=e[r];break}return s===1&&(s=Vt.NONE),s}blit(t,e,s){const{current:r,renderer:n,gl:o,CONTEXT_UID:a}=this;if(n.context.webGLVersion!==2||!r)return;const l=r.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const c=r.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new Jl(r.width,r.height),l.blitFramebuffer.addColorTexture(0,c)),t=l.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==r.width||t.height!==r.height)&&(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||(e=LE,e.width=r.width,e.height=r.height),s||(s=e);const h=e.width===s.width&&e.height===s.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,s.left,s.top,s.right,s.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const s=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!s)return;delete t.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(s.framebuffer),s.msaaBuffer&&r.deleteRenderbuffer(s.msaaBuffer),s.stencil&&r.deleteRenderbuffer(s.stencil)),s.blitFramebuffer&&this.disposeFramebuffer(s.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let s=0;s<e.length;s++)this.disposeFramebuffer(e[s],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const s=t.width,r=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,n.DEPTH24_STENCIL8,s,r):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,s,r),e.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new pt}destroy(){this.renderer=null}}Xd.extension={type:Q.RendererSystem,name:"framebuffer"};nt.add(Xd);const Pc={5126:4,5123:2,5121:1};class Yd{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let s=this.renderer.context.extensions.vertexArrayObject;Z.PREFER_ENV===js.WEBGL_LEGACY&&(s=null),s?(t.createVertexArray=()=>s.createVertexArrayOES(),t.bindVertexArray=r=>s.bindVertexArrayOES(r),t.deleteVertexArray=r=>s.deleteVertexArrayOES(r)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=(r,n)=>s.vertexAttribDivisorANGLE(r,n),t.drawElementsInstanced=(r,n,o,a,l)=>s.drawElementsInstancedANGLE(r,n,o,a,l),t.drawArraysInstanced=(r,n,o,a)=>s.drawArraysInstancedANGLE(r,n,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:s}=this;let r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);const o=r[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?s.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let s=0;s<t.buffers.length;s++){const r=t.buffers[s];e.update(r)}}checkCompatibility(t,e){const s=t.attributes,r=e.attributeData;for(const n in r)if(!s[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(t,e){const s=t.attributes,r=e.attributeData,n=["g",t.id];for(const o in s)r[o]&&n.push(o,r[o].location);return n.join("-")}initGeometryVao(t,e,s=!0){const r=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const l=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID];let c=h[l];if(c)return h[a.id]=c,c;const u=t.buffers,d=t.attributes,p={},m={};for(const g in u)p[g]=0,m[g]=0;for(const g in d)!d[g].size&&a.attributeData[g]?d[g].size=a.attributeData[g].size:d[g].size||console.warn(`PIXI Geometry attribute '${g}' size cannot be determined (likely the bound shader does not have the attribute)`),p[d[g].buffer]+=d[g].size*Pc[d[g].type];for(const g in d){const _=d[g],x=_.size;_.stride===void 0&&(p[_.buffer]===x*Pc[_.type]?_.stride=0:_.stride=p[_.buffer]),_.start===void 0&&(_.start=m[_.buffer],m[_.buffer]+=x*Pc[_.type])}c=r.createVertexArray(),r.bindVertexArray(c);for(let g=0;g<u.length;g++){const _=u[g];o.bind(_),s&&_._glBuffers[n].refCount++}return this.activateVao(t,a),h[a.id]=c,h[l]=c,r.bindVertexArray(null),o.unbind(Ei.ARRAY_BUFFER),c}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const s=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,n=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!s){if(o)for(let l=0;l<n.length;l++){const h=n[l]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!e&&o.dispose(n[l],e))}if(!e){for(const l in s)if(l[0]==="g"){const h=s[l];this._activeVao===h&&this.unbind(),r.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let s=0;s<e.length;s++)this.disposeGeometry(this.managedGeometries[e[s]],t)}activateVao(t,e){const s=this.gl,r=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let l=null;for(const h in a){const c=a[h],u=o[c.buffer],d=u._glBuffers[r];if(e.attributeData[h]){l!==d&&(n.bind(u),l=d);const p=e.attributeData[h].location;if(s.enableVertexAttribArray(p),s.vertexAttribPointer(p,c.size,c.type||s.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)s.vertexAttribDivisor(p,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,s,r){const{gl:n}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,l,(s||0)*a,r||1):n.drawElements(t,e||o.indexBuffer.data.length,l,(s||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,s,e||o.getSize(),r||1):n.drawArrays(t,s,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Yd.extension={type:Q.RendererSystem,name:"geometry"};nt.add(Yd);const Am=new Ct;class Gh{constructor(t,e){this._texture=t,this.mapCoord=new Ct,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const s=this.mapCoord;for(let r=0;r<t.length;r+=2){const n=t[r],o=t[r+1];e[r]=n*s.a+o*s.c+s.tx,e[r+1]=n*s.b+o*s.d+s.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const s=e._uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const r=e.orig,n=e.trim;n&&(Am.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Am));const o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(e._frame.x+l+h)/o.width,a[1]=(e._frame.y+l+h)/o.height,a[2]=(e._frame.x+e._frame.width-l+h)/o.width,a[3]=(e._frame.y+e._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}}var NE=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,UE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class g0 extends mt{constructor(t,e,s){let r=null;typeof t!="string"&&e===void 0&&s===void 0&&(r=t,t=void 0,e=void 0,s=void 0),super(t||UE,e||NE,s),this.maskSprite=r,this.maskMatrix=new Ct}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,s,r){const n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Gh(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,s,r))}}class _0{constructor(t=null){this.type=Xt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=mt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Xt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class qd{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let s=e;if(!s.isMaskData){const n=this.maskDataPool.pop()||new _0;n.pooled=!0,n.maskObject=e,s=n}const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(s.copyCountersOrReset(r),s._colorMask=r?r._colorMask:15,s.autoDetect&&this.detect(s),s._target=t,s.type!==Xt.SPRITE&&this.maskStack.push(s),s.enabled)switch(s.type){case Xt.SCISSOR:this.renderer.scissor.push(s);break;case Xt.STENCIL:this.renderer.stencil.push(s);break;case Xt.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s);break;case Xt.COLOR:this.pushColorMask(s);break}s.type===Xt.SPRITE&&this.maskStack.push(s)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Xt.SCISSOR:this.renderer.scissor.pop(e);break;case Xt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Xt.SPRITE:this.popSpriteMask(e);break;case Xt.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const s=this.maskStack[this.maskStack.length-1];s.type===Xt.SPRITE&&s._filters&&(s._filters[0].maskSprite=s.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=Xt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Xt.SCISSOR:t.type=Xt.STENCIL:t.type=Xt.COLOR}pushSpriteMask(t){const{maskObject:e}=t,s=t._target;let r=t._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new g0]));const n=this.renderer,o=n.renderTexture;let a,l;if(o.current){const c=o.current;a=t.resolution||c.resolution,l=t.multisample??c.multisample}else a=t.resolution||n.resolution,l=t.multisample??n.multisample;r[0].resolution=a,r[0].multisample=l,r[0].maskSprite=e;const h=s.filterArea;s.filterArea=e.getBounds(!0),n.filter.push(s,r),s.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,s=t._colorMask=e&t.colorMask;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}popColorMask(t){const e=t._colorMask,s=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}destroy(){this.renderer=null}}qd.extension={type:Q.RendererSystem,name:"mask"};nt.add(qd);class v0{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,s=this.getStackLength();this.maskStack=t;const r=this.getStackLength();r!==s&&(r===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Cm=new Ct,Sm=[],Tl=class extends v0{constructor(i){super(i),this.glConst=Z.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const i=this.maskStack[this.maskStack.length-1];return i?i._scissorCounter:0}calcScissorRect(i){if(i._scissorRectLocal)return;const t=i._scissorRect,{maskObject:e}=i,{renderer:s}=this,r=s.renderTexture,n=e.getBounds(!0,Sm.pop()??new pt);this.roundFrameToPixels(n,r.current?r.current.resolution:s.resolution,r.sourceFrame,r.destinationFrame,s.projection.transform),t&&n.fit(t),i._scissorRectLocal=n}static isMatrixRotated(i){if(!i)return!1;const{a:t,b:e,c:s,d:r}=i;return(Math.abs(e)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(r)>1e-4)}testScissor(i){const{maskObject:t}=i;if(!t.isFastRect||!t.isFastRect()||Tl.isMatrixRotated(t.worldTransform)||Tl.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(i);const e=i._scissorRectLocal;return e.width>0&&e.height>0}roundFrameToPixels(i,t,e,s,r){Tl.isMatrixRotated(r)||(r=r?Cm.copyFrom(r):Cm.identity(),r.translate(-e.x,-e.y).scale(s.width/e.width,s.height/e.height).translate(s.x,s.y),this.renderer.filter.transformAABB(r,i),i.fit(s),i.x=Math.round(i.x*t),i.y=Math.round(i.y*t),i.width=Math.round(i.width*t),i.height=Math.round(i.height*t))}push(i){i._scissorRectLocal||this.calcScissorRect(i);const{gl:t}=this.renderer;i._scissorRect||t.enable(t.SCISSOR_TEST),i._scissorCounter++,i._scissorRect=i._scissorRectLocal,this._useCurrent()}pop(i){const{gl:t}=this.renderer;i&&Sm.push(i._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const i=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=i.y:t=this.renderer.height-i.height-i.y,this.renderer.gl.scissor(i.x,t,i.width,i.height)}};let Kd=Tl;Kd.extension={type:Q.RendererSystem,name:"scissor"};nt.add(Kd);class Zd extends v0{constructor(t){super(t),this.glConst=Z.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:s}=this.renderer,r=t._stencilCounter;r===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),t._stencilCounter++;const n=t._colorMask;n!==0&&(t._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,r,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,n!==0&&(t._colorMask=n,s.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,r=s?s._colorMask:15;r!==0&&(s._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,r!==0&&(s._colorMask=r,e.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Zd.extension={type:Q.RendererSystem,name:"stencil"};nt.add(Zd);class Qd{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return ut("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return ut("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return ut("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}Qd.extension={type:[Q.RendererSystem,Q.CanvasRendererSystem],name:"_plugin"};nt.add(Qd);class Jd{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ct,this.transform=null}update(t,e,s,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,s,r),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,e,s,r){const n=this.projectionMatrix,o=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=o*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-o-e.y*n.d}setTransform(t){}destroy(){this.renderer=null}}Jd.extension={type:Q.RendererSystem,name:"projection"};nt.add(Jd);const $E=new Ta;class tf{constructor(t){this.renderer=t,this._tempMatrix=new Ct}generateTexture(t,e){const{region:s,...r}=e||{},n=s||t.getLocalBounds(null,!0);n.width===0&&(n.width=1),n.height===0&&(n.height=1);const o=Ws.create({width:n.width,height:n.height,...r});this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const a=t.transform;return t.transform=$E,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}tf.extension={type:[Q.RendererSystem,Q.CanvasRendererSystem],name:"textureGenerator"};nt.add(tf);const or=new pt,fo=new pt;class ef{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new pt,this.destinationFrame=new pt,this.viewportFrame=new pt}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,s){const r=this.renderer;this.current=t;let n,o,a;t?(n=t.baseTexture,a=n.resolution,e||(or.width=t.frame.width,or.height=t.frame.height,e=or),s||(fo.x=t.frame.x,fo.y=t.frame.y,fo.width=e.width,fo.height=e.height,s=fo),o=n.framebuffer):(a=r.resolution,e||(or.width=r._view.screen.width,or.height=r._view.screen.height,e=or),s||(s=or,s.width=e.width,s.height=e.height));const l=this.viewportFrame;l.x=s.x*a,l.y=s.y*a,l.width=s.width*a,l.height=s.height*a,t||(l.y=r.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(s,e,a,!o),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(s)}clear(t,e){const s=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,r=vt.shared.setValue(t||s);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&r.premultiply(r.alpha);const n=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=n.width!==o.width||n.height!==o.height;if(a){let{x:l,y:h,width:c,height:u}=this.viewportFrame;l=Math.round(l),h=Math.round(h),c=Math.round(c),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,h,c,u)}this.renderer.framebuffer.clear(r.red,r.green,r.blue,r.alpha,e),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}ef.extension={type:Q.RendererSystem,name:"renderTexture"};nt.add(ef);class GE{}class y0{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function HE(i,t){const e={},s=t.getProgramParameter(i,t.ACTIVE_ATTRIBUTES);for(let r=0;r<s;r++){const n=t.getActiveAttrib(i,r);if(n.name.startsWith("gl_"))continue;const o=c0(t,n.type),a={type:o,name:n.name,size:h0(o),location:t.getAttribLocation(i,n.name)};e[n.name]=a}return e}function zE(i,t){const e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS);for(let r=0;r<s;r++){const n=t.getActiveUniform(i,r),o=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),l=c0(t,n.type);e[o]={name:o,index:r,type:l,size:n.size,isArray:a,value:o0(l,n.size)}}return e}function x0(i,t){var l;const e=ym(i,i.VERTEX_SHADER,t.vertexSrc),s=ym(i,i.FRAGMENT_SHADER,t.fragmentSrc),r=i.createProgram();i.attachShader(r,e),i.attachShader(r,s);const n=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(n&&(typeof i.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):i.transformFeedbackVaryings(r,n.names,n.bufferMode==="separate"?i.SEPARATE_ATTRIBS:i.INTERLEAVED_ATTRIBS)),i.linkProgram(r),i.getProgramParameter(r,i.LINK_STATUS)||CE(i,r,e,s),t.attributeData=HE(r,i),t.uniformData=zE(r,i),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((c,u)=>c>u?1:-1);for(let c=0;c<h.length;c++)t.attributeData[h[c]].location=c,i.bindAttribLocation(r,c,h[c]);i.linkProgram(r)}i.deleteShader(e),i.deleteShader(s);const o={};for(const h in t.uniformData){const c=t.uniformData[h];o[h]={location:i.getUniformLocation(r,h),value:o0(c.type,c.size)}}return new y0(r,o)}function VE(i,t,e,s,r){e.buffer.update(r)}const jE={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},b0={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function w0(i){const t=i.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let e=0,s=0,r=0;for(let n=0;n<t.length;n++){const o=t[n];if(e=b0[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,s%e!==0&&s<16){const a=s%e%16;s+=a,r+=a}s+e>16?(r=Math.ceil(r/16)*16,o.offset=r,r+=e,s=e):(o.offset=r,s+=e,r+=e)}return r=Math.ceil(r/16)*16,{uboElements:t,size:r}}function T0(i,t){const e=[];for(const s in i)t[s]&&e.push(t[s]);return e.sort((s,r)=>s.index-r.index),e}function E0(i,t){if(!i.autoManage)return{size:0,syncFunc:VE};const e=T0(i.uniforms,t),{uboElements:s,size:r}=w0(e),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<s.length;o++){const a=s[o],l=i.uniforms[a.data.name],h=a.data.name;let c=!1;for(let u=0;u<Sr.length;u++){const d=Sr[u];if(d.codeUbo&&d.test(a.data,l)){n.push(`offset = ${a.offset/4};`,Sr[u].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const u=h0(a.data.type),d=Math.max(b0[a.data.type]/16,1),p=u/d,m=(4-p%4)%4;n.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${p}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${m};
                }

                `)}else{const u=jE[a.data.type];n.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${u};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let WE=0;const ll={textureCount:0,uboCount:0};class sf{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=WE++}systemCheck(){if(!u0())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const s=t.program,r=s.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==s&&(this.program=s,this.gl.useProgram(r.program)),e||(ll.textureCount=0,ll.uboCount=0,this.syncUniformGroup(t.uniformGroup,ll)),r}setUniforms(t){const e=this.shader.program,s=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(s.uniformData,t,this.renderer)}syncUniformGroup(t,e){const s=this.getGlProgram();(!t.static||t.dirtyId!==s.uniformDirtyGroups[t.id])&&(s.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,s,e))}syncUniforms(t,e,s){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,s)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=EE(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const s=this.getGlProgram();if(!t.static||t.dirtyId!==0||!s.uniformGroups[t.id]){t.dirtyId=0;const r=s.uniformGroups[t.id]||this.createSyncBufferGroup(t,s,e);t.buffer.update(),r(s.uniformData,t.uniforms,this.renderer,ll,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,s.uniformBufferBindings[e])}createSyncBufferGroup(t,e,s){const{gl:r}=this.renderer;this.renderer.buffer.bind(t.buffer);const n=this.gl.getUniformBlockIndex(e.program,s);e.uniformBufferBindings[s]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=E0(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,s){const r=t.uniforms,n=[`${s}-`];for(const o in r)n.push(o),e[o]&&n.push(e[o].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,s=t.program,r=x0(e,s);return s.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}sf.extension={type:Q.RendererSystem,name:"shader"};nt.add(sf);class Sa{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.2.4 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}Sa.defaultOptions={hello:!1};Sa.extension={type:[Q.RendererSystem,Q.CanvasRendererSystem],name:"startup"};nt.add(Sa);function XE(i,t=[]){return t[lt.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.ADD]=[i.ONE,i.ONE],t[lt.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.NONE]=[0,0],t[lt.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],t[lt.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[lt.SRC_IN]=[i.DST_ALPHA,i.ZERO],t[lt.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],t[lt.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[lt.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],t[lt.DST_IN]=[i.ZERO,i.SRC_ALPHA],t[lt.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],t[lt.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],t[lt.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[lt.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],t}const YE=0,qE=1,KE=2,ZE=3,QE=4,JE=5,Mu=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=lt.NONE,this._blendEq=!1,this.map=[],this.map[YE]=this.setBlend,this.map[qE]=this.setOffset,this.map[KE]=this.setCullFace,this.map[ZE]=this.setDepthTest,this.map[QE]=this.setFrontFace,this.map[JE]=this.setDepthMask,this.checks=[],this.defaultState=new Zi,this.defaultState.blend=!0}contextChange(i){this.gl=i,this.blendModes=XE(i),this.set(this.defaultState),this.reset()}set(i){if(i=i||this.defaultState,this.stateId!==i.data){let t=this.stateId^i.data,e=0;for(;t;)t&1&&this.map[e].call(this,!!(i.data&1<<e)),t=t>>1,e++;this.stateId=i.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,i)}forceState(i){i=i||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(i.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,i);this.stateId=i.data}setBlend(i){this.updateCheck(Mu.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)}setOffset(i){this.updateCheck(Mu.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(i){this.gl[i?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(i){this.gl.depthMask(i)}setCullFace(i){this.gl[i?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(i){this.gl.frontFace(this.gl[i?"CW":"CCW"])}setBlendMode(i){if(i===this.blendMode)return;this.blendMode=i;const t=this.blendModes[i],e=this.gl;t.length===2?e.blendFunc(t[0],t[1]):e.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,e.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD))}setPolygonOffset(i,t){this.gl.polygonOffset(i,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(i,t){const e=this.checks.indexOf(i);t&&e===-1?this.checks.push(i):!t&&e!==-1&&this.checks.splice(e,1)}static checkBlendMode(i,t){i.setBlendMode(t.blendMode)}static checkPolygonOffset(i,t){i.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let rf=Mu;rf.extension={type:Q.RendererSystem,name:"state"};nt.add(rf);class A0 extends Qn{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(r=>t.systems[r]),s=[...e,...Object.keys(t.systems).filter(r=>!e.includes(r))];for(const r of s)this.addSystem(t.systems[r],r)}addRunners(...t){t.forEach(e=>{this.runners[e]=new Be(e)})}addSystem(t,e){const s=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=s,this._systemsHash[e]=s;for(const r in this.runners)this.runners[r].add(s);return this}emitWithCustomOptions(t,e){const s=Object.keys(this._systemsHash);t.items.forEach(r=>{const n=s.find(o=>this._systemsHash[o]===r);r[t.name](e[n])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const El=class{constructor(i){this.renderer=i,this.count=0,this.checkCount=0,this.maxIdle=El.defaultMaxIdle,this.checkCountMax=El.defaultCheckCountMax,this.mode=El.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Oh.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const i=this.renderer.texture,t=i.managedTextures;let e=!1;for(let s=0;s<t.length;s++){const r=t[s];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(i.destroyTexture(r,!0),t[s]=null,e=!0)}if(e){let s=0;for(let r=0;r<t.length;r++)t[r]!==null&&(t[s++]=t[r]);t.length=s}}unload(i){const t=this.renderer.texture,e=i._texture;e&&!e.framebuffer&&t.destroyTexture(e);for(let s=i.children.length-1;s>=0;s--)this.unload(i.children[s])}destroy(){this.renderer=null}};let Je=El;Je.defaultMode=Oh.AUTO;Je.defaultMaxIdle=60*60;Je.defaultCheckCountMax=60*10;Je.extension={type:Q.RendererSystem,name:"textureGC"};nt.add(Je);class Al{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ot.UNSIGNED_BYTE,this.internalFormat=Y.RGBA,this.samplerType=0}}function tA(i){let t;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?t={[ot.UNSIGNED_BYTE]:{[Y.RGBA]:i.RGBA8,[Y.RGB]:i.RGB8,[Y.RG]:i.RG8,[Y.RED]:i.R8,[Y.RGBA_INTEGER]:i.RGBA8UI,[Y.RGB_INTEGER]:i.RGB8UI,[Y.RG_INTEGER]:i.RG8UI,[Y.RED_INTEGER]:i.R8UI,[Y.ALPHA]:i.ALPHA,[Y.LUMINANCE]:i.LUMINANCE,[Y.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[ot.BYTE]:{[Y.RGBA]:i.RGBA8_SNORM,[Y.RGB]:i.RGB8_SNORM,[Y.RG]:i.RG8_SNORM,[Y.RED]:i.R8_SNORM,[Y.RGBA_INTEGER]:i.RGBA8I,[Y.RGB_INTEGER]:i.RGB8I,[Y.RG_INTEGER]:i.RG8I,[Y.RED_INTEGER]:i.R8I},[ot.UNSIGNED_SHORT]:{[Y.RGBA_INTEGER]:i.RGBA16UI,[Y.RGB_INTEGER]:i.RGB16UI,[Y.RG_INTEGER]:i.RG16UI,[Y.RED_INTEGER]:i.R16UI,[Y.DEPTH_COMPONENT]:i.DEPTH_COMPONENT16},[ot.SHORT]:{[Y.RGBA_INTEGER]:i.RGBA16I,[Y.RGB_INTEGER]:i.RGB16I,[Y.RG_INTEGER]:i.RG16I,[Y.RED_INTEGER]:i.R16I},[ot.UNSIGNED_INT]:{[Y.RGBA_INTEGER]:i.RGBA32UI,[Y.RGB_INTEGER]:i.RGB32UI,[Y.RG_INTEGER]:i.RG32UI,[Y.RED_INTEGER]:i.R32UI,[Y.DEPTH_COMPONENT]:i.DEPTH_COMPONENT24},[ot.INT]:{[Y.RGBA_INTEGER]:i.RGBA32I,[Y.RGB_INTEGER]:i.RGB32I,[Y.RG_INTEGER]:i.RG32I,[Y.RED_INTEGER]:i.R32I},[ot.FLOAT]:{[Y.RGBA]:i.RGBA32F,[Y.RGB]:i.RGB32F,[Y.RG]:i.RG32F,[Y.RED]:i.R32F,[Y.DEPTH_COMPONENT]:i.DEPTH_COMPONENT32F},[ot.HALF_FLOAT]:{[Y.RGBA]:i.RGBA16F,[Y.RGB]:i.RGB16F,[Y.RG]:i.RG16F,[Y.RED]:i.R16F},[ot.UNSIGNED_SHORT_5_6_5]:{[Y.RGB]:i.RGB565},[ot.UNSIGNED_SHORT_4_4_4_4]:{[Y.RGBA]:i.RGBA4},[ot.UNSIGNED_SHORT_5_5_5_1]:{[Y.RGBA]:i.RGB5_A1},[ot.UNSIGNED_INT_2_10_10_10_REV]:{[Y.RGBA]:i.RGB10_A2,[Y.RGBA_INTEGER]:i.RGB10_A2UI},[ot.UNSIGNED_INT_10F_11F_11F_REV]:{[Y.RGB]:i.R11F_G11F_B10F},[ot.UNSIGNED_INT_5_9_9_9_REV]:{[Y.RGB]:i.RGB9_E5},[ot.UNSIGNED_INT_24_8]:{[Y.DEPTH_STENCIL]:i.DEPTH24_STENCIL8},[ot.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Y.DEPTH_STENCIL]:i.DEPTH32F_STENCIL8}}:t={[ot.UNSIGNED_BYTE]:{[Y.RGBA]:i.RGBA,[Y.RGB]:i.RGB,[Y.ALPHA]:i.ALPHA,[Y.LUMINANCE]:i.LUMINANCE,[Y.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[ot.UNSIGNED_SHORT_5_6_5]:{[Y.RGB]:i.RGB},[ot.UNSIGNED_SHORT_4_4_4_4]:{[Y.RGBA]:i.RGBA},[ot.UNSIGNED_SHORT_5_5_5_1]:{[Y.RGBA]:i.RGBA}},t}class nf{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new dt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=tA(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};const s=new Al(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Al(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(t,e=0){const{gl:s}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),this.updateTexture(t)):r.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[s.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:s}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<s.length;r++)s[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<s.length;r++)s[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),s[r]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:s,CONTEXT_UID:r}=this;if(s)for(let n=t-1;n>=0;--n){const o=e[n];o&&o._glTextures[r].samplerType!==Wl.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new Al(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var s;e.internalFormat=((s=this.internalFormats[t.type])==null?void 0:s[t.format])??t.format,this.webGLVersion===2&&t.type===ot.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var r;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const s=this.renderer;if(this.initTextureType(t,e),(r=t.resource)!=null&&r.upload(s,t,e))e.samplerType!==Wl.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,o=t.realHeight,a=s.gl;(e.width!==n||e.height!==o||e.dirtyId<0)&&(e.width=n,e.height=o,a.texImage2D(t.target,0,e.internalFormat,n,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:s}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),s.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const r=this.managedTextures.indexOf(t);r!==-1&&Ar(this.managedTextures,r,1)}}updateTextureStyle(t){var s;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Mi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Hi.CLAMP:e.wrapMode=t.wrapMode,(s=t.resource)!=null&&s.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const s=this.gl;if(e.mipmap&&t.mipmap!==Mi.ON_MANUAL&&s.generateMipmap(t.target),s.texParameteri(t.target,s.TEXTURE_WRAP_S,e.wrapMode),s.texParameteri(t.target,s.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===wi.LINEAR?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===wi.LINEAR){const n=Math.min(t.anisotropicLevel,s.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));s.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===wi.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(t.target,s.TEXTURE_MAG_FILTER,t.scaleMode===wi.LINEAR?s.LINEAR:s.NEAREST)}destroy(){this.renderer=null}}nf.extension={type:Q.RendererSystem,name:"texture"};nt.add(nf);class of{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,r=t._glTransformFeedbacks[s]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:s,renderer:r}=this;e&&r.shader.bind(e),s.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:s,CONTEXT_UID:r}=this,n=e.createTransformFeedback();t._glTransformFeedbacks[r]=n,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(s.buffer.update(a),a._glBuffers[r].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,e){const s=t._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&n.dispose(a,e))}s&&(e||r.deleteTransformFeedback(s),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}of.extension={type:Q.RendererSystem,name:"transformFeedback"};nt.add(of);class Pa{constructor(t){this.renderer=t}init(t){this.screen=new pt(0,0,t.width,t.height),this.element=t.view||Z.ADAPTER.createCanvas(),this.resolution=t.resolution||Z.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const s=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=s,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${s}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",s,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Pa.defaultOptions={width:800,height:600,resolution:Z.RESOLUTION,autoDensity:!1};Pa.extension={type:[Q.RendererSystem,Q.CanvasRendererSystem],name:"_view"};nt.add(Pa);Z.PREFER_ENV=js.WEBGL2;Z.STRICT_TEXTURE_CACHE=!1;Z.RENDER_OPTIONS={...Ca.defaultOptions,...Aa.defaultOptions,...Pa.defaultOptions,...Sa.defaultOptions};Object.defineProperties(Z,{WRAP_MODE:{get(){return dt.defaultOptions.wrapMode},set(i){ut("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),dt.defaultOptions.wrapMode=i}},SCALE_MODE:{get(){return dt.defaultOptions.scaleMode},set(i){ut("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),dt.defaultOptions.scaleMode=i}},MIPMAP_TEXTURES:{get(){return dt.defaultOptions.mipmap},set(i){ut("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),dt.defaultOptions.mipmap=i}},ANISOTROPIC_LEVEL:{get(){return dt.defaultOptions.anisotropicLevel},set(i){ut("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),dt.defaultOptions.anisotropicLevel=i}},FILTER_RESOLUTION:{get(){return ut("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),mt.defaultResolution},set(i){mt.defaultResolution=i}},FILTER_MULTISAMPLE:{get(){return ut("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),mt.defaultMultisample},set(i){mt.defaultMultisample=i}},SPRITE_MAX_TEXTURES:{get(){return Qe.defaultMaxTextures},set(i){ut("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Qe.defaultMaxTextures=i}},SPRITE_BATCH_SIZE:{get(){return Qe.defaultBatchSize},set(i){ut("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Qe.defaultBatchSize=i}},CAN_UPLOAD_SAME_BUFFER:{get(){return Qe.canUploadSameBuffer},set(i){ut("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Qe.canUploadSameBuffer=i}},GC_MODE:{get(){return Je.defaultMode},set(i){ut("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Je.defaultMode=i}},GC_MAX_IDLE:{get(){return Je.defaultMaxIdle},set(i){ut("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Je.defaultMaxIdle=i}},GC_MAX_CHECK_COUNT:{get(){return Je.defaultCheckCountMax},set(i){ut("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Je.defaultCheckCountMax=i}},PRECISION_VERTEX:{get(){return ii.defaultVertexPrecision},set(i){ut("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),ii.defaultVertexPrecision=i}},PRECISION_FRAGMENT:{get(){return ii.defaultFragmentPrecision},set(i){ut("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),ii.defaultFragmentPrecision=i}}});var gs=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(gs||{});class Ic{constructor(t,e=null,s=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=s,this.once=r}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Me=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ic(null,null,1/0),this.deltaMS=1/Me.targetFPMS,this.elapsedMS=1/Me.targetFPMS,this._tick=i=>{this._requestId=null,this.started&&(this.update(i),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(i,t,e=gs.NORMAL){return this._addListener(new Ic(i,t,e))}addOnce(i,t,e=gs.NORMAL){return this._addListener(new Ic(i,t,e,!0))}_addListener(i){let t=this._head.next,e=this._head;if(!t)i.connect(e);else{for(;t;){if(i.priority>t.priority){i.connect(e);break}e=t,t=t.next}i.previous||i.connect(e)}return this._startIfPossible(),this}remove(i,t){let e=this._head.next;for(;e;)e.match(i,t)?e=e.destroy():e=e.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let i=0,t=this._head;for(;t=t.next;)i++;return i}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let i=this._head.next;for(;i;)i=i.destroy(!0);this._head.destroy(),this._head=null}}update(i=performance.now()){let t;if(i>this.lastTime){if(t=this.elapsedMS=i-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const r=i-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=i-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Me.targetFPMS;const e=this._head;let s=e.next;for(;s;)s=s.emit(this.deltaTime);e.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(i){const t=Math.min(this.maxFPS,i),e=Math.min(Math.max(0,t)/1e3,Me.targetFPMS);this._maxElapsedMS=1/e}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(i){if(i===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,i);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Me._shared){const i=Me._shared=new Me;i.autoStart=!0,i._protected=!0}return Me._shared}static get system(){if(!Me._system){const i=Me._system=new Me;i.autoStart=!0,i._protected=!0}return Me._system}};let jt=Me;jt.targetFPMS=.06;Object.defineProperties(Z,{TARGET_FPMS:{get(){return jt.targetFPMS},set(i){ut("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),jt.targetFPMS=i}}});class af{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,gs.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?jt.shared:new jt,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}af.extension=Q.Application;nt.add(af);const C0=[];nt.handleByList(Q.Renderer,C0);function S0(i){for(const t of C0)if(t.test(i))return new t(i);throw new Error("Unable to auto-detect a suitable renderer.")}var eA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,iA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const P0=eA,lf=iA;class hf{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const s=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,s)}else{const s=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,s)}e>=Vt.HIGH?this.multisample=Vt.HIGH:e>=Vt.MEDIUM?this.multisample=Vt.MEDIUM:e>=Vt.LOW?this.multisample=Vt.LOW:this.multisample=Vt.NONE}destroy(){}}hf.extension={type:Q.RendererSystem,name:"_multisample"};nt.add(hf);class sA{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class cf{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,r=t._glBuffers[s]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:s,CONTEXT_UID:r}=this;if(this.boundBufferBases[e]!==t){const n=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,s.bindBufferBase(s.UNIFORM_BUFFER,e,n.buffer)}}bindBufferRange(t,e,s){const{gl:r,CONTEXT_UID:n}=this;s=s||0;const o=t._glBuffers[n]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,s*256,256)}update(t){const{gl:e,CONTEXT_UID:s}=this,r=t._glBuffers[s]||this.createGLBuffer(t);if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const s=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),s&&(e||r.deleteBuffer(s.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let s=0;s<e.length;s++)this.dispose(this.managedBuffers[e[s]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:s}=this;return t._glBuffers[e]=new sA(s.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}cf.extension={type:Q.RendererSystem,name:"buffer"};nt.add(cf);class uf{constructor(t){this.renderer=t}render(t,e){const s=this.renderer;let r,n,o,a;if(e&&(r=e.renderTexture,n=e.clear,o=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!r,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=o,!s.context.isLost){if(r||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}s.renderTexture.bind(r),s.batch.currentRenderer.start(),(n??s.background.clearBeforeRender)&&s.renderTexture.clear(),t.render(s),s.batch.currentRenderer.flush(),r&&(e.blit&&s.framebuffer.blit(),r.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}uf.extension={type:Q.RendererSystem,name:"objectRenderer"};nt.add(uf);const Ru=class extends A0{constructor(i){super(),this.type=kd.WEBGL,i=Object.assign({},Z.RENDER_OPTIONS,i),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ai({projectionMatrix:new Ct},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Ru.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in i&&(ut("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),i.premultipliedAlpha=i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",i.backgroundAlpha=i.useContextAlpha===!1?1:i.backgroundAlpha),this._plugin.rendererPlugins=Ru.__plugins,this.options=i,this.startup.run(this.options)}static test(i){return i!=null&&i.forceCanvas?!1:z_()}render(i,t){this.objectRenderer.render(i,t)}resize(i,t){this._view.resizeView(i,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(i=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:i}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(i){this._view.resolution=i,this.runners.resolutionChange.emit(i)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ut("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ut("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ut("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ut("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(i){ut("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=i}get backgroundAlpha(){return ut("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(i){ut("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=i}get powerPreference(){return ut("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(i,t){return this.textureGenerator.generateTexture(i,t)}};let Hr=Ru;Hr.extension={type:Q.Renderer,priority:1};Hr.__plugins={};Hr.__systems={};nt.handleByMap(Q.RendererPlugin,Hr.__plugins);nt.handleByMap(Q.RendererSystem,Hr.__systems);nt.add(Hr);class df extends Ln{constructor(t,e){const{width:s,height:r}=e||{};super(s,r),this.items=[],this.itemDirtyIds=[];for(let n=0;n<t;n++){const o=new dt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let s=0;s<this.length;s++)t[s]&&(t[s].castToBaseTexture?this.addBaseTextureAt(t[s].castToBaseTexture(),s):t[s]instanceof Ln?this.addResourceAt(t[s],s):this.addResourceAt(Nd(t[s],e),s))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const e=this.items.map(s=>s.resource).filter(s=>s).map(s=>s.load());return this._load=Promise.all(e).then(()=>{const{realWidth:s,realHeight:r}=this.items[0];return this.resize(s,r),Promise.resolve(this)}),this._load}}class I0 extends df{constructor(t,e){const{width:s,height:r}=e||{};let n,o;Array.isArray(t)?(n=t,o=t.length):o=t,super(o,{width:s,height:r}),n&&this.initFromArray(n,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Er.TEXTURE_2D_ARRAY}upload(t,e,s){const{length:r,itemDirtyIds:n,items:o}=this,{gl:a}=t;s.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,r,0,e.format,s.type,null);for(let l=0;l<r;l++){const h=o[l];n[l]<h.dirtyId&&(n[l]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,h.resource.width,h.resource.height,1,e.format,s.type,h.resource.source))}return!0}}class M0 extends ms{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const wo=class extends df{constructor(i,t){const{width:e,height:s,autoLoad:r,linkBaseTexture:n}=t||{};if(i&&i.length!==wo.SIDES)throw new Error(`Invalid length. Got ${i.length}, expected 6`);super(6,{width:e,height:s});for(let o=0;o<wo.SIDES;o++)this.items[o].target=Er.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=n!==!1,i&&this.initFromArray(i,t),r!==!1&&this.load()}bind(i){super.bind(i),i.target=Er.TEXTURE_CUBE_MAP}addBaseTextureAt(i,t,e){if(e===void 0&&(e=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||i.parentTextureArray||Object.keys(i._glTextures).length>0)if(i.resource)this.addResourceAt(i.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else i.target=Er.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.parentTextureArray=this.baseTexture,this.items[t]=i;return i.valid&&!this.valid&&this.resize(i.realWidth,i.realHeight),this.items[t]=i,this}upload(i,t,e){const s=this.itemDirtyIds;for(let r=0;r<wo.SIDES;r++){const n=this.items[r];(s[r]<n.dirtyId||e.dirtyId<t.dirtyId)&&(n.valid&&n.resource?(n.resource.upload(i,n,e),s[r]=n.dirtyId):s[r]<-1&&(i.gl.texImage2D(n.target,0,e.internalFormat,t.realWidth,t.realHeight,0,t.format,e.type,null),s[r]=-1))}return!0}static test(i){return Array.isArray(i)&&i.length===wo.SIDES}};let ff=wo;ff.SIDES=6;class xr extends ms{constructor(t,e){e=e||{};let s,r;typeof t=="string"?(s=xr.EMPTY,r=t):(s=t,r=null),super(s),this.url=r,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const s=await Z.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await s.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===hi.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=n,this.update(),t(this)}catch(s){if(this.destroyed)return;e(s),this.onError.emit(s)}}),this._load)}upload(t,e,s){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,s)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return xr._EMPTY=xr._EMPTY??Z.ADAPTER.createCanvas(0,0),xr._EMPTY}}const Cl=class extends ms{constructor(i,t){t=t||{},super(Z.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=i,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(i=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),i(this)},Cl.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const i=new Image;ms.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=t=>{this._resolve&&(i.onerror=null,this.onError.emit(t))},i.onload=()=>{if(!this._resolve)return;const t=i.width,e=i.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,r=e*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/e*t,r=this._overrideHeight||this._overrideWidth/t*e),s=Math.round(s),r=Math.round(r);const n=this.source;n.width=s,n.height=r,n._pixiId=`canvas_${$s()}`,n.getContext("2d").drawImage(i,0,0,t,e,0,0,s,r),this._resolve(),this._resolve=null}}static getSize(i){const t=Cl.SVG_SIZE.exec(i),e={};return t&&(e[t[1]]=Math.round(parseFloat(t[3])),e[t[5]]=Math.round(parseFloat(t[7]))),e}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(i,t){return t==="svg"||typeof i=="string"&&i.startsWith("data:image/svg+xml")||typeof i=="string"&&Cl.SVG_XML.test(i)}};let Un=Cl;Un.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Un.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Du=class extends ms{constructor(i,t){if(t=t||{},!(i instanceof HTMLVideoElement)){const e=document.createElement("video");e.setAttribute("preload","auto"),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),typeof i=="string"&&(i=[i]);const s=i[0].src||i[0];ms.crossOrigin(e,s,t.crossorigin);for(let r=0;r<i.length;++r){const n=document.createElement("source");let{src:o,mime:a}=i[r];o=o||i[r];const l=o.split("?").shift().toLowerCase(),h=l.slice(l.lastIndexOf(".")+1);a=a||Du.MIME_TYPES[h]||`video/${h}`,n.src=o,n.type=a,e.appendChild(n)}i=e}super(i),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(i=0){if(!this.destroyed){const t=jt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,i.load())}),this._load}_onError(i){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(i)}_isSourcePlaying(){const i=this.source;return!i.paused&&!i.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(jt.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(jt.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const i=this.source;i.removeEventListener("canplay",this._onCanPlay),i.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(i.videoWidth,i.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&i.play()}dispose(){this._isConnectedToTicker&&(jt.shared.remove(this.update,this),this._isConnectedToTicker=!1);const i=this.source;i&&(i.removeEventListener("error",this._onError,!0),i.pause(),i.src="",i.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(i){i!==this._autoUpdate&&(this._autoUpdate=i,!this._autoUpdate&&this._isConnectedToTicker?(jt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(jt.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(i){i!==this._updateFPS&&(this._updateFPS=i)}static test(i,t){return globalThis.HTMLVideoElement&&i instanceof HTMLVideoElement||Du.TYPES.includes(t)}};let Hh=Du;Hh.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Hh.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Kl.push(xr,Hd,M0,Hh,Un,Jn,ff,I0);class rA{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new Be("disposeTransformFeedback")}bindBuffer(t,e){this.buffers[t]=e}destroy(){this.disposeRunner.emit(this,!1)}}const nA="7.2.4";class Jo{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?pt.EMPTY:(t=t||new pt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:s,b:r,c:n,d:o,tx:a,ty:l}=t,h=s*e.x+n*e.y+a,c=r*e.x+o*e.y+l;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let e=this.minX,s=this.minY,r=this.maxX,n=this.maxY,o=t[0],a=t[1];e=o<e?o:e,s=a<s?a:s,r=o>r?o:r,n=a>n?a:n,o=t[2],a=t[3],e=o<e?o:e,s=a<s?a:s,r=o>r?o:r,n=a>n?a:n,o=t[4],a=t[5],e=o<e?o:e,s=a<s?a:s,r=o>r?o:r,n=a>n?a:n,o=t[6],a=t[7],e=o<e?o:e,s=a<s?a:s,r=o>r?o:r,n=a>n?a:n,this.minX=e,this.minY=s,this.maxX=r,this.maxY=n}addFrame(t,e,s,r,n){this.addFrameMatrix(t.worldTransform,e,s,r,n)}addFrameMatrix(t,e,s,r,n){const o=t.a,a=t.b,l=t.c,h=t.d,c=t.tx,u=t.ty;let d=this.minX,p=this.minY,m=this.maxX,g=this.maxY,_=o*e+l*s+c,x=a*e+h*s+u;d=_<d?_:d,p=x<p?x:p,m=_>m?_:m,g=x>g?x:g,_=o*r+l*s+c,x=a*r+h*s+u,d=_<d?_:d,p=x<p?x:p,m=_>m?_:m,g=x>g?x:g,_=o*e+l*n+c,x=a*e+h*n+u,d=_<d?_:d,p=x<p?x:p,m=_>m?_:m,g=x>g?x:g,_=o*r+l*n+c,x=a*r+h*n+u,d=_<d?_:d,p=x<p?x:p,m=_>m?_:m,g=x>g?x:g,this.minX=d,this.minY=p,this.maxX=m,this.maxY=g}addVertexData(t,e,s){let r=this.minX,n=this.minY,o=this.maxX,a=this.maxY;for(let l=e;l<s;l+=2){const h=t[l],c=t[l+1];r=h<r?h:r,n=c<n?c:n,o=h>o?h:o,a=c>a?c:a}this.minX=r,this.minY=n,this.maxX=o,this.maxY=a}addVertices(t,e,s,r){this.addVerticesMatrix(t.worldTransform,e,s,r)}addVerticesMatrix(t,e,s,r,n=0,o=n){const a=t.a,l=t.b,h=t.c,c=t.d,u=t.tx,d=t.ty;let p=this.minX,m=this.minY,g=this.maxX,_=this.maxY;for(let x=s;x<r;x+=2){const b=e[x],y=e[x+1],w=a*b+h*y+u,T=c*y+l*b+d;p=Math.min(p,w-n),g=Math.max(g,w+n),m=Math.min(m,T-o),_=Math.max(_,T+o)}this.minX=p,this.minY=m,this.maxX=g,this.maxY=_}addBounds(t){const e=this.minX,s=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<s?t.minY:s,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,e){const s=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(s<=n&&r<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=s<a?s:a,this.minY=r<l?r:l,this.maxX=n>h?n:h,this.maxY=o>c?o:c}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const s=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(s<=n&&r<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=s<a?s:a,this.minY=r<l?r:l,this.maxX=n>h?n:h,this.maxY=o>c?o:c}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,s,r,n,o){t-=n,e-=o,s+=n,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>s?this.maxX:s,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r}}class Dt extends Qn{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Ta,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Jo,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let s=0;s<e.length;++s){const r=e[s];Object.defineProperty(Dt.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new pt),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Jo);const e=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=s,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-n,o}toGlobal(t,e,s=!1){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,s,r){return e&&(t=e.toGlobal(t,s,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,s=1,r=1,n=0,o=0,a=0,l=0,h=0){return this.position.x=t,this.position.y=e,this.scale.x=s||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new R0),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*i0}set angle(t){this.transform.rotation=t*Nn}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class R0 extends Dt{constructor(){super(...arguments),this.sortDirty=null}}Dt.prototype.displayObjectUpdateTransform=Dt.prototype.updateTransform;const oA=new Ct;function aA(i,t){return i.zIndex===t.zIndex?i._lastSortedIndex-t._lastSortedIndex:i.zIndex-t.zIndex}const Ou=class extends Dt{constructor(){super(),this.children=[],this.sortableChildren=Ou.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(i){}addChild(...i){if(i.length>1)for(let t=0;t<i.length;t++)this.addChild(i[t]);else{const t=i[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return i[0]}addChildAt(i,t){if(t<0||t>this.children.length)throw new Error(`${i}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.splice(t,0,i),this._boundsID++,this.onChildrenChange(t),i.emit("added",this),this.emit("childAdded",i,this,t),i}swapChildren(i,t){if(i===t)return;const e=this.getChildIndex(i),s=this.getChildIndex(t);this.children[e]=t,this.children[s]=i,this.onChildrenChange(e<s?e:s)}getChildIndex(i){const t=this.children.indexOf(i);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(i,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const e=this.getChildIndex(i);Ar(this.children,e,1),this.children.splice(t,0,i),this.onChildrenChange(t)}getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]}removeChild(...i){if(i.length>1)for(let t=0;t<i.length;t++)this.removeChild(i[t]);else{const t=i[0],e=this.children.indexOf(t);if(e===-1)return null;t.parent=null,t.transform._parentID=-1,Ar(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e)}return i[0]}removeChildAt(i){const t=this.getChildAt(i);return t.parent=null,t.transform._parentID=-1,Ar(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i),t}removeChildren(i=0,t=this.children.length){const e=i,s=t,r=s-e;let n;if(r>0&&r<=s){n=this.children.splice(e,r);for(let o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(i);for(let o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}else if(r===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let i=!1;for(let t=0,e=this.children.length;t<e;++t){const s=this.children[t];s._lastSortedIndex=t,!i&&s.zIndex!==0&&(i=!0)}i&&this.children.length>1&&this.children.sort(aA),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let i=0,t=this.children.length;i<t;++i){const e=this.children[i];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let i=0;i<this.children.length;i++){const t=this.children[i];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(i,t=!1){const e=super.getLocalBounds(i);if(!t)for(let s=0,r=this.children.length;s<r;++s){const n=this.children[s];n.visible&&n.updateTransform()}return e}_calculateBounds(){}_renderWithCulling(i){const t=i.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let e,s;this.cullArea?(e=this.cullArea,s=this.worldTransform):this._render!==Ou.prototype._render&&(e=this.getBounds(!0));const r=i.projection.transform;if(r&&(s?(s=oA.copyFrom(s),s.prepend(r)):s=r),e&&t.intersects(e,s))this._render(i);else if(this.cullArea)return;for(let n=0,o=this.children.length;n<o;++n){const a=this.children[n],l=a.cullable;a.cullable=l||!this.cullArea,a.render(i),a.cullable=l}}render(i){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(i);else if(this.cullable)this._renderWithCulling(i);else{this._render(i);for(let e=0,s=this.children.length;e<s;++e)this.children[e].render(i)}}renderAdvanced(i){var r,n,o;const t=this.filters,e=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const s=t&&((r=this._enabledFilters)==null?void 0:r.length)||e&&(!e.isMaskData||e.enabled&&(e.autoDetect||e.type!==Xt.NONE));if(s&&i.batch.flush(),t&&((n=this._enabledFilters)!=null&&n.length)&&i.filter.push(this,this._enabledFilters),e&&i.mask.push(this,this._mask),this.cullable)this._renderWithCulling(i);else{this._render(i);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(i)}s&&i.batch.flush(),e&&i.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&i.filter.pop()}_render(i){}destroy(i){super.destroy(),this.sortDirty=!1;const t=typeof i=="boolean"?i:i==null?void 0:i.children,e=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<e.length;++s)e[s].destroy(i)}get width(){return this.scale.x*this.getLocalBounds().width}set width(i){const t=this.getLocalBounds().width;t!==0?this.scale.x=i/t:this.scale.x=1,this._width=i}get height(){return this.scale.y*this.getLocalBounds().height}set height(i){const t=this.getLocalBounds().height;t!==0?this.scale.y=i/t:this.scale.y=1,this._height=i}};let ee=Ou;ee.defaultSortableChildren=!1;ee.prototype.containerUpdateTransform=ee.prototype.updateTransform;Object.defineProperties(Z,{SORTABLE_CHILDREN:{get(){return ee.defaultSortableChildren},set(i){ut("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),ee.defaultSortableChildren=i}}});const po=new ft,lA=new Uint16Array([0,1,2,0,2,3]);class Qi extends ee{constructor(t){super(),this._anchor=new Ni(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new vt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=lt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||J.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=lA,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Z.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=cs(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=cs(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,s=e.a,r=e.b,n=e.c,o=e.d,a=e.tx,l=e.ty,h=this.vertexData,c=t.trim,u=t.orig,d=this._anchor;let p=0,m=0,g=0,_=0;if(c?(m=c.x-d._x*u.width,p=m+c.width,_=c.y-d._y*u.height,g=_+c.height):(m=-d._x*u.width,p=m+u.width,_=-d._y*u.height,g=_+u.height),h[0]=s*m+n*_+a,h[1]=o*_+r*m+l,h[2]=s*p+n*_+a,h[3]=o*_+r*p+l,h[4]=s*p+n*g+a,h[5]=o*g+r*p+l,h[6]=s*m+n*g+a,h[7]=o*g+r*m+l,this._roundPixels){const x=Z.RESOLUTION;for(let b=0;b<h.length;++b)h[b]=Math.round(h[b]*x)/x}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,s=t.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,l=n.c,h=n.d,c=n.tx,u=n.ty,d=-r._x*s.width,p=d+s.width,m=-r._y*s.height,g=m+s.height;e[0]=o*d+l*m+c,e[1]=h*m+a*d+u,e[2]=o*p+l*m+c,e[3]=h*m+a*p+u,e[4]=o*p+l*g+c,e[5]=h*g+a*p+u,e[6]=o*d+l*g+c,e[7]=h*g+a*d+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Jo),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,po);const e=this._texture.orig.width,s=this._texture.orig.height,r=-e*this.anchor.x;let n=0;return po.x>=r&&po.x<r+e&&(n=-s*this.anchor.y,po.y>=n&&po.y<n+s)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!s)}this._texture=null}static from(t,e){const s=t instanceof J?t:J.from(t,e);return new Qi(s)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=cs(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=cs(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||J.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const D0=new Ct;Dt.prototype._cacheAsBitmap=!1;Dt.prototype._cacheData=null;Dt.prototype._cacheAsBitmapResolution=null;Dt.prototype._cacheAsBitmapMultisample=null;class hA{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Dt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(i){i!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(i){i!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(i){if(this._cacheAsBitmap===i)return;this._cacheAsBitmap=i;let t;i?(this._cacheData||(this._cacheData=new hA),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});Dt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Dt.prototype._initCachedDisplayObject=function(t){var d,p;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const s=this.getLocalBounds(null,!0).clone();if((p=this.filters)!=null&&p.length){const m=this.filters[0].padding;s.pad(m)}s.ceil(Z.RESOLUTION);const r=t.renderTexture.current,n=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=Ws.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${$s()}`;this._cacheData.textureCacheId=h,dt.addToCache(l.baseTexture,h),J.addToCache(l,h);const c=this.transform.localTransform.copyTo(D0).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(r,n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const u=new Qi(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(s.x/s.width),u.anchor.y=-(s.y/s.height),u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)};Dt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Dt.prototype._initCachedDisplayObjectCanvas=function(t){var c;if((c=this._cacheData)!=null&&c.sprite)return;const e=this.getLocalBounds(null,!0),s=this.alpha;this.alpha=1;const r=t.canvasContext.activeContext,n=t._projTransform;e.ceil(Z.RESOLUTION);const o=Ws.create({width:e.width,height:e.height}),a=`cacheAsBitmap_${$s()}`;this._cacheData.textureCacheId=a,dt.addToCache(o.baseTexture,a),J.addToCache(o,a);const l=D0;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=r,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=s;const h=new Qi(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(e.x/e.width),h.anchor.y=-(e.y/e.height),h.alpha=s,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};Dt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Dt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Dt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,dt.removeFromCache(this._cacheData.textureCacheId),J.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Dt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};Dt.prototype.name=null;ee.prototype.getChildByName=function(t,e){for(let s=0,r=this.children.length;s<r;s++)if(this.children[s].name===t)return this.children[s];if(e)for(let s=0,r=this.children.length;s<r;s++){const n=this.children[s];if(!n.getChildByName)continue;const o=n.getChildByName(t,!0);if(o)return o}return null};Dt.prototype.getGlobalPosition=function(t=new ft,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var cA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class O0 extends mt{constructor(t=1){super(P0,cA,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const uA={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},dA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function fA(i){const t=uA[i],e=t.length;let s=dA,r="";const n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<i;a++){let l=n.replace("%index%",a.toString());o=a,a>=e&&(o=i-a-1),l=l.replace("%value%",t[o].toString()),r+=l,r+=`
`}return s=s.replace("%blur%",r),s=s.replace("%size%",i.toString()),s}const pA=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function mA(i,t){const e=Math.ceil(i/2);let s=pA,r="",n;t?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<i;o++){let a=n.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(e-1)}.0`),r+=a,r+=`
`}return s=s.replace("%blur%",r),s=s.replace("%size%",i.toString()),s}class th extends mt{constructor(t,e=8,s=4,r=mt.defaultResolution,n=5){const o=mA(n,t),a=fA(n);super(o,a),this.horizontal=t,this.resolution=r,this._quality=0,this.quality=s,this.blur=e}apply(t,e,s,r){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/e.width):this.uniforms.strength=1/s.height*(s.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,s,r);else{const n=t.getFilterTexture(),o=t.renderer;let a=e,l=n;this.state.blend=!1,t.applyFilter(this,a,l,yi.CLEAR);for(let h=1;h<this.passes-1;h++){t.bindAndClear(a,yi.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,s,r),t.returnFilterTexture(n)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class k0 extends mt{constructor(t=8,e=4,s=mt.defaultResolution,r=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new th(!0,t,e,s,r),this.blurYFilter=new th(!1,t,e,s,r),this.resolution=s,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,s,r){const n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,yi.CLEAR),this.blurYFilter.apply(t,a,s,r),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,s,r):this.blurXFilter.apply(t,e,s,r)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var gA=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class eh extends mt{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(lf,gA,t),this.alpha=1}_loadMatrix(t,e=!1){let s=t;e&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s}_multiply(t,e,s){return t[0]=e[0]*s[0]+e[1]*s[5]+e[2]*s[10]+e[3]*s[15],t[1]=e[0]*s[1]+e[1]*s[6]+e[2]*s[11]+e[3]*s[16],t[2]=e[0]*s[2]+e[1]*s[7]+e[2]*s[12]+e[3]*s[17],t[3]=e[0]*s[3]+e[1]*s[8]+e[2]*s[13]+e[3]*s[18],t[4]=e[0]*s[4]+e[1]*s[9]+e[2]*s[14]+e[3]*s[19]+e[4],t[5]=e[5]*s[0]+e[6]*s[5]+e[7]*s[10]+e[8]*s[15],t[6]=e[5]*s[1]+e[6]*s[6]+e[7]*s[11]+e[8]*s[16],t[7]=e[5]*s[2]+e[6]*s[7]+e[7]*s[12]+e[8]*s[17],t[8]=e[5]*s[3]+e[6]*s[8]+e[7]*s[13]+e[8]*s[18],t[9]=e[5]*s[4]+e[6]*s[9]+e[7]*s[14]+e[8]*s[19]+e[9],t[10]=e[10]*s[0]+e[11]*s[5]+e[12]*s[10]+e[13]*s[15],t[11]=e[10]*s[1]+e[11]*s[6]+e[12]*s[11]+e[13]*s[16],t[12]=e[10]*s[2]+e[11]*s[7]+e[12]*s[12]+e[13]*s[17],t[13]=e[10]*s[3]+e[11]*s[8]+e[12]*s[13]+e[13]*s[18],t[14]=e[10]*s[4]+e[11]*s[9]+e[12]*s[14]+e[13]*s[19]+e[14],t[15]=e[15]*s[0]+e[16]*s[5]+e[17]*s[10]+e[18]*s[15],t[16]=e[15]*s[1]+e[16]*s[6]+e[17]*s[11]+e[18]*s[16],t[17]=e[15]*s[2]+e[16]*s[7]+e[17]*s[12]+e[18]*s[17],t[18]=e[15]*s[3]+e[16]*s[8]+e[17]*s[13]+e[18]*s[18],t[19]=e[15]*s[4]+e[16]*s[9]+e[17]*s[14]+e[18]*s[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const s=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}tint(t,e){const[s,r,n]=vt.shared.setValue(t).toArray(),o=[s,0,0,0,0,0,r,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const s=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const s=Math.cos(t),r=Math.sin(t),n=Math.sqrt,o=1/3,a=n(o),l=s+(1-s)*o,h=o*(1-s)-a*r,c=o*(1-s)+a*r,u=o*(1-s)+a*r,d=s+o*(1-s),p=o*(1-s)-a*r,m=o*(1-s)-a*r,g=o*(1-s)+a*r,_=s+o*(1-s),x=[l,h,c,0,0,u,d,p,0,0,m,g,_,0,0,0,0,0,1,0];this._loadMatrix(x,e)}contrast(t,e){const s=(t||0)+1,r=-.5*(s-1),n=[s,0,0,0,r,0,s,0,0,r,0,0,s,0,r,0,0,0,1,0];this._loadMatrix(n,e)}saturate(t=0,e){const s=t*2/3+1,r=(s-1)*-.5,n=[s,r,r,0,0,r,s,r,0,0,r,r,s,0,0,0,0,0,1,0];this._loadMatrix(n,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,s,r,n){t=t||.2,e=e||.15,s=s||16770432,r=r||3375104;const o=vt.shared,[a,l,h]=o.setValue(s).toArray(),[c,u,d]=o.setValue(r).toArray(),p=[.3,.59,.11,0,0,a,l,h,t,0,c,u,d,e,0,a-c,l-u,h-d,0,0];this._loadMatrix(p,n)}night(t,e){t=t||.1;const s=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(s,e)}predator(t,e){const s=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(s,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}eh.prototype.grayscale=eh.prototype.greyscale;var _A=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class F0 extends mt{constructor(t,e){const s=new Ct;t.renderable=!1,super(vA,_A,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=s,e==null&&(e=20),this.scale=new ft(e,e)}apply(t,e,s,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),a=Math.sqrt(n.c*n.c+n.d*n.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/a,this.uniforms.rotation[3]=n.d/a),t.applyFilter(this,e,s,r)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var yA=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,xA=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class B0 extends mt{constructor(){super(xA,yA)}}var bA=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class L0 extends mt{constructor(t=.5,e=Math.random()){super(lf,bA,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const ku={AlphaFilter:O0,BlurFilter:k0,BlurFilterPass:th,ColorMatrixFilter:eh,DisplacementFilter:F0,FXAAFilter:B0,NoiseFilter:L0};Object.entries(ku).forEach(([i,t])=>{Object.defineProperty(ku,i,{get(){return ut("7.1.0",`filters.${i} has moved to ${i}`),t}})});class wA{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(jt.system.add(this.tickerUpdate,this,gs.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(jt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Cs=new wA;class to{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=to.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ft,this.page=new ft,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,s,r,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class ta extends to{constructor(){super(...arguments),this.client=new ft,this.movement=new ft,this.offset=new ft,this.global=new ft,this.screen=new ft}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,s){return t.worldTransform.applyInverse(s||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,s,r,n,o,a,l,h,c,u,d,p,m,g){throw new Error("Method not implemented.")}}class Ve extends ta{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Br extends ta{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Br.DOM_DELTA_PIXEL=0;Br.DOM_DELTA_LINE=1;Br.DOM_DELTA_PAGE=2;const TA=2048,EA=new ft,Mc=new ft;class N0{constructor(t){this.dispatch=new Qn,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((s,r)=>s.priority-r.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let s=0,r=e.length;s<r;s++)e[s].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Cs.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[r](this.rootTarget,this.rootTarget.eventMode,EA.set(t,e),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(t,e){if(!t.target)return;const s=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,n=s.length-1;r<n;r++)if(t.currentTarget=s[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let r=s.length-2;r>=0;r--)if(t.currentTarget=s[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,s=this._allInteractiveElements){if(s.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const r=Array.isArray(e)?e:[e];for(let n=s.length-1;n>=0;n--)r.forEach(o=>{t.currentTarget=s[n],this.notifyTarget(t,o)})}propagationPath(t){const e=[t];for(let s=0;s<TA&&t!==this.rootTarget;s++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,s,r,n,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Cs.pauseUpdate=!1),t.interactiveChildren&&t.children){const c=t.children;for(let u=c.length-1;u>=0;u--){const d=c[u],p=this.hitTestMoveRecursive(d,this._isInteractive(e)?e:d.eventMode,s,r,n,o||n(t,s));if(p){if(p.length>0&&!p[p.length-1].parent)continue;const m=t.isInteractive();(p.length>0||m)&&(m&&this._allInteractiveElements.push(t),p.push(t)),this._hitElements.length===0&&(this._hitElements=p),a=!0}}}const l=this._isInteractive(e),h=t.isInteractive();return h&&h&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!n(t,s)&&r(t,s)?h?[t]:[]:null}hitTestRecursive(t,e,s,r,n){if(this._interactivePrune(t)||n(t,s))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Cs.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let h=l.length-1;h>=0;h--){const c=l[h],u=this.hitTestRecursive(c,this._isInteractive(e)?e:c.eventMode,s,r,n);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const d=t.isInteractive();return(u.length>0||d)&&u.push(t),u}}}const o=this._isInteractive(e),a=t.isInteractive();return o&&r(t,s)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var s;if(t.hitArea&&(t.worldTransform.applyInverse(e,Mc),!t.hitArea.contains(Mc.x,Mc.y)))return!0;if(t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;if(r&&!((s=r.containsPoint)!=null&&s.call(r,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var n,o;e=e??t.type;const s=`on${e}`;(o=(n=t.currentTarget)[s])==null||o.call(n,t);const r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof Ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const r=e.button===2;this.dispatchEvent(e,r?"rightdown":"mousedown")}const s=this.trackingData(t.pointerId);s.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var l,h;if(!(t instanceof Ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const s=e.pointerType==="mouse"||e.pointerType==="pen",r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.overTargets);if(((l=r.overTargets)==null?void 0:l.length)>0&&n!==e.target){const c=t.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(t,c,n);if(this.dispatchEvent(u,"pointerout"),s&&this.dispatchEvent(u,"mouseout"),!e.composedPath().includes(n)){const d=this.createPointerEvent(t,"pointerleave",n);for(d.eventPhase=d.AT_TARGET;d.target&&!e.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),s&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(u)}if(n!==e.target){const c=t.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(e,c);this.dispatchEvent(u,"pointerover"),s&&this.dispatchEvent(u,"mouseover");let d=n==null?void 0:n.parent;for(;d&&d!==this.rootTarget.parent&&d!==e.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const m=this.clonePointerEvent(e,"pointerenter");for(m.eventPhase=m.AT_TARGET;m.target&&m.target!==n&&m.target!==this.rootTarget.parent;)m.currentTarget=m.target,this.notifyTarget(m),s&&this.notifyTarget(m,"mouseenter"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(u)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&o.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&o.push("globaltouchmove")),s&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(h=e.target)==null?void 0:h.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,r.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof Ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.createPointerEvent(t),r=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(o=s.target)==null?void 0:o.cursor);const n=this.clonePointerEvent(s,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;e.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(n)}mapPointerOut(t){if(!(t instanceof Ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const s=t.pointerType==="mouse"||t.pointerType==="pen",r=this.findMountedTarget(e.overTargets),n=this.createPointerEvent(t,"pointerout",r);this.dispatchEvent(n),s&&this.dispatchEvent(n,"mouseout");const o=this.createPointerEvent(t,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(n),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),s=this.createPointerEvent(t);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const a=s.button===2;this.dispatchEvent(s,a?"rightup":"mouseup")}const r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[t.button]);let o=n;if(n&&!s.composedPath().includes(n)){let a=n;for(;a&&!s.composedPath().includes(a);){if(s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const l=s.button===2;this.notifyTarget(s,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete r.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(s,"click");a.target=o,a.path=null,r.clicksByButton[t.button]||(r.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});const l=r.clicksByButton[t.button];if(l.target===a.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=e,a.detail=l.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(s)}mapPointerUpOutside(t){if(!(t instanceof Ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.findMountedTarget(e.pressTargetsByButton[t.button]),r=this.createPointerEvent(t);if(s){let n=s;for(;n;)r.currentTarget=n,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(r)}mapWheel(t){if(!(t instanceof Br)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let s=1;s<t.length&&t[s].parent===e;s++)e=t[s];return e}createPointerEvent(t,e,s){const r=this.allocateEvent(Ve);return this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=s??this.hitTest(r.global.x,r.global.y)??this._hitElements[0],typeof e=="string"&&(r.type=e),r}createWheelEvent(t){const e=this.allocateEvent(Br);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const s=this.allocateEvent(Ve);return s.nativeEvent=t.nativeEvent,s.originalEvent=t.originalEvent,this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.target=t.target,s.path=t.composedPath().slice(),s.type=e??s.type,s}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof Ve&&e instanceof Ve&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof ta&&e instanceof ta&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const s=t.currentTarget._events[e];if(s&&t.currentTarget.isInteractive())if("fn"in s)s.once&&t.currentTarget.removeListener(e,s.fn,void 0,!0),s.fn.call(s.context,t);else for(let r=0,n=s.length;r<n&&!t.propagationImmediatelyStopped;r++)s[r].once&&t.currentTarget.removeListener(e,s[r].fn,void 0,!0),s[r].fn.call(s[r].context,t)}}const AA=1,CA={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Fu=class{constructor(i){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=i,this.rootBoundary=new N0(null),Cs.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ve(null),this.rootWheelEvent=new Br(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Fu.defaultEventFeatures},{set:(t,e,s)=>(e==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[e]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(i){const{view:t,resolution:e}=this.renderer;this.setTargetElement(t),this.resolution=e,Fu._defaultEventMode=i.eventMode??"auto",Object.assign(this.features,i.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(i){this.resolution=i}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(i){i=i||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===i)return;this.currentCursor=i;const e=this.cursorStyles[i];if(e)switch(typeof e){case"string":t&&(this.domElement.style.cursor=e);break;case"function":e(i);break;case"object":t&&Object.assign(this.domElement.style,e);break}else t&&typeof i=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,i)&&(this.domElement.style.cursor=i)}get pointer(){return this.rootPointerEvent}onPointerDown(i){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&i.pointerType==="touch"))return;const t=this.normalizeToPointerData(i);this.autoPreventDefault&&t[0].isNormalized&&(i.cancelable||!("cancelable"in i))&&i.preventDefault();for(let e=0,s=t.length;e<s;e++){const r=t[e],n=this.bootstrapEvent(this.rootPointerEvent,r);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(i){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&i.pointerType==="touch"))return;Cs.pointerMoved();const t=this.normalizeToPointerData(i);for(let e=0,s=t.length;e<s;e++){const r=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(i){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&i.pointerType==="touch"))return;let t=i.target;i.composedPath&&i.composedPath().length>0&&(t=i.composedPath()[0]);const e=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(i);for(let r=0,n=s.length;r<n;r++){const o=this.bootstrapEvent(this.rootPointerEvent,s[r]);o.type+=e,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(i){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&i.pointerType==="touch"))return;const t=this.normalizeToPointerData(i);for(let e=0,s=t.length;e<s;e++){const r=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onWheel(i){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(i);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(i){this.removeEvents(),this.domElement=i,Cs.domElement=i,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Cs.addTickerListener();const i=this.domElement.style;i&&(globalThis.navigator.msPointerEnabled?(i.msContentZooming="none",i.msTouchAction="none"):this.supportsPointerEvents&&(i.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Cs.removeTickerListener();const i=this.domElement.style;globalThis.navigator.msPointerEnabled?(i.msContentZooming="",i.msTouchAction=""):this.supportsPointerEvents&&(i.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(i,t,e){let s;this.domElement.parentElement?s=this.domElement.getBoundingClientRect():s={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const r=1/this.resolution;i.x=(t-s.left)*(this.domElement.width/s.width)*r,i.y=(e-s.top)*(this.domElement.height/s.height)*r}normalizeToPointerData(i){const t=[];if(this.supportsTouchEvents&&i instanceof TouchEvent)for(let e=0,s=i.changedTouches.length;e<s;e++){const r=i.changedTouches[e];typeof r.button>"u"&&(r.button=0),typeof r.buttons>"u"&&(r.buttons=1),typeof r.isPrimary>"u"&&(r.isPrimary=i.touches.length===1&&i.type==="touchstart"),typeof r.width>"u"&&(r.width=r.radiusX||1),typeof r.height>"u"&&(r.height=r.radiusY||1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="touch"),typeof r.pointerId>"u"&&(r.pointerId=r.identifier||0),typeof r.pressure>"u"&&(r.pressure=r.force||.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),typeof r.layerX>"u"&&(r.layerX=r.offsetX=r.clientX),typeof r.layerY>"u"&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=i.type,t.push(r)}else if(!globalThis.MouseEvent||i instanceof MouseEvent&&(!this.supportsPointerEvents||!(i instanceof globalThis.PointerEvent))){const e=i;typeof e.isPrimary>"u"&&(e.isPrimary=!0),typeof e.width>"u"&&(e.width=1),typeof e.height>"u"&&(e.height=1),typeof e.tiltX>"u"&&(e.tiltX=0),typeof e.tiltY>"u"&&(e.tiltY=0),typeof e.pointerType>"u"&&(e.pointerType="mouse"),typeof e.pointerId>"u"&&(e.pointerId=AA),typeof e.pressure>"u"&&(e.pressure=.5),typeof e.twist>"u"&&(e.twist=0),typeof e.tangentialPressure>"u"&&(e.tangentialPressure=0),e.isNormalized=!0,t.push(e)}else t.push(i);return t}normalizeWheelEvent(i){const t=this.rootWheelEvent;return this.transferMouseData(t,i),t.deltaX=i.deltaX,t.deltaY=i.deltaY,t.deltaZ=i.deltaZ,t.deltaMode=i.deltaMode,this.mapPositionToPoint(t.screen,i.clientX,i.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=i,t.type=i.type,t}bootstrapEvent(i,t){return i.originalEvent=null,i.nativeEvent=t,i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist,this.transferMouseData(i,t),this.mapPositionToPoint(i.screen,t.clientX,t.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.isTrusted=t.isTrusted,i.type==="pointerleave"&&(i.type="pointerout"),i.type.startsWith("mouse")&&(i.type=i.type.replace("mouse","pointer")),i.type.startsWith("touch")&&(i.type=CA[i.type]||i.type),i}transferMouseData(i,t){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.x=t.clientX,i.client.y=t.clientY,i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.x=t.movementX,i.movement.y=t.movementY,i.page.x=t.pageX,i.page.y=t.pageY,i.relatedTarget=null,i.shiftKey=t.shiftKey}};let $n=Fu;$n.extension={name:"events",type:[Q.RendererSystem,Q.CanvasRendererSystem]};$n.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};nt.add($n);function Pm(i){return i==="dynamic"||i==="static"}const U0={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Pm($n.defaultEventMode)},set interactive(i){ut("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=i,this.eventMode=i?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??$n.defaultEventMode},set eventMode(i){this._internalInteractive=Pm(i),this._internalEventMode=i},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(i,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,r=typeof t=="function"?void 0:t;i=s?`${i}capture`:i,t=typeof t=="function"?t:t.handleEvent,this.on(i,t,r)},removeEventListener(i,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,r=typeof t=="function"?void 0:t;i=s?`${i}capture`:i,t=typeof t=="function"?t:t.handleEvent,this.off(i,t,r)},dispatchEvent(i){if(!(i instanceof to))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return i.defaultPrevented=!1,i.path=null,i.target=this,i.manager.dispatchEvent(i),!i.defaultPrevented}};Dt.mixin(U0);const $0={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Dt.mixin($0);const SA=9,hl=100,PA=0,IA=0,Im=2,Mm=1,MA=-1e3,RA=-1e3,DA=2;class pf{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ti.tablet||Ti.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${hl}px`,e.style.height=`${hl}px`,e.style.position="absolute",e.style.top=`${PA}px`,e.style.left=`${IA}px`,e.style.zIndex=Im.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${Mm}px`,t.style.height=`${Mm}px`,t.style.position="absolute",t.style.top=`${MA}px`,t.style.left=`${RA}px`,t.style.zIndex=DA.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let s=0;s<e.length;s++)this.updateAccessibleObjects(e[s])}update(){const t=performance.now();if(Ti.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:s,width:r,height:n}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,h=r/o*l,c=n/a*l;let u=this.div;u.style.left=`${e}px`,u.style.top=`${s}px`,u.style.width=`${o}px`,u.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const p=this.children[d];if(p.renderId!==this.renderId)p._accessibleActive=!1,Ar(this.children,d,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,d--;else{u=p._accessibleDiv;let m=p.hitArea;const g=p.worldTransform;p.hitArea?(u.style.left=`${(g.tx+m.x*g.a)*h}px`,u.style.top=`${(g.ty+m.y*g.d)*c}px`,u.style.width=`${m.width*g.a*h}px`,u.style.height=`${m.height*g.d*c}px`):(m=p.getBounds(),this.capHitArea(m),u.style.left=`${m.x*h}px`,u.style.top=`${m.y*c}px`,u.style.width=`${m.width*h}px`,u.style.height=`${m.height*c}px`,u.title!==p.accessibleTitle&&p.accessibleTitle!==null&&(u.title=p.accessibleTitle),u.getAttribute("aria-label")!==p.accessibleHint&&p.accessibleHint!==null&&u.setAttribute("aria-label",p.accessibleHint)),(p.accessibleTitle!==u.title||p.tabIndex!==u.tabIndex)&&(u.title=p.accessibleTitle,u.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:s}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>s&&(t.height=s-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${hl}px`,e.style.height=`${hl}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Im.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:s}=t.target,r=this.renderer.events.rootBoundary,n=Object.assign(new to(r),{target:s});r.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>r.dispatchEvent(n,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===SA&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}pf.extension={name:"accessibility",type:[Q.RendererPlugin,Q.CanvasRendererPlugin]};nt.add(pf);const Bu=class{constructor(i){this.stage=new ee,i=Object.assign({forceCanvas:!1},i),this.renderer=S0(i),Bu._plugins.forEach(t=>{t.init.call(this,i)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(i,t){const e=Bu._plugins.slice(0);e.reverse(),e.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(i),this.renderer=null}};let zh=Bu;zh._plugins=[];nt.handleByList(Q.Application,zh._plugins);class mf{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,s;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;e=r,s=n}this.renderer.resize(e,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}mf.extension=Q.Application;nt.add(mf);const Rm={loader:Q.LoadParser,resolver:Q.ResolveParser,cache:Q.CacheParser,detection:Q.DetectionParser};nt.handle(Q.Asset,i=>{const t=i.ref;Object.entries(Rm).filter(([e])=>!!t[e]).forEach(([e,s])=>nt.add(Object.assign(t[e],{extension:t[e].extension??s})))},i=>{const t=i.ref;Object.keys(Rm).filter(e=>!!t[e]).forEach(e=>nt.remove(t[e]))});class OA{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<e;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function eo(i,t){if(Array.isArray(t)){for(const e of t)if(i.startsWith(`data:${e}`))return!0;return!1}return i.startsWith(`data:${t}`)}function Xs(i,t){const e=i.split("?")[0],s=le.extname(e).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const zi=(i,t)=>(Array.isArray(i)||(i=[i]),t?i.map(e=>typeof e=="string"?t(e):e):i),ih=(i,t)=>{const e=t.split("?")[1];return e&&(i+=`?${e}`),i};function G0(i,t,e,s,r){const n=t[e];for(let o=0;o<n.length;o++){const a=n[o];e<t.length-1?G0(i.replace(s[e],a),t,e+1,s,r):r.push(i.replace(s[e],a))}}function H0(i){const t=/\{(.*?)\}/g,e=i.match(t),s=[];if(e){const r=[];e.forEach(n=>{const o=n.substring(1,n.length-1).split(",");r.push(o)}),G0(i,r,0,e,s)}else s.push(i);return s}const ea=i=>!Array.isArray(i);class kA{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const s=zi(t);let r;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(e)){r=l.getCacheableAssets(s,e);break}}r||(r={},s.forEach(a=>{r[a]=e}));const n=Object.keys(r),o={cacheKeys:n,keys:s};if(s.forEach(a=>{this._cacheMap.set(a,o)}),n.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==e&&console.warn("[Cache] already has key:",a),this._cache.set(a,r[a])}),e instanceof J){const a=e;s.forEach(l=>{a.baseTexture!==J.EMPTY.baseTexture&&dt.addToCache(a.baseTexture,l),J.addToCache(a,l)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(r=>{this._cache.delete(r)}),e.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const dn=new kA;let FA=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,s)=>(this._parsersValidated=!1,t[e]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const s={promise:null,parser:null};return s.promise=(async()=>{var o,a;let r=null,n=null;if(e.loadParser&&(n=this._parserHash[e.loadParser],n||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!n){for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.load&&((o=h.test)!=null&&o.call(h,t,e,this))){n=h;break}}if(!n)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await n.load(t,e,this),s.parser=n;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];h.parse&&h.parse&&await((a=h.testParse)==null?void 0:a.call(h,r,e,this))&&(r=await h.parse(r,e,this)||r,s.parser=h)}return r})(),s}async load(t,e){this._parsersValidated||this._validateParsers();let s=0;const r={},n=ea(t),o=zi(t,h=>({src:h})),a=o.length,l=o.map(async h=>{const c=le.toAbsolute(h.src);if(!r[h.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,h)),r[h.src]=await this.promiseCache[c].promise,e&&e(++s/a)}catch(u){throw delete this.promiseCache[c],delete r[h.src],new Error(`[Loader.load] Failed to load ${c}.
${u}`)}});return await Promise.all(l),n?r[o[0].src]:r}async unload(t){const s=zi(t,r=>({src:r})).map(async r=>{var a,l;const n=le.toAbsolute(r.src),o=this.promiseCache[n];if(o){const h=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,h,r,this),delete this.promiseCache[n]}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}};var Ri=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(Ri||{});const BA=".json",LA="application/json",z0={extension:{type:Q.LoadParser,priority:Ri.Low},name:"loadJson",test(i){return eo(i,LA)||Xs(i,BA)},async load(i){return await(await Z.ADAPTER.fetch(i)).json()}};nt.add(z0);const NA=".txt",UA="text/plain",V0={name:"loadTxt",extension:{type:Q.LoadParser,priority:Ri.Low},test(i){return eo(i,UA)||Xs(i,NA)},async load(i){return await(await Z.ADAPTER.fetch(i)).text()}};nt.add(V0);const $A=["normal","bold","100","200","300","400","500","600","700","800","900"],GA=[".ttf",".otf",".woff",".woff2"],HA=["font/ttf","font/otf","font/woff","font/woff2"],zA=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function j0(i){const t=le.extname(i),r=le.basename(i,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let n=r.length>0;for(const a of r)if(!a.match(zA)){n=!1;break}let o=r.join(" ");return n||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const W0={extension:{type:Q.LoadParser,priority:Ri.Low},name:"loadWebFont",test(i){return eo(i,HA)||Xs(i,GA)},async load(i,t){var s,r,n;const e=Z.ADAPTER.getFontFaceSet();if(e){const o=[],a=((s=t.data)==null?void 0:s.family)??j0(i),l=((n=(r=t.data)==null?void 0:r.weights)==null?void 0:n.filter(c=>$A.includes(c)))??["normal"],h=t.data??{};for(let c=0;c<l.length;c++){const u=l[c],d=new FontFace(a,`url(${encodeURI(i)})`,{...h,weight:u});await d.load(),e.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){(Array.isArray(i)?i:[i]).forEach(t=>Z.ADAPTER.getFontFaceSet().delete(t))}};nt.add(W0);let Dm=0,Rc;const VA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",jA={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${VA}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},WA={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Dc;class XA{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const e=URL.createObjectURL(new Blob([jA.code],{type:"application/javascript"})),s=new Worker(e);s.addEventListener("message",r=>{s.terminate(),URL.revokeObjectURL(e),t(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Rc===void 0&&(Rc=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Rc&&(Dc||(Dc=URL.createObjectURL(new Blob([WA.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Dc),t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const s=new Promise((r,n)=>{this.queue.push({id:t,arguments:e,resolve:r,reject:n})});return this.next(),s}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),s=e.id;this.resolveHash[Dm]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Dm++,id:s})}}const Om=new XA;function Ia(i,t,e){const s=new J(i);return s.baseTexture.on("dispose",()=>{delete t.promiseCache[e]}),s}const YA=[".jpeg",".jpg",".png",".webp",".avif"],qA=["image/jpeg","image/png","image/webp","image/avif"];async function X0(i){const t=await Z.ADAPTER.fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const Ma={name:"loadTextures",extension:{type:Q.LoadParser,priority:Ri.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return eo(i,qA)||Xs(i,YA)},async load(i,t,e){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Om.isImageBitmapSupported()?s=await Om.loadImageBitmap(i):s=await X0(i):s=await new Promise(n=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=i,s.complete?n(s):s.onload=()=>{n(s)}});const r=new dt(s,{resolution:fs(i),...t.data});return r.resource.src=i,Ia(r,e,i)},unload(i){i.destroy(!0)}};nt.add(Ma);const KA=".svg",ZA="image/svg+xml",Y0={extension:{type:Q.LoadParser,priority:Ri.High},name:"loadSVG",test(i){return eo(i,ZA)||Xs(i,KA)},async testParse(i){return Un.test(i)},async parse(i,t,e){var o;const s=new Un(i,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);await s.load();const r=new dt(s,{resolution:fs(i),...t==null?void 0:t.data});return r.resource.src=i,Ia(r,e,i)},async load(i,t){return(await Z.ADAPTER.fetch(i)).text()},unload:Ma.unload};nt.add(Y0);class QA{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const s=[];Array.isArray(e)?e.forEach(r=>{if(typeof r.name=="string"){const n=this._createBundleAssetId(t,r.name);s.push(n),this.add([r.name,n],r.srcs,r.data)}else{const n=r.name.map(o=>this._createBundleAssetId(t,o));n.forEach(o=>{s.push(o)}),this.add([...r.name,...n],r.srcs)}}):Object.keys(e).forEach(r=>{s.push(this._createBundleAssetId(t,r)),this.add([r,this._createBundleAssetId(t,r)],e[r])}),this._bundles[t]=s}add(t,e,s){const r=zi(t);r.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(e)||(typeof e=="string"?e=H0(e):e=[e]);const n=e.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let h=0;h<this._parsers.length;h++){const c=this._parsers[h];if(c.test(o)){a=c.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=r),(this._basePath||this._rootPath)&&(a.src=le.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??s,a});r.forEach(o=>{this._assetMap[o]=n})}resolveBundle(t){const e=ea(t);t=zi(t);const s={};return t.forEach(r=>{const n=this._bundles[r];if(n){const o=this.resolve(n),a={};for(const l in o){const h=o[l];a[this._extractAssetIdFromBundle(r,l)]=h}s[r]=a}}),e?s[t[0]]:s}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const s={};for(const r in e)s[r]=e[r].src;return s}return e.src}resolve(t){const e=ea(t);t=zi(t);const s={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let n=this._assetMap[r];const o=this._getPreferredOrder(n),a=n[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(h=>{const c=n.filter(u=>u[l]?u[l]===h:!1);c.length&&(n=c)})}),this._resolverHash[r]=n[0]??a}else{let n=r;(this._basePath||this._rootPath)&&(n=le.toAbsolute(n,this._basePath,this._rootPath)),n=this._appendDefaultSearchParams(n),this._resolverHash[r]={src:n}}s[r]=this._resolverHash[r]}),e?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const s=t[0],r=this._preferredOrder.find(n=>n.params.format.includes(s.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}}class q0{constructor(){this._detections=[],this._initialized=!1,this.resolver=new QA,this.loader=new FA,this.cache=dn,this._backgroundLoader=new OA(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var n,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const e=((n=t.texturePreference)==null?void 0:n.resolution)??1,s=typeof e=="number"?[e]:e;let r=[];if((o=t.texturePreference)!=null&&o.format){const l=(a=t.texturePreference)==null?void 0:a.format;r=typeof l=="string"?[l]:l;for(const h of this._detections)await h.test()||(r=await h.remove(r))}else for(const l of this._detections)await l.test()&&(r=await l.add(r));this.resolver.prefer({params:{format:r,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,s){this.resolver.add(t,e,s)}async load(t,e){this._initialized||await this.init();const s=ea(t),r=zi(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),n=this.resolver.resolve(r),o=await this._mapLoadToResolve(n,e);return s?o[r[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const r=this.resolver.resolveBundle(t),n={},o=Object.keys(r);let a=0,l=0;const h=()=>{e==null||e(++a/l)},c=o.map(u=>{const d=r[u];return l+=Object.keys(d).length,this._mapLoadToResolve(d,h).then(p=>{n[u]=p})});return await Promise.all(c),s?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return dn.get(t);const e={};for(let s=0;s<t.length;s++)e[s]=dn.get(t[s]);return e}async _mapLoadToResolve(t,e){const s=Object.values(t),r=Object.keys(t);this._backgroundLoader.active=!1;const n=await this.loader.load(s,e);this._backgroundLoader.active=!0;const o={};return s.forEach((a,l)=>{const h=n[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[r[l]]=h,dn.set(c,h)}),o}async unload(t){this._initialized||await this.init();const e=zi(t).map(r=>typeof r!="string"?r.src:r),s=this.resolver.resolve(e);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=zi(t);const e=this.resolver.resolveBundle(t),s=Object.keys(e).map(r=>this._unloadFromResolved(e[r]));await Promise.all(s)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(s=>{dn.remove(s.src)}),await this.loader.unload(e)}get detections(){return this._detections}get preferWorkers(){return Ma.config.preferWorkers}set preferWorkers(t){ut("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(s=>s in t).forEach(s=>{e.config[s]=t[s]})})}}const br=new q0;nt.handleByList(Q.LoadParser,br.loader.parsers).handleByList(Q.ResolveParser,br.resolver.parsers).handleByList(Q.CacheParser,br.cache.parsers).handleByList(Q.DetectionParser,br.detections);const K0={extension:Q.CacheParser,test:i=>Array.isArray(i)&&i.every(t=>t instanceof J),getCacheableAssets:(i,t)=>{const e={};return i.forEach(s=>{t.forEach((r,n)=>{e[s+(n===0?"":n+1)]=r})}),e}};nt.add(K0);const Z0={extension:{type:Q.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const i="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await Z.ADAPTER.fetch(i).then(e=>e.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async i=>[...i,"avif"],remove:async i=>i.filter(t=>t!=="avif")};nt.add(Z0);const Q0={extension:{type:Q.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const i="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await Z.ADAPTER.fetch(i).then(e=>e.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async i=>[...i,"webp"],remove:async i=>i.filter(t=>t!=="webp")};nt.add(Q0);const km=["png","jpg","jpeg"],J0={extension:{type:Q.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...km],remove:async i=>i.filter(t=>!km.includes(t))};nt.add(J0);const tv={extension:Q.ResolveParser,test:Ma.test,parse:i=>{var t;return{resolution:parseFloat(((t=Z.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:i.split(".").pop(),src:i}}};nt.add(tv);var be=(i=>(i[i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",i[i.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",i[i.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",i[i.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",i[i.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",i[i.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",i[i.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",i[i.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",i[i.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",i))(be||{});const ia={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let ns,fn;function Fm(){fn={s3tc:ns.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ns.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:ns.getExtension("WEBGL_compressed_texture_etc"),etc1:ns.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:ns.getExtension("WEBGL_compressed_texture_pvrtc")||ns.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:ns.getExtension("WEBGL_compressed_texture_atc"),astc:ns.getExtension("WEBGL_compressed_texture_astc")}}const ev={extension:{type:Q.DetectionParser,priority:2},test:async()=>{const t=Z.ADAPTER.createCanvas().getContext("webgl");return t?(ns=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async i=>{fn||Fm();const t=[];for(const e in fn)fn[e]&&t.push(e);return[...t,...i]},remove:async i=>(fn||Fm(),i.filter(t=>!(t in fn)))};nt.add(ev);class iv extends Jn{constructor(t,e={width:1,height:1,autoLoad:!0}){let s,r;typeof t=="string"?(s=t,r=new Uint8Array):(s=null,r=t),super(r,e),this.origin=s,this.buffer=r?new ql(r):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new ql(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Fs extends iv{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Fs._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Fs._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,s){const r=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:h,levelHeight:c,levelBuffer:u}=this._levelBuffers[o];r.compressedTexImage2D(r.TEXTURE_2D,l,this.format,h,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=Fs._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,s,r,n,o,a){const l=new Array(s);let h=t.byteOffset,c=o,u=a,d=c+r-1&~(r-1),p=u+n-1&~(n-1),m=d*p*ia[e];for(let g=0;g<s;g++)l[g]={levelID:g,levelWidth:s>1?c:d,levelHeight:s>1?u:p,levelBuffer:new Uint8Array(t.buffer,h,m)},h+=m,c=c>>1||1,u=u>>1||1,d=c+r-1&~(r-1),p=u+n-1&~(n-1),m=d*p*ia[e];return l}}const Oc=4,cl=124,JA=32,Bm=20,tC=542327876,ul={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},eC={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},dl={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},iC=1,sC=2,rC=4,nC=64,oC=512,aC=131072,lC=827611204,hC=861165636,cC=894720068,uC=808540228,dC=4,fC={[lC]:be.COMPRESSED_RGBA_S3TC_DXT1_EXT,[hC]:be.COMPRESSED_RGBA_S3TC_DXT3_EXT,[cC]:be.COMPRESSED_RGBA_S3TC_DXT5_EXT},pC={70:be.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:be.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:be.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:be.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:be.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:be.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:be.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:be.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:be.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function sv(i){const t=new Uint32Array(i);if(t[0]!==tC)throw new Error("Invalid DDS file magic word");const s=new Uint32Array(i,0,cl/Uint32Array.BYTES_PER_ELEMENT),r=s[ul.HEIGHT],n=s[ul.WIDTH],o=s[ul.MIPMAP_COUNT],a=new Uint32Array(i,ul.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,JA/Uint32Array.BYTES_PER_ELEMENT),l=a[iC];if(l&rC){const h=a[eC.FOURCC];if(h!==uC){const y=fC[h],w=Oc+cl,T=new Uint8Array(i,w);return[new Fs(T,{format:y,width:n,height:r,levels:o})]}const c=Oc+cl,u=new Uint32Array(t.buffer,c,Bm/Uint32Array.BYTES_PER_ELEMENT),d=u[dl.DXGI_FORMAT],p=u[dl.RESOURCE_DIMENSION],m=u[dl.MISC_FLAG],g=u[dl.ARRAY_SIZE],_=pC[d];if(_===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(m===dC)throw new Error("DDSParser does not support cubemap textures");if(p===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,b=Oc+cl+Bm;if(g===1)x.push(new Uint8Array(i,b));else{const y=ia[_];let w=0,T=n,D=r;for(let P=0;P<o;P++){const S=Math.max(1,T+3&-4),M=Math.max(1,D+3&-4),O=S*M*y;w+=O,T=T>>>1,D=D>>>1}let I=b;for(let P=0;P<g;P++)x.push(new Uint8Array(i,I,w)),I+=w}return x.map(y=>new Fs(y,{format:_,width:n,height:r,levels:o}))}throw l&nC?new Error("DDSParser does not support uncompressed texture data."):l&oC?new Error("DDSParser does not supported YUV uncompressed texture data."):l&aC?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&sC?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Lm=[171,75,84,88,32,49,49,187,13,10,26,10],mC=67305985,mi={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Lu=64,Nu={[ot.UNSIGNED_BYTE]:1,[ot.UNSIGNED_SHORT]:2,[ot.INT]:4,[ot.UNSIGNED_INT]:4,[ot.FLOAT]:4,[ot.HALF_FLOAT]:8},rv={[Y.RGBA]:4,[Y.RGB]:3,[Y.RG]:2,[Y.RED]:1,[Y.LUMINANCE]:1,[Y.LUMINANCE_ALPHA]:2,[Y.ALPHA]:1},nv={[ot.UNSIGNED_SHORT_4_4_4_4]:2,[ot.UNSIGNED_SHORT_5_5_5_1]:2,[ot.UNSIGNED_SHORT_5_6_5]:2};function ov(i,t,e=!1){const s=new DataView(t);if(!gC(i,s))return null;const r=s.getUint32(mi.ENDIANNESS,!0)===mC,n=s.getUint32(mi.GL_TYPE,r),o=s.getUint32(mi.GL_FORMAT,r),a=s.getUint32(mi.GL_INTERNAL_FORMAT,r),l=s.getUint32(mi.PIXEL_WIDTH,r),h=s.getUint32(mi.PIXEL_HEIGHT,r)||1,c=s.getUint32(mi.PIXEL_DEPTH,r)||1,u=s.getUint32(mi.NUMBER_OF_ARRAY_ELEMENTS,r)||1,d=s.getUint32(mi.NUMBER_OF_FACES,r),p=s.getUint32(mi.NUMBER_OF_MIPMAP_LEVELS,r),m=s.getUint32(mi.BYTES_OF_KEY_VALUE_DATA,r);if(h===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");const g=4,_=4,x=l+3&-4,b=h+3&-4,y=new Array(u);let w=l*h;n===0&&(w=x*b);let T;if(n!==0?Nu[n]?T=Nu[n]*rv[o]:T=nv[n]:T=ia[a],T===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const D=e?vC(s,m,r):null;let P=w*T,S=l,M=h,O=x,N=b,B=Lu+m;for(let F=0;F<p;F++){const U=s.getUint32(B,r);let V=B+4;for(let k=0;k<u;k++){let W=y[k];W||(W=y[k]=new Array(p)),W[F]={levelID:F,levelWidth:p>1||n!==0?S:O,levelHeight:p>1||n!==0?M:N,levelBuffer:new Uint8Array(t,V,P)},V+=P}B+=U+4,B=B%4!==0?B+4-B%4:B,S=S>>1||1,M=M>>1||1,O=S+g-1&~(g-1),N=M+_-1&~(_-1),P=O*N*T}return n!==0?{uncompressed:y.map(F=>{let U=F[0].levelBuffer,V=!1;return n===ot.FLOAT?U=new Float32Array(F[0].levelBuffer.buffer,F[0].levelBuffer.byteOffset,F[0].levelBuffer.byteLength/4):n===ot.UNSIGNED_INT?(V=!0,U=new Uint32Array(F[0].levelBuffer.buffer,F[0].levelBuffer.byteOffset,F[0].levelBuffer.byteLength/4)):n===ot.INT&&(V=!0,U=new Int32Array(F[0].levelBuffer.buffer,F[0].levelBuffer.byteOffset,F[0].levelBuffer.byteLength/4)),{resource:new Jn(U,{width:F[0].levelWidth,height:F[0].levelHeight}),type:n,format:V?_C(o):o}}),kvData:D}:{compressed:y.map(F=>new Fs(null,{format:a,width:l,height:h,levels:p,levelBuffers:F})),kvData:D}}function gC(i,t){for(let e=0;e<Lm.length;e++)if(t.getUint8(e)!==Lm[e])return console.error(`${i} is not a valid *.ktx file!`),!1;return!0}function _C(i){switch(i){case Y.RGBA:return Y.RGBA_INTEGER;case Y.RGB:return Y.RGB_INTEGER;case Y.RG:return Y.RG_INTEGER;case Y.RED:return Y.RED_INTEGER;default:return i}}function vC(i,t,e){const s=new Map;let r=0;for(;r<t;){const n=i.getUint32(Lu+r,e),o=Lu+r+4,a=3-(n+3)%4;if(n===0||n>t-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<n&&i.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(i.buffer,o,l)),c=new DataView(i.buffer,o+l+1,n-l-1);s.set(h,c),r+=4+n+a}return s}const av={extension:{type:Q.LoadParser,priority:Ri.High},name:"loadDDS",test(i){return Xs(i,".dds")},async load(i,t,e){const r=await(await Z.ADAPTER.fetch(i)).arrayBuffer(),o=sv(r).map(a=>{const l=new dt(a,{mipmap:Mi.OFF,alphaMode:hi.NO_PREMULTIPLIED_ALPHA,resolution:fs(i),...t.data});return Ia(l,e,i)});return o.length===1?o[0]:o},unload(i){Array.isArray(i)?i.forEach(t=>t.destroy(!0)):i.destroy(!0)}};nt.add(av);const lv={extension:{type:Q.LoadParser,priority:Ri.High},name:"loadKTX",test(i){return Xs(i,".ktx")},async load(i,t,e){const r=await(await Z.ADAPTER.fetch(i)).arrayBuffer(),{compressed:n,uncompressed:o,kvData:a}=ov(i,r),l=n??o,h={mipmap:Mi.OFF,alphaMode:hi.NO_PREMULTIPLIED_ALPHA,resolution:fs(i),...t.data},c=l.map(u=>{l===o&&Object.assign(h,{type:u.type,format:u.format});const d=new dt(u,h);return d.ktxKeyValueData=a,Ia(d,e,i)});return c.length===1?c[0]:c},unload(i){Array.isArray(i)?i.forEach(t=>t.destroy(!0)):i.destroy(!0)}};nt.add(lv);const hv={extension:Q.ResolveParser,test:i=>{const e=i.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(e)},parse:i=>{var s,r;if(i.split("?")[0].split(".").pop()==="ktx"){const n=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(n.some(o=>i.endsWith(o)))return{resolution:parseFloat(((s=Z.RETINA_PREFIX.exec(i))==null?void 0:s[1])??"1"),format:n.find(o=>i.endsWith(o)),src:i}}return{resolution:parseFloat(((r=Z.RETINA_PREFIX.exec(i))==null?void 0:r[1])??"1"),format:i.split(".").pop(),src:i}}};nt.add(hv);const yC=new pt,xC=4,To=class{constructor(i){this.renderer=i}async image(i,t,e){const s=new Image;return s.src=await this.base64(i,t,e),s}async base64(i,t,e){const s=this.canvas(i);if(s.toBlob!==void 0)return new Promise((r,n)=>{s.toBlob(o=>{if(!o){n(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>r(a.result),a.onerror=n,a.readAsDataURL(o)},t,e)});if(s.toDataURL!==void 0)return s.toDataURL(t,e);if(s.convertToBlob!==void 0){const r=await s.convertToBlob({type:t,quality:e});return new Promise((n,o)=>{const a=new FileReader;a.onload=()=>n(a.result),a.onerror=o,a.readAsDataURL(r)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(i,t){const{pixels:e,width:s,height:r,flipY:n}=this._rawPixels(i,t);n&&To._flipY(e,s,r),To._unpremultiplyAlpha(e);const o=new Z_(s,r,1),a=new ImageData(new Uint8ClampedArray(e.buffer),s,r);return o.context.putImageData(a,0,0),o.canvas}pixels(i,t){const{pixels:e,width:s,height:r,flipY:n}=this._rawPixels(i,t);return n&&To._flipY(e,s,r),To._unpremultiplyAlpha(e),e}_rawPixels(i,t){const e=this.renderer;if(!e)throw new Error("The Extract has already been destroyed");let s,r=!1,n,o=!1;if(i&&(i instanceof Ws?n=i:(n=e.generateTexture(i,{resolution:e.resolution,multisample:e.multisample}),o=!0)),n){if(s=n.baseTexture.resolution,t=t??n.frame,r=!1,!o){e.renderTexture.bind(n);const u=n.framebuffer.glFramebuffers[e.CONTEXT_UID];u.blitFramebuffer&&e.framebuffer.bind(u.blitFramebuffer)}}else s=e.resolution,t||(t=yC,t.width=e.width/s,t.height=e.height/s),r=!0,e.renderTexture.bind();const a=Math.round(t.width*s),l=Math.round(t.height*s),h=new Uint8Array(xC*a*l),c=e.gl;return c.readPixels(Math.round(t.x*s),Math.round(t.y*s),a,l,c.RGBA,c.UNSIGNED_BYTE,h),o&&(n==null||n.destroy(!0)),{pixels:h,width:a,height:l,flipY:r}}destroy(){this.renderer=null}static _flipY(i,t,e){const s=t<<2,r=e>>1,n=new Uint8Array(s);for(let o=0;o<r;o++){const a=o*s,l=(e-o-1)*s;n.set(i.subarray(a,a+s)),i.copyWithin(a,l,l+s),i.set(n,l)}}static _unpremultiplyAlpha(i){i instanceof Uint8ClampedArray&&(i=new Uint8Array(i.buffer));const t=i.length;for(let e=0;e<t;e+=4){const s=i[e+3];if(s!==0){const r=255.001/s;i[e]=i[e]*r+.5,i[e+1]=i[e+1]*r+.5,i[e+2]=i[e+2]*r+.5}}}};let gf=To;gf.extension={name:"extract",type:Q.RendererSystem};nt.add(gf);const sa={build(i){const t=i.points;let e,s,r,n,o,a;if(i.type===Jt.CIRC){const m=i.shape;e=m.x,s=m.y,o=a=m.radius,r=n=0}else if(i.type===Jt.ELIP){const m=i.shape;e=m.x,s=m.y,o=m.width,a=m.height,r=n=0}else{const m=i.shape,g=m.width/2,_=m.height/2;e=m.x+g,s=m.y+_,o=a=Math.max(0,Math.min(m.radius,Math.min(g,_))),r=g-o,n=_-a}if(!(o>=0&&a>=0&&r>=0&&n>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),h=l*8+(r?4:0)+(n?4:0);if(t.length=h,h===0)return;if(l===0){t.length=8,t[0]=t[6]=e+r,t[1]=t[3]=s+n,t[2]=t[4]=e-r,t[5]=t[7]=s-n;return}let c=0,u=l*4+(r?2:0)+2,d=u,p=h;{const m=r+o,g=n,_=e+m,x=e-m,b=s+g;if(t[c++]=_,t[c++]=b,t[--u]=b,t[--u]=x,n){const y=s-g;t[d++]=x,t[d++]=y,t[--p]=y,t[--p]=_}}for(let m=1;m<l;m++){const g=Math.PI/2*(m/l),_=r+Math.cos(g)*o,x=n+Math.sin(g)*a,b=e+_,y=e-_,w=s+x,T=s-x;t[c++]=b,t[c++]=w,t[--u]=w,t[--u]=y,t[d++]=y,t[d++]=T,t[--p]=T,t[--p]=b}{const m=r,g=n+a,_=e+m,x=e-m,b=s+g,y=s-g;t[c++]=_,t[c++]=b,t[--p]=y,t[--p]=_,r&&(t[c++]=x,t[c++]=b,t[--p]=y,t[--p]=x)}},triangulate(i,t){const e=i.points,s=t.points,r=t.indices;if(e.length===0)return;let n=s.length/2;const o=n;let a,l;if(i.type!==Jt.RREC){const c=i.shape;a=c.x,l=c.y}else{const c=i.shape;a=c.x+c.width/2,l=c.y+c.height/2}const h=i.matrix;s.push(i.matrix?h.a*a+h.c*l+h.tx:a,i.matrix?h.b*a+h.d*l+h.ty:l),n++,s.push(e[0],e[1]);for(let c=2;c<e.length;c+=2)s.push(e[c],e[c+1]),r.push(n++,o,n);r.push(o+1,o,n)}};function Nm(i,t=!1){const e=i.length;if(e<6)return;let s=0;for(let r=0,n=i[e-2],o=i[e-1];r<e;r+=2){const a=i[r],l=i[r+1];s+=(a-n)*(l+o),n=a,o=l}if(!t&&s>0||t&&s<=0){const r=e/2;for(let n=r+r%2;n<e;n+=2){const o=e-n-2,a=e-n-1,l=n,h=n+1;[i[o],i[l]]=[i[l],i[o]],[i[a],i[h]]=[i[h],i[a]]}}}const _f={build(i){i.points=i.shape.points.slice()},triangulate(i,t){let e=i.points;const s=i.holes,r=t.points,n=t.indices;if(e.length>=6){Nm(e,!1);const o=[];for(let h=0;h<s.length;h++){const c=s[h];Nm(c.points,!0),o.push(e.length/2),e=e.concat(c.points)}const a=G_(e,o,2);if(!a)return;const l=r.length/2;for(let h=0;h<a.length;h+=3)n.push(a[h]+l),n.push(a[h+1]+l),n.push(a[h+2]+l);for(let h=0;h<e.length;h++)r.push(e[h])}}},cv={build(i){const t=i.shape,e=t.x,s=t.y,r=t.width,n=t.height,o=i.points;o.length=0,r>=0&&n>=0&&o.push(e,s,e+r,s,e+r,s+n,e,s+n)},triangulate(i,t){const e=i.points,s=t.points;if(e.length===0)return;const r=s.length/2;s.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},uv={build(i){sa.build(i)},triangulate(i,t){sa.triangulate(i,t)}};var Ye=(i=>(i.MITER="miter",i.BEVEL="bevel",i.ROUND="round",i))(Ye||{}),Ss=(i=>(i.BUTT="butt",i.ROUND="round",i.SQUARE="square",i))(Ss||{});const Gs={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(i,t=20){if(!this.adaptive||!i||isNaN(i))return t;let e=Math.ceil(i/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},bC=Gs;class Uu{static curveTo(t,e,s,r,n,o){const a=o[o.length-2],h=o[o.length-1]-e,c=a-t,u=r-e,d=s-t,p=Math.abs(h*d-c*u);if(p<1e-8||n===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const m=h*h+c*c,g=u*u+d*d,_=h*u+c*d,x=n*Math.sqrt(m)/p,b=n*Math.sqrt(g)/p,y=x*_/m,w=b*_/g,T=x*d+b*c,D=x*u+b*h,I=c*(b+y),P=h*(b+y),S=d*(x+w),M=u*(x+w),O=Math.atan2(P-D,I-T),N=Math.atan2(M-D,S-T);return{cx:T+t,cy:D+e,radius:n,startAngle:O,endAngle:N,anticlockwise:c*u>d*h}}static arc(t,e,s,r,n,o,a,l,h){const c=a-o,u=Gs._segmentsCount(Math.abs(c)*n,Math.ceil(Math.abs(c)/Qo)*40),d=c/(u*2),p=d*2,m=Math.cos(d),g=Math.sin(d),_=u-1,x=_%1/_;for(let b=0;b<=_;++b){const y=b+x*b,w=d+o+p*y,T=Math.cos(w),D=-Math.sin(w);h.push((m*T+g*D)*n+s,(m*-D+g*T)*n+r)}}}class dv{constructor(){this.reset()}begin(t,e,s){this.reset(),this.style=t,this.start=e,this.attribStart=s}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Vh{static curveLength(t,e,s,r,n,o,a,l){let c=0,u=0,d=0,p=0,m=0,g=0,_=0,x=0,b=0,y=0,w=0,T=t,D=e;for(let I=1;I<=10;++I)u=I/10,d=u*u,p=d*u,m=1-u,g=m*m,_=g*m,x=_*t+3*g*u*s+3*m*d*n+p*a,b=_*e+3*g*u*r+3*m*d*o+p*l,y=T-x,w=D-b,T=x,D=b,c+=Math.sqrt(y*y+w*w);return c}static curveTo(t,e,s,r,n,o,a){const l=a[a.length-2],h=a[a.length-1];a.length-=2;const c=Gs._segmentsCount(Vh.curveLength(l,h,t,e,s,r,n,o));let u=0,d=0,p=0,m=0,g=0;a.push(l,h);for(let _=1,x=0;_<=c;++_)x=_/c,u=1-x,d=u*u,p=d*u,m=x*x,g=m*x,a.push(p*l+3*d*x*t+3*u*m*s+g*n,p*h+3*d*x*e+3*u*m*r+g*o)}}function Um(i,t,e,s,r,n,o,a){const l=i-e*r,h=t-s*r,c=i+e*n,u=t+s*n;let d,p;o?(d=s,p=-e):(d=-s,p=e);const m=l+d,g=h+p,_=c+d,x=u+p;return a.push(m,g,_,x),2}function ar(i,t,e,s,r,n,o,a){const l=e-i,h=s-t;let c=Math.atan2(l,h),u=Math.atan2(r-i,n-t);a&&c<u?c+=Math.PI*2:!a&&c>u&&(u+=Math.PI*2);let d=c;const p=u-c,m=Math.abs(p),g=Math.sqrt(l*l+h*h),_=(15*m*Math.sqrt(g)/Math.PI>>0)+1,x=p/_;if(d+=x,a){o.push(i,t,e,s);for(let b=1,y=d;b<_;b++,y+=x)o.push(i,t,i+Math.sin(y)*g,t+Math.cos(y)*g);o.push(i,t,r,n)}else{o.push(e,s,i,t);for(let b=1,y=d;b<_;b++,y+=x)o.push(i+Math.sin(y)*g,t+Math.cos(y)*g,i,t);o.push(r,n,i,t)}return _*2}function wC(i,t){const e=i.shape;let s=i.points||e.points.slice();const r=t.closePointEps;if(s.length===0)return;const n=i.lineStyle,o=new ft(s[0],s[1]),a=new ft(s[s.length-2],s[s.length-1]),l=e.type!==Jt.POLY||e.closeStroke,h=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(l){s=s.slice(),h&&(s.pop(),s.pop(),a.set(s[s.length-2],s[s.length-1]));const k=(o.x+a.x)*.5,W=(a.y+o.y)*.5;s.unshift(k,W),s.push(k,W)}const c=t.points,u=s.length/2;let d=s.length;const p=c.length/2,m=n.width/2,g=m*m,_=n.miterLimit*n.miterLimit;let x=s[0],b=s[1],y=s[2],w=s[3],T=0,D=0,I=-(b-w),P=x-y,S=0,M=0,O=Math.sqrt(I*I+P*P);I/=O,P/=O,I*=m,P*=m;const N=n.alignment,B=(1-N)*2,F=N*2;l||(n.cap===Ss.ROUND?d+=ar(x-I*(B-F)*.5,b-P*(B-F)*.5,x-I*B,b-P*B,x+I*F,b+P*F,c,!0)+2:n.cap===Ss.SQUARE&&(d+=Um(x,b,I,P,B,F,!0,c))),c.push(x-I*B,b-P*B,x+I*F,b+P*F);for(let k=1;k<u-1;++k){x=s[(k-1)*2],b=s[(k-1)*2+1],y=s[k*2],w=s[k*2+1],T=s[(k+1)*2],D=s[(k+1)*2+1],I=-(b-w),P=x-y,O=Math.sqrt(I*I+P*P),I/=O,P/=O,I*=m,P*=m,S=-(w-D),M=y-T,O=Math.sqrt(S*S+M*M),S/=O,M/=O,S*=m,M*=m;const W=y-x,$=b-w,E=y-T,L=D-w,G=W*E+$*L,R=$*E-L*W,z=R<0;if(Math.abs(R)<.001*Math.abs(G)){c.push(y-I*B,w-P*B,y+I*F,w+P*F),G>=0&&(n.join===Ye.ROUND?d+=ar(y,w,y-I*B,w-P*B,y-S*B,w-M*B,c,!1)+4:d+=2,c.push(y-S*F,w-M*F,y+S*B,w+M*B));continue}const X=(-I+x)*(-P+w)-(-I+y)*(-P+b),tt=(-S+T)*(-M+w)-(-S+y)*(-M+D),et=(W*tt-E*X)/R,ht=(L*X-$*tt)/R,ct=(et-y)*(et-y)+(ht-w)*(ht-w),at=y+(et-y)*B,j=w+(ht-w)*B,gt=y-(et-y)*F,xt=w-(ht-w)*F,Gt=Math.min(W*W+$*$,E*E+L*L),St=z?B:F,Pt=Gt+St*St*g,re=ct<=Pt;let pe=n.join;if(pe===Ye.MITER&&ct/g>_&&(pe=Ye.BEVEL),re)switch(pe){case Ye.MITER:{c.push(at,j,gt,xt);break}case Ye.BEVEL:{z?c.push(at,j,y+I*F,w+P*F,at,j,y+S*F,w+M*F):c.push(y-I*B,w-P*B,gt,xt,y-S*B,w-M*B,gt,xt),d+=2;break}case Ye.ROUND:{z?(c.push(at,j,y+I*F,w+P*F),d+=ar(y,w,y+I*F,w+P*F,y+S*F,w+M*F,c,!0)+4,c.push(at,j,y+S*F,w+M*F)):(c.push(y-I*B,w-P*B,gt,xt),d+=ar(y,w,y-I*B,w-P*B,y-S*B,w-M*B,c,!1)+4,c.push(y-S*B,w-M*B,gt,xt));break}}else{switch(c.push(y-I*B,w-P*B,y+I*F,w+P*F),pe){case Ye.MITER:{z?c.push(gt,xt,gt,xt):c.push(at,j,at,j),d+=2;break}case Ye.ROUND:{z?d+=ar(y,w,y+I*F,w+P*F,y+S*F,w+M*F,c,!0)+2:d+=ar(y,w,y-I*B,w-P*B,y-S*B,w-M*B,c,!1)+2;break}}c.push(y-S*B,w-M*B,y+S*F,w+M*F),d+=2}}x=s[(u-2)*2],b=s[(u-2)*2+1],y=s[(u-1)*2],w=s[(u-1)*2+1],I=-(b-w),P=x-y,O=Math.sqrt(I*I+P*P),I/=O,P/=O,I*=m,P*=m,c.push(y-I*B,w-P*B,y+I*F,w+P*F),l||(n.cap===Ss.ROUND?d+=ar(y-I*(B-F)*.5,w-P*(B-F)*.5,y-I*B,w-P*B,y+I*F,w+P*F,c,!1)+2:n.cap===Ss.SQUARE&&(d+=Um(y,w,I,P,B,F,!1,c)));const U=t.indices,V=Gs.epsilon*Gs.epsilon;for(let k=p;k<d+p-2;++k)x=c[k*2],b=c[k*2+1],y=c[(k+1)*2],w=c[(k+1)*2+1],T=c[(k+2)*2],D=c[(k+2)*2+1],!(Math.abs(x*(w-D)+y*(D-b)+T*(b-w))<V)&&U.push(k,k+1,k+2)}function TC(i,t){let e=0;const s=i.shape,r=i.points||s.points,n=s.type!==Jt.POLY||s.closeStroke;if(r.length===0)return;const o=t.points,a=t.indices,l=r.length/2,h=o.length/2;let c=h;for(o.push(r[0],r[1]),e=1;e<l;e++)o.push(r[e*2],r[e*2+1]),a.push(c,c+1),c++;n&&a.push(c,h)}function $u(i,t){i.lineStyle.native?TC(i,t):wC(i,t)}class jh{static curveLength(t,e,s,r,n,o){const a=t-2*s+n,l=e-2*r+o,h=2*s-2*t,c=2*r-2*e,u=4*(a*a+l*l),d=4*(a*h+l*c),p=h*h+c*c,m=2*Math.sqrt(u+d+p),g=Math.sqrt(u),_=2*u*g,x=2*Math.sqrt(p),b=d/g;return(_*m+g*d*(m-x)+(4*p*u-d*d)*Math.log((2*g+b+m)/(b+x)))/(4*_)}static curveTo(t,e,s,r,n){const o=n[n.length-2],a=n[n.length-1],l=Gs._segmentsCount(jh.curveLength(o,a,t,e,s,r));let h=0,c=0;for(let u=1;u<=l;++u){const d=u/l;h=o+(t-o)*d,c=a+(e-a)*d,n.push(h+(t+(s-t)*d-h)*d,c+(e+(r-e)*d-c)*d)}}}const Sl={[Jt.POLY]:_f,[Jt.CIRC]:sa,[Jt.ELIP]:sa,[Jt.RECT]:cv,[Jt.RREC]:uv},Gu=[],Eo=[];class ra{constructor(t,e=null,s=null,r=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=s,this.fillStyle=e,this.matrix=r,this.type=t.type}clone(){return new ra(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const en=new ft,fv=class extends Ud{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Jo,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),Eo.push(this.drawCalls[i]);this.drawCalls.length=0;for(let i=0;i<this.batches.length;i++){const t=this.batches[i];t.reset(),Gu.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(i,t=null,e=null,s=null){const r=new ra(i,t,e,s);return this.graphicsData.push(r),this.dirty++,this}drawHole(i,t=null){if(!this.graphicsData.length)return null;const e=new ra(i,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return e.lineStyle=s.lineStyle,s.holes.push(e),this.dirty++,this}destroy(){super.destroy();for(let i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(i){const t=this.graphicsData;for(let e=0;e<t.length;++e){const s=t[e];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(i,en):en.copyFrom(i),s.shape.contains(en.x,en.y))){let r=!1;if(s.holes){for(let n=0;n<s.holes.length;n++)if(s.holes[n].shape.contains(en.x,en.y)){r=!0;break}}if(!r)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const i=this.uvs,t=this.graphicsData;let e=null,s=null;this.batches.length>0&&(e=this.batches[this.batches.length-1],s=e.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const l=t[a],h=l.fillStyle,c=l.lineStyle;Sl[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(h.visible||c.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const p=d===0?h:c;if(!p.visible)continue;const m=p.texture.baseTexture,g=this.indices.length,_=this.points.length/2;m.wrapMode=Hi.REPEAT,d===0?this.processFill(l):this.processLine(l);const x=this.points.length/2-_;x!==0&&(e&&!this._compareStyles(s,p)&&(e.end(g,_),e=null),e||(e=Gu.pop()||new dv,e.begin(p,g,_),this.batches.push(e),s=p),this.addUvs(this.points,i,p.texture,_,x,p.matrix))}}const r=this.indices.length,n=this.points.length/2;if(e&&e.end(r,n),this.batches.length===0){this.batchable=!0;return}const o=n>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(i,t){return!(!i||!t||i.texture.baseTexture!==t.texture.baseTexture||i.color+i.alpha!==t.color+t.alpha||!!i.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let i=0,t=this.graphicsData.length;i<t;i++){const e=this.graphicsData[i],s=e.fillStyle,r=e.lineStyle;if(s&&!s.texture.baseTexture.valid||r&&!r.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const i=this.batches;for(let t=0,e=i.length;t<e;t++){const s=i[t];for(let r=0;r<s.size;r++){const n=s.start+r;this.indicesUint16[n]=this.indicesUint16[n]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const i=this.batches;for(let t=0;t<i.length;t++)if(i[t].style.native)return!1;return this.points.length<fv.BATCHABLE_SIZE*2}buildDrawCalls(){let i=++dt._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),Eo.push(this.drawCalls[c]);this.drawCalls.length=0;const t=this.colors,e=this.textureIds;let s=Eo.pop();s||(s=new Zl,s.texArray=new Ql),s.texArray.count=0,s.start=0,s.size=0,s.type=bi.TRIANGLES;let r=0,n=null,o=0,a=!1,l=bi.TRIANGLES,h=0;this.drawCalls.push(s);for(let c=0;c<this.batches.length;c++){const u=this.batches[c],d=8,p=u.style,m=p.texture.baseTexture;a!==!!p.native&&(a=!!p.native,l=a?bi.LINES:bi.TRIANGLES,n=null,r=d,i++),n!==m&&(n=m,m._batchEnabled!==i&&(r===d&&(i++,r=0,s.size>0&&(s=Eo.pop(),s||(s=new Zl,s.texArray=new Ql),this.drawCalls.push(s)),s.start=h,s.size=0,s.texArray.count=0,s.type=l),m.touched=1,m._batchEnabled=i,m._batchLocation=r,m.wrapMode=Hi.REPEAT,s.texArray.elements[s.texArray.count++]=m,r++)),s.size+=u.size,h+=u.size,o=m._batchLocation,this.addColors(t,p.color,p.alpha,u.attribSize,u.attribStart),this.addTextureIds(e,o,u.attribSize,u.attribStart)}dt._globalBatch=i,this.packAttributes()}packAttributes(){const i=this.points,t=this.uvs,e=this.colors,s=this.textureIds,r=new ArrayBuffer(i.length*3*4),n=new Float32Array(r),o=new Uint32Array(r);let a=0;for(let l=0;l<i.length/2;l++)n[a++]=i[l*2],n[a++]=i[l*2+1],n[a++]=t[l*2],n[a++]=t[l*2+1],o[a++]=e[l],n[a++]=s[l];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)}processFill(i){i.holes.length?_f.triangulate(i,this):Sl[i.type].triangulate(i,this)}processLine(i){$u(i,this);for(let t=0;t<i.holes.length;t++)$u(i.holes[t],this)}processHoles(i){for(let t=0;t<i.length;t++){const e=i[t];Sl[e.type].build(e),e.matrix&&this.transformPoints(e.points,e.matrix)}}calculateBounds(){const i=this._bounds;i.clear(),i.addVertexData(this.points,0,this.points.length),i.pad(this.boundsPadding,this.boundsPadding)}transformPoints(i,t){for(let e=0;e<i.length/2;e++){const s=i[e*2],r=i[e*2+1];i[e*2]=t.a*s+t.c*r+t.tx,i[e*2+1]=t.b*s+t.d*r+t.ty}}addColors(i,t,e,s,r=0){const n=vt.shared.setValue(t).toLittleEndianNumber(),o=vt.shared.setValue(n).toPremultiplied(e);i.length=Math.max(i.length,r+s);for(let a=0;a<s;a++)i[r+a]=o}addTextureIds(i,t,e,s=0){i.length=Math.max(i.length,s+e);for(let r=0;r<e;r++)i[s+r]=t}addUvs(i,t,e,s,r,n=null){let o=0;const a=t.length,l=e.frame;for(;o<r;){let c=i[(s+o)*2],u=i[(s+o)*2+1];if(n){const d=n.a*c+n.c*u+n.tx;u=n.b*c+n.d*u+n.ty,c=d}o++,t.push(c/l.width,u/l.height)}const h=e.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,e,a,r)}adjustUvs(i,t,e,s){const r=t.baseTexture,n=1e-6,o=e+s*2,a=t.frame,l=a.width/r.width,h=a.height/r.height;let c=a.x/a.width,u=a.y/a.height,d=Math.floor(i[e]+n),p=Math.floor(i[e+1]+n);for(let m=e+2;m<o;m+=2)d=Math.min(d,Math.floor(i[m]+n)),p=Math.min(p,Math.floor(i[m+1]+n));c-=d,u-=p;for(let m=e;m<o;m+=2)i[m]=(i[m]+c)*l,i[m+1]=(i[m+1]+u)*h}};let vf=fv;vf.BATCHABLE_SIZE=100;class Ra{constructor(){this.color=16777215,this.alpha=1,this.texture=J.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Ra;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=J.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Wh extends Ra{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Ss.BUTT,this.join=Ye.MITER,this.miterLimit=10}clone(){const t=new Wh;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const kc={},Pl=class extends ee{constructor(i=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ra,this._lineStyle=new Wh,this._matrix=null,this._holeMode=!1,this.state=Zi.for2d(),this._geometry=i||new vf,this._geometry.refCount++,this._transformID=-1,this._tintColor=new vt(16777215),this.blendMode=lt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Pl(this._geometry)}set blendMode(i){this.state.blendMode=i}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(i){this._tintColor.setValue(i)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(i=null,t=0,e,s=.5,r=!1){return typeof i=="number"&&(i={width:i,color:t,alpha:e,alignment:s,native:r}),this.lineTextureStyle(i)}lineTextureStyle(i){const t={width:0,texture:J.WHITE,color:i!=null&&i.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Ss.BUTT,join:Ye.MITER,miterLimit:10};i=Object.assign(t,i),this.normalizeColor(i),this.currentPath&&this.startPoly();const e=i.width>0&&i.alpha>0;return e?(i.matrix&&(i.matrix=i.matrix.clone(),i.matrix.invert()),Object.assign(this._lineStyle,{visible:e},i)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const i=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Cr,this.currentPath.closeStroke=!1,this.currentPath.points.push(i[t-2],i[t-1]))}else this.currentPath=new Cr,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(i,t){return this.startPoly(),this.currentPath.points[0]=i,this.currentPath.points[1]=t,this}lineTo(i,t){this.currentPath||this.moveTo(0,0);const e=this.currentPath.points,s=e[e.length-2],r=e[e.length-1];return(s!==i||r!==t)&&e.push(i,t),this}_initCurve(i=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[i,t]):this.moveTo(i,t)}quadraticCurveTo(i,t,e,s){this._initCurve();const r=this.currentPath.points;return r.length===0&&this.moveTo(0,0),jh.curveTo(i,t,e,s,r),this}bezierCurveTo(i,t,e,s,r,n){return this._initCurve(),Vh.curveTo(i,t,e,s,r,n,this.currentPath.points),this}arcTo(i,t,e,s,r){this._initCurve(i,t);const n=this.currentPath.points,o=Uu.curveTo(i,t,e,s,r,n);if(o){const{cx:a,cy:l,radius:h,startAngle:c,endAngle:u,anticlockwise:d}=o;this.arc(a,l,h,c,u,d)}return this}arc(i,t,e,s,r,n=!1){if(s===r)return this;if(!n&&r<=s?r+=Qo:n&&s<=r&&(s+=Qo),r-s===0)return this;const a=i+Math.cos(s)*e,l=t+Math.sin(s)*e,h=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const u=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);u<h&&d<h||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return Uu.arc(a,l,i,t,e,s,r,n,c),this}beginFill(i=0,t){return this.beginTextureFill({texture:J.WHITE,color:i,alpha:t})}normalizeColor(i){const t=vt.shared.setValue(i.color??0);i.color=t.toNumber(),i.alpha??(i.alpha=t.alpha)}beginTextureFill(i){const t={texture:J.WHITE,color:16777215,matrix:null};i=Object.assign(t,i),this.normalizeColor(i),this.currentPath&&this.startPoly();const e=i.alpha>0;return e?(i.matrix&&(i.matrix=i.matrix.clone(),i.matrix.invert()),Object.assign(this._fillStyle,{visible:e},i)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(i,t,e,s){return this.drawShape(new pt(i,t,e,s))}drawRoundedRect(i,t,e,s,r){return this.drawShape(new $h(i,t,e,s,r))}drawCircle(i,t,e){return this.drawShape(new Nh(i,t,e))}drawEllipse(i,t,e,s){return this.drawShape(new Uh(i,t,e,s))}drawPolygon(...i){let t,e=!0;const s=i[0];s.points?(e=s.closeStroke,t=s.points):Array.isArray(i[0])?t=i[0]:t=i;const r=new Cr(t);return r.closeStroke=e,this.drawShape(r),this}drawShape(i){return this._holeMode?this._geometry.drawHole(i,this._matrix):this._geometry.drawShape(i,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const i=this._geometry.graphicsData;return i.length===1&&i[0].shape.type===Jt.RECT&&!i[0].matrix&&!i[0].holes.length&&!(i[0].lineStyle.visible&&i[0].lineStyle.width)}_render(i){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(i)):(i.batch.flush(),this._renderDirect(i))}_populateBatches(){const i=this._geometry,t=this.blendMode,e=i.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=i.batchDirty,this.batches.length=e,this.vertexData=new Float32Array(i.points);for(let s=0;s<e;s++){const r=i.batches[s],n=r.style.color,o=new Float32Array(this.vertexData.buffer,r.attribStart*4*2,r.attribSize*2),a=new Float32Array(i.uvsFloat32.buffer,r.attribStart*4*2,r.attribSize*2),l=new Uint16Array(i.indicesUint16.buffer,r.start*2,r.size),h={vertexData:o,blendMode:t,indices:l,uvs:a,_batchRGB:vt.shared.setValue(n).toRgbArray(),_tintRGB:n,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[s]=h}}_renderBatched(i){if(this.batches.length){i.batch.setObjectRenderer(i.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,e=this.batches.length;t<e;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,i.plugins[this.pluginName].render(s)}}}_renderDirect(i){const t=this._resolveDirectShader(i),e=this._geometry,s=this.worldAlpha,r=t.uniforms,n=e.drawCalls;r.translationMatrix=this.transform.worldTransform,vt.shared.setValue(this._tintColor).premultiply(s).toArray(r.tint),i.shader.bind(t),i.geometry.bind(e,t),i.state.set(this.state);for(let o=0,a=n.length;o<a;o++)this._renderDrawCallDirect(i,e.drawCalls[o])}_renderDrawCallDirect(i,t){const{texArray:e,type:s,size:r,start:n}=t,o=e.count;for(let a=0;a<o;a++)i.texture.bind(e.elements[a],a);i.geometry.draw(s,r,n)}_resolveDirectShader(i){let t=this.shader;const e=this.pluginName;if(!t){if(!kc[e]){const{maxTextures:s}=i.plugins[e],r=new Int32Array(s);for(let a=0;a<s;a++)r[a]=a;const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ct,default:ai.from({uSamplers:r},!0)},o=i.plugins[e]._shader.program;kc[e]=new Ci(o,n)}t=kc[e]}return t}_calculateBounds(){this.finishPoly();const i=this._geometry;if(!i.graphicsData.length)return;const{minX:t,minY:e,maxX:s,maxY:r}=i.bounds;this._bounds.addFrame(this.transform,t,e,s,r)}containsPoint(i){return this.worldTransform.applyInverse(i,Pl._TEMP_POINT),this._geometry.containsPoint(Pl._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let i=0;i<this.batches.length;i++){const t=this.batches[i];t._tintRGB=vt.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const i=this.transform._worldID;if(this._transformID===i)return;this._transformID=i;const t=this.transform.worldTransform,e=t.a,s=t.b,r=t.c,n=t.d,o=t.tx,a=t.ty,l=this._geometry.points,h=this.vertexData;let c=0;for(let u=0;u<l.length;u+=2){const d=l[u],p=l[u+1];h[c++]=e*d+r*p+o,h[c++]=n*p+s*d+a}}closePath(){const i=this.currentPath;return i&&(i.closeStroke=!0,this.finishPoly()),this}setMatrix(i){return this._matrix=i,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(i){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(i)}};let _s=Pl;_s.curves=Gs;_s._TEMP_POINT=new ft;const EC={buildPoly:_f,buildCircle:sa,buildRectangle:cv,buildRoundedRectangle:uv,buildLine:$u,ArcUtils:Uu,BezierUtils:Vh,QuadraticUtils:jh,BatchPart:dv,FILL_COMMANDS:Sl,BATCH_POOL:Gu,DRAW_CALL_POOL:Eo};class pv{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const Fc=new ft,$m=new Cr,mv=class extends ee{constructor(i,t,e,s=bi.TRIANGLES){super(),this.geometry=i,this.shader=t,this.state=e||Zi.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Z.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(i){this._geometry!==i&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=i,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(i){this.shader=i}get material(){return this.shader}set blendMode(i){this.state.blendMode=i}get blendMode(){return this.state.blendMode}set roundPixels(i){this._roundPixels!==i&&(this._transformID=-1),this._roundPixels=i}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(i){this.shader.tint=i}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(i){this.shader.texture=i}_render(i){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===bi.TRIANGLES&&t.length<mv.BATCHABLE_SIZE*2?this._renderToBatch(i):this._renderDefault(i)}_renderDefault(i){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),i.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),i.shader.bind(t),i.state.set(this.state),i.geometry.bind(this.geometry,t),i.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(i){const t=this.geometry,e=this.shader;e.uvMatrix&&(e.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=e._tintRGB,this._texture=e.texture;const s=this.material.pluginName;i.batch.setObjectRenderer(i.plugins[s]),i.plugins[s].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,s=t._updateID;if(s===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const r=this.transform.worldTransform,n=r.a,o=r.b,a=r.c,l=r.d,h=r.tx,c=r.ty,u=this.vertexData;for(let d=0;d<u.length/2;d++){const p=e[d*2],m=e[d*2+1];u[d*2]=n*p+a*m+h,u[d*2+1]=o*p+l*m+c}if(this._roundPixels){const d=Z.RESOLUTION;for(let p=0;p<u.length;++p)u[p]=Math.round(u[p]*d)/d}this.vertexDirty=s}calculateUvs(){const i=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=i.data:(this.batchUvs||(this.batchUvs=new pv(i,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(i){if(!this.getBounds().contains(i.x,i.y))return!1;this.worldTransform.applyInverse(i,Fc);const t=this.geometry.getBuffer("aVertexPosition").data,e=$m.points,s=this.geometry.getIndex().data,r=s.length,n=this.drawMode===4?3:1;for(let o=0;o+2<r;o+=n){const a=s[o]*2,l=s[o+1]*2,h=s[o+2]*2;if(e[0]=t[a],e[1]=t[a+1],e[2]=t[l],e[3]=t[l+1],e[4]=t[h],e[5]=t[h+1],$m.contains(Fc.x,Fc.y))return!0}return!1}destroy(i){super.destroy(i),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Lr=mv;Lr.BATCHABLE_SIZE=100;class Da extends ps{constructor(t,e,s){super();const r=new Nt(t),n=new Nt(e,!0),o=new Nt(s,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,ot.FLOAT).addAttribute("aTextureCoord",n,2,!1,ot.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var AC=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,CC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Gn extends Ci{constructor(t,e){const s={uSampler:t,alpha:1,uTextureMatrix:Ct.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(s,e.uniforms),super(e.program||ii.from(CC,AC),s),this._colorDirty=!1,this.uvMatrix=new Gh(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new vt(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;vt.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class gv extends Da{constructor(t=100,e=100,s=10,r=10){super(),this.segWidth=s,this.segHeight=r,this.width=t,this.height=e,this.build()}build(){const t=this.segWidth*this.segHeight,e=[],s=[],r=[],n=this.segWidth-1,o=this.segHeight-1,a=this.width/n,l=this.height/o;for(let c=0;c<t;c++){const u=c%this.segWidth,d=c/this.segWidth|0;e.push(u*a,d*l),s.push(u/n,d/o)}const h=n*o;for(let c=0;c<h;c++){const u=c%n,d=c/n|0,p=d*this.segWidth+u,m=d*this.segWidth+u+1,g=(d+1)*this.segWidth+u,_=(d+1)*this.segWidth+u+1;r.push(p,m,g,m,_,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class _v extends Da{constructor(t=200,e,s=0){super(new Float32Array(e.length*4),new Float32Array(e.length*4),new Uint16Array((e.length-1)*6)),this.points=e,this._width=t,this.textureScale=s,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const e=this.getBuffer("aVertexPosition"),s=this.getBuffer("aTextureCoord"),r=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(t.length*4),s.data=new Float32Array(t.length*4),r.data=new Uint16Array((t.length-1)*6));const n=s.data,o=r.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;let a=0,l=t[0];const h=this._width*this.textureScale,c=t.length;for(let d=0;d<c;d++){const p=d*4;if(this.textureScale>0){const m=l.x-t[d].x,g=l.y-t[d].y,_=Math.sqrt(m*m+g*g);l=t[d],a+=_/h}else a=d/(c-1);n[p]=a,n[p+1]=0,n[p+2]=a,n[p+3]=1}let u=0;for(let d=0;d<c-1;d++){const p=d*2;o[u++]=p,o[u++]=p+1,o[u++]=p+2,o[u++]=p+2,o[u++]=p+1,o[u++]=p+3}s.update(),r.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e=t[0],s,r=0,n=0;const o=this.buffers[0].data,a=t.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<a;h++){const c=t[h],u=h*4;h<t.length-1?s=t[h+1]:s=c,n=-(s.x-e.x),r=s.y-e.y;const d=Math.sqrt(r*r+n*n);d<1e-6?(r=0,n=0):(r/=d,n/=d,r*=l,n*=l),o[u]=c.x+r,o[u+1]=c.y+n,o[u+2]=c.x-r,o[u+3]=c.y-n,e=c}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class vv extends Lr{constructor(t,e,s){const r=new gv(t.width,t.height,e,s),n=new Gn(J.WHITE);super(r,n),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:e,height:s}=this.shader.texture;this.autoResize&&(t.width!==e||t.height!==s)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const fl=10;class SC extends vv{constructor(t,e,s,r,n){var o,a,l,h;super(J.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=e??((o=t.defaultBorders)==null?void 0:o.left)??fl,this._rightWidth=r??((a=t.defaultBorders)==null?void 0:a.right)??fl,this._topHeight=s??((l=t.defaultBorders)==null?void 0:l.top)??fl,this._bottomHeight=n??((h=t.defaultBorders)==null?void 0:h.bottom)??fl,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,s=this._topHeight+this._bottomHeight,r=this._height>s?1:this._height/s;return Math.min(e,r)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const s=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=s*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-s*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class PC extends Lr{constructor(t=J.EMPTY,e,s,r,n){const o=new Da(e,s,r);o.getBuffer("aVertexPosition").static=!1;const a=new Gn(t);super(o,a,null,n),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class IC extends Lr{constructor(t,e,s=0){const r=new _v(t.height,e,s),n=new Gn(t);s>0&&(t.baseTexture.wrapMode=Hi.REPEAT),super(r,n),this.autoUpdate=!0}_render(t){const e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),super._render(t)}}class MC extends ee{constructor(t=1500,e,s=16384,r=!1){super();const n=16384;s>n&&(s=n),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=s,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=lt.NORMAL,this.autoResize=r,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e),this._tintColor=new vt(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const e=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class Gm{constructor(t,e,s){this.geometry=new ps,this.indexBuffer=null,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<t.length;++r){let n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||ot.FLOAT,offset:n.offset},e[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new Nt(q_(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=e,e+=a.size,this.dynamicStride+=a.size}const s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new Nt(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}const n=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(n),this.staticDataUint32=new Uint32Array(n),this.staticBuffer=new Nt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ot.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ot.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,s){for(let r=0;r<this.dynamicProperties.length;r++){const n=this.dynamicProperties[r];n.uploadFunction(t,e,s,n.type===ot.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,s){for(let r=0;r<this.staticProperties.length;r++){const n=this.staticProperties[r];n.uploadFunction(t,e,s,n.type===ot.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var RC=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,DC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class yf extends Ea{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Ct,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ot.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Ci.from(DC,RC,{}),this.state=Zi.for2d()}render(t){const e=t.children,s=t._maxSize,r=t._batchSize,n=this.renderer;let o=e.length;if(o===0)return;o>s&&!t.autoResize&&(o=s);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=Ld(t.blendMode,h),n.state.set(this.state);const c=n.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=vt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let p=0,m=0;p<o;p+=r,m+=1){let g=o-p;g>r&&(g=r),m>=a.length&&a.push(this._generateOneMoreBuffer(t));const _=a[m];_.uploadDynamic(e,p,g);const x=t._bufferUpdateIDs[m]||0;d=d||_._updateID<x,d&&(_._updateID=t._updateID,_.uploadStatic(e,p,g)),n.geometry.bind(_.geometry),c.drawElements(c.TRIANGLES,g*6,c.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],s=t._maxSize,r=t._batchSize,n=t._properties;for(let o=0;o<s;o+=r)e.push(new Gm(this.properties,n,r));return e}_generateOneMoreBuffer(t){const e=t._batchSize,s=t._properties;return new Gm(this.properties,s,e)}uploadVertices(t,e,s,r,n,o){let a=0,l=0,h=0,c=0;for(let u=0;u<s;++u){const d=t[e+u],p=d._texture,m=d.scale.x,g=d.scale.y,_=p.trim,x=p.orig;_?(l=_.x-d.anchor.x*x.width,a=l+_.width,c=_.y-d.anchor.y*x.height,h=c+_.height):(a=x.width*(1-d.anchor.x),l=x.width*-d.anchor.x,h=x.height*(1-d.anchor.y),c=x.height*-d.anchor.y),r[o]=l*m,r[o+1]=c*g,r[o+n]=a*m,r[o+n+1]=c*g,r[o+n*2]=a*m,r[o+n*2+1]=h*g,r[o+n*3]=l*m,r[o+n*3+1]=h*g,o+=n*4}}uploadPosition(t,e,s,r,n,o){for(let a=0;a<s;a++){const l=t[e+a].position;r[o]=l.x,r[o+1]=l.y,r[o+n]=l.x,r[o+n+1]=l.y,r[o+n*2]=l.x,r[o+n*2+1]=l.y,r[o+n*3]=l.x,r[o+n*3+1]=l.y,o+=n*4}}uploadRotation(t,e,s,r,n,o){for(let a=0;a<s;a++){const l=t[e+a].rotation;r[o]=l,r[o+n]=l,r[o+n*2]=l,r[o+n*3]=l,o+=n*4}}uploadUvs(t,e,s,r,n,o){for(let a=0;a<s;++a){const l=t[e+a]._texture._uvs;l?(r[o]=l.x0,r[o+1]=l.y0,r[o+n]=l.x1,r[o+n+1]=l.y1,r[o+n*2]=l.x2,r[o+n*2+1]=l.y2,r[o+n*3]=l.x3,r[o+n*3+1]=l.y3,o+=n*4):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+n*2]=0,r[o+n*2+1]=0,r[o+n*3]=0,r[o+n*3+1]=0,o+=n*4)}}uploadTint(t,e,s,r,n,o){for(let a=0;a<s;++a){const l=t[e+a],h=vt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);r[o]=h,r[o+n]=h,r[o+n*2]=h,r[o+n*3]=h,o+=n*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}yf.extension={name:"particle",type:Q.RendererPlugin};nt.add(yf);var Oa=(i=>(i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",i))(Oa||{});const pl={willReadFrequently:!0},rt=class{static get experimentalLetterSpacingSupported(){let i=rt._experimentalLetterSpacingSupported;if(i!==void 0){const t=Z.ADAPTER.getCanvasRenderingContext2D().prototype;i=rt._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return i}constructor(i,t,e,s,r,n,o,a,l){this.text=i,this.style=t,this.width=e,this.height=s,this.lines=r,this.lineWidths=n,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(i,t,e,s=rt._canvas){e=e??t.wordWrap;const r=t.toFontString(),n=rt.measureFont(r);n.fontSize===0&&(n.fontSize=t.fontSize,n.ascent=t.fontSize);const o=s.getContext("2d",pl);o.font=r;const l=(e?rt.wordWrap(i,t,s):i).split(/(?:\r\n|\r|\n)/),h=new Array(l.length);let c=0;for(let m=0;m<l.length;m++){const g=rt._measureText(l[m],t.letterSpacing,o);h[m]=g,c=Math.max(c,g)}let u=c+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance);const d=t.lineHeight||n.fontSize+t.strokeThickness;let p=Math.max(d,n.fontSize+t.strokeThickness*2)+(l.length-1)*(d+t.leading);return t.dropShadow&&(p+=t.dropShadowDistance),new rt(i,t,u,p,l,h,d+t.leading,c,n)}static _measureText(i,t,e){let s=!1;rt.experimentalLetterSpacingSupported&&(rt.experimentalLetterSpacing?(e.letterSpacing=`${t}px`,e.textLetterSpacing=`${t}px`,s=!0):(e.letterSpacing="0px",e.textLetterSpacing="0px"));let r=e.measureText(i).width;return r>0&&(s?r-=t:r+=(rt.graphemeSegmenter(i).length-1)*t),r}static wordWrap(i,t,e=rt._canvas){const s=e.getContext("2d",pl);let r=0,n="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:h}=t,c=rt.collapseSpaces(h),u=rt.collapseNewlines(h);let d=!c;const p=t.wordWrapWidth+l,m=rt.tokenize(i);for(let g=0;g<m.length;g++){let _=m[g];if(rt.isNewline(_)){if(!u){o+=rt.addLine(n),d=!c,n="",r=0;continue}_=" "}if(c){const b=rt.isBreakingSpace(_),y=rt.isBreakingSpace(n[n.length-1]);if(b&&y)continue}const x=rt.getFromCache(_,l,a,s);if(x>p)if(n!==""&&(o+=rt.addLine(n),n="",r=0),rt.canBreakWords(_,t.breakWords)){const b=rt.wordWrapSplit(_);for(let y=0;y<b.length;y++){let w=b[y],T=w,D=1;for(;b[y+D];){const P=b[y+D];if(!rt.canBreakChars(T,P,_,y,t.breakWords))w+=P;else break;T=P,D++}y+=D-1;const I=rt.getFromCache(w,l,a,s);I+r>p&&(o+=rt.addLine(n),d=!1,n="",r=0),n+=w,r+=I}}else{n.length>0&&(o+=rt.addLine(n),n="",r=0);const b=g===m.length-1;o+=rt.addLine(_,!b),d=!1,n="",r=0}else x+r>p&&(d=!1,o+=rt.addLine(n),n="",r=0),(n.length>0||!rt.isBreakingSpace(_)||d)&&(n+=_,r+=x)}return o+=rt.addLine(n,!1),o}static addLine(i,t=!0){return i=rt.trimRight(i),i=t?`${i}
`:i,i}static getFromCache(i,t,e,s){let r=e[i];return typeof r!="number"&&(r=rt._measureText(i,t,s)+t,e[i]=r),r}static collapseSpaces(i){return i==="normal"||i==="pre-line"}static collapseNewlines(i){return i==="normal"}static trimRight(i){if(typeof i!="string")return"";for(let t=i.length-1;t>=0;t--){const e=i[t];if(!rt.isBreakingSpace(e))break;i=i.slice(0,-1)}return i}static isNewline(i){return typeof i!="string"?!1:rt._newlines.includes(i.charCodeAt(0))}static isBreakingSpace(i,t){return typeof i!="string"?!1:rt._breakingSpaces.includes(i.charCodeAt(0))}static tokenize(i){const t=[];let e="";if(typeof i!="string")return t;for(let s=0;s<i.length;s++){const r=i[s],n=i[s+1];if(rt.isBreakingSpace(r,n)||rt.isNewline(r)){e!==""&&(t.push(e),e=""),t.push(r);continue}e+=r}return e!==""&&t.push(e),t}static canBreakWords(i,t){return t}static canBreakChars(i,t,e,s,r){return!0}static wordWrapSplit(i){return rt.graphemeSegmenter(i)}static measureFont(i){if(rt._fonts[i])return rt._fonts[i];const t={ascent:0,descent:0,fontSize:0},e=rt._canvas,s=rt._context;s.font=i;const r=rt.METRICS_STRING+rt.BASELINE_SYMBOL,n=Math.ceil(s.measureText(r).width);let o=Math.ceil(s.measureText(rt.BASELINE_SYMBOL).width);const a=Math.ceil(rt.HEIGHT_MULTIPLIER*o);if(o=o*rt.BASELINE_MULTIPLIER|0,n===0||a===0)return rt._fonts[i]=t,t;e.width=n,e.height=a,s.fillStyle="#f00",s.fillRect(0,0,n,a),s.font=i,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(r,0,o);const l=s.getImageData(0,0,n,a).data,h=l.length,c=n*4;let u=0,d=0,p=!1;for(u=0;u<o;++u){for(let m=0;m<c;m+=4)if(l[d+m]!==255){p=!0;break}if(!p)d+=c;else break}for(t.ascent=o-u,d=h-c,p=!1,u=a;u>o;--u){for(let m=0;m<c;m+=4)if(l[d+m]!==255){p=!0;break}if(!p)d-=c;else break}return t.descent=u-o,t.fontSize=t.ascent+t.descent,rt._fonts[i]=t,t}static clearMetrics(i=""){i?delete rt._fonts[i]:rt._fonts={}}static get _canvas(){if(!rt.__canvas){let i;try{const t=new OffscreenCanvas(0,0),e=t.getContext("2d",pl);if(e!=null&&e.measureText)return rt.__canvas=t,t;i=Z.ADAPTER.createCanvas()}catch{i=Z.ADAPTER.createCanvas()}i.width=i.height=10,rt.__canvas=i}return rt.__canvas}static get _context(){return rt.__context||(rt.__context=rt._canvas.getContext("2d",pl)),rt.__context}};let Qt=rt;Qt.METRICS_STRING="|q";Qt.BASELINE_SYMBOL="M";Qt.BASELINE_MULTIPLIER=1.4;Qt.HEIGHT_MULTIPLIER=2;Qt.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return t=>[...i.segment(t)].map(e=>e.segment)}return i=>[...i]})();Qt.experimentalLetterSpacing=!1;Qt._fonts={};Qt._newlines=[10,13];Qt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const OC=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ao=class{constructor(i){this.styleID=0,this.reset(),Lc(this,i,i)}clone(){const i={};return Lc(i,this,Ao.defaultStyle),new Ao(i)}reset(){Lc(this,Ao.defaultStyle,Ao.defaultStyle)}get align(){return this._align}set align(i){this._align!==i&&(this._align=i,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(i){this._breakWords!==i&&(this._breakWords=i,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(i){this._dropShadow!==i&&(this._dropShadow=i,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(i){this._dropShadowAlpha!==i&&(this._dropShadowAlpha=i,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(i){this._dropShadowAngle!==i&&(this._dropShadowAngle=i,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(i){this._dropShadowBlur!==i&&(this._dropShadowBlur=i,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(i){const t=Bc(i);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(i){this._dropShadowDistance!==i&&(this._dropShadowDistance=i,this.styleID++)}get fill(){return this._fill}set fill(i){const t=Bc(i);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(i){this._fillGradientType!==i&&(this._fillGradientType=i,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(i){kC(this._fillGradientStops,i)||(this._fillGradientStops=i,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(i){this.fontFamily!==i&&(this._fontFamily=i,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(i){this._fontSize!==i&&(this._fontSize=i,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(i){this._fontStyle!==i&&(this._fontStyle=i,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(i){this._fontVariant!==i&&(this._fontVariant=i,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(i){this._fontWeight!==i&&(this._fontWeight=i,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(i){this._lineHeight!==i&&(this._lineHeight=i,this.styleID++)}get leading(){return this._leading}set leading(i){this._leading!==i&&(this._leading=i,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(i){this._lineJoin!==i&&(this._lineJoin=i,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(i){this._miterLimit!==i&&(this._miterLimit=i,this.styleID++)}get padding(){return this._padding}set padding(i){this._padding!==i&&(this._padding=i,this.styleID++)}get stroke(){return this._stroke}set stroke(i){const t=Bc(i);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(i){this._strokeThickness!==i&&(this._strokeThickness=i,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(i){this._textBaseline!==i&&(this._textBaseline=i,this.styleID++)}get trim(){return this._trim}set trim(i){this._trim!==i&&(this._trim=i,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(i){this._whiteSpace!==i&&(this._whiteSpace=i,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(i){this._wordWrap!==i&&(this._wordWrap=i,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(i){this._wordWrapWidth!==i&&(this._wordWrapWidth=i,this.styleID++)}toFontString(){const i=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let e=t.length-1;e>=0;e--){let s=t[e].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!OC.includes(s)&&(s=`"${s}"`),t[e]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${i} ${t.join(",")}`}};let Yi=Ao;Yi.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Oa.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Bc(i){const t=vt.shared;return Array.isArray(i)?i.map(e=>t.setValue(e).toHex()):t.setValue(i).toHex()}function kC(i,t){if(!Array.isArray(i)||!Array.isArray(t)||i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(i[e]!==t[e])return!1;return!0}function Lc(i,t,e){for(const s in e)Array.isArray(t[s])?i[s]=t[s].slice():i[s]=t[s]}const FC={texture:!0,children:!1,baseTexture:!0},Hu=class extends Qi{constructor(i,t,e){let s=!1;e||(e=Z.ADAPTER.createCanvas(),s=!0),e.width=3,e.height=3;const r=J.from(e);r.orig=new pt,r.trim=new pt,super(r),this._ownCanvas=s,this.canvas=e,this.context=e.getContext("2d",{willReadFrequently:!0}),this._resolution=Hu.defaultResolution??Z.RESOLUTION,this._autoResolution=Hu.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=i,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Qt.experimentalLetterSpacing}static set experimentalLetterSpacing(i){ut("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Qt.experimentalLetterSpacing=i}updateText(i){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&i)return;this._font=this._style.toFontString();const e=this.context,s=Qt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),r=s.width,n=s.height,o=s.lines,a=s.lineHeight,l=s.lineWidths,h=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,r)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),e.scale(this._resolution,this._resolution),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.font=this._font,e.lineWidth=t.strokeThickness,e.textBaseline=t.textBaseline,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit;let u,d;const p=t.dropShadow?2:1;for(let m=0;m<p;++m){const g=t.dropShadow&&m===0,_=g?Math.ceil(Math.max(1,n)+t.padding*2):0,x=_*this._resolution;if(g){e.fillStyle="black",e.strokeStyle="black";const y=t.dropShadowColor,w=t.dropShadowBlur*this._resolution,T=t.dropShadowDistance*this._resolution;e.shadowColor=vt.shared.setValue(y).setAlpha(t.dropShadowAlpha).toRgbaString(),e.shadowBlur=w,e.shadowOffsetX=Math.cos(t.dropShadowAngle)*T,e.shadowOffsetY=Math.sin(t.dropShadowAngle)*T+x}else e.fillStyle=this._generateFillStyle(t,o,s),e.strokeStyle=t.stroke,e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;let b=(a-c.fontSize)/2;a-c.fontSize<0&&(b=0);for(let y=0;y<o.length;y++)u=t.strokeThickness/2,d=t.strokeThickness/2+y*a+c.ascent+b,t.align==="right"?u+=h-l[y]:t.align==="center"&&(u+=(h-l[y])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[y],u+t.padding,d+t.padding-_,!0),t.fill&&this.drawLetterSpacing(o[y],u+t.padding,d+t.padding-_)}this.updateTexture()}drawLetterSpacing(i,t,e,s=!1){const n=this._style.letterSpacing;let o=!1;if(Qt.experimentalLetterSpacingSupported&&(Qt.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),n===0||o){s?this.context.strokeText(i,t,e):this.context.fillText(i,t,e);return}let a=t;const l=Qt.graphemeSegmenter(i);let h=this.context.measureText(i).width,c=0;for(let u=0;u<l.length;++u){const d=l[u];s?this.context.strokeText(d,a,e):this.context.fillText(d,a,e);let p="";for(let m=u+1;m<l.length;++m)p+=l[m];c=this.context.measureText(p).width,a+=h-c+n,h=c}}updateTexture(){const i=this.canvas;if(this._style.trim){const n=J_(i);n.data&&(i.width=n.width,i.height=n.height,this.context.putImageData(n.data,0,0))}const t=this._texture,e=this._style,s=e.trim?0:e.padding,r=t.baseTexture;t.trim.width=t._frame.width=i.width/this._resolution,t.trim.height=t._frame.height=i.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),r.setRealSize(i.width,i.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),super._render(i)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(i,t){return this.updateText(!0),this._textureID===-1&&(i=!1),super.getBounds(i,t)}getLocalBounds(i){return this.updateText(!0),super.getLocalBounds.call(this,i)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(i,t,e){const s=i.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let r;const n=i.dropShadow?i.dropShadowDistance:0,o=i.padding||0,a=this.canvas.width/this._resolution-n-o*2,l=this.canvas.height/this._resolution-n-o*2,h=s.slice(),c=i.fillGradientStops.slice();if(!c.length){const u=h.length+1;for(let d=1;d<u;++d)c.push(d/u)}if(h.unshift(s[0]),c.unshift(0),h.push(s[s.length-1]),c.push(1),i.fillGradientType===Oa.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,o,a/2,l+o);const u=e.fontProperties.fontSize+i.strokeThickness;for(let d=0;d<t.length;d++){const p=e.lineHeight*(d-1)+u,m=e.lineHeight*d;let g=m;d>0&&p>m&&(g=(m+p)/2);const _=m+u,x=e.lineHeight*(d+1);let b=_;d+1<t.length&&x<_&&(b=(_+x)/2);const y=(b-g)/l;for(let w=0;w<h.length;w++){let T=0;typeof c[w]=="number"?T=c[w]:T=w/h.length;let D=Math.min(1,Math.max(0,g/l+T*y));D=Number(D.toFixed(5)),r.addColorStop(D,h[w])}}}else{r=this.context.createLinearGradient(o,l/2,a+o,l/2);const u=h.length+1;let d=1;for(let p=0;p<h.length;p++){let m;typeof c[p]=="number"?m=c[p]:m=d/u,r.addColorStop(m,h[p]),d++}}return r}destroy(i){typeof i=="boolean"&&(i={children:i}),i=Object.assign({},FC,i),super.destroy(i),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(i){this.updateText(!0);const t=cs(this.scale.x)||1;this.scale.x=t*i/this._texture.orig.width,this._width=i}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(i){this.updateText(!0);const t=cs(this.scale.y)||1;this.scale.y=t*i/this._texture.orig.height,this._height=i}get style(){return this._style}set style(i){i=i||{},i instanceof Yi?this._style=i:this._style=new Yi(i),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(i){i=String(i??""),this._text!==i&&(this._text=i,this.dirty=!0)}get resolution(){return this._resolution}set resolution(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)}};let Bs=Hu;Bs.defaultAutoResolution=!0;class yv{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function BC(i,t){var s;let e=!1;if((s=i==null?void 0:i._textures)!=null&&s.length){for(let r=0;r<i._textures.length;r++)if(i._textures[r]instanceof J){const n=i._textures[r].baseTexture;t.includes(n)||(t.push(n),e=!0)}}return e}function LC(i,t){if(i.baseTexture instanceof dt){const e=i.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function NC(i,t){if(i._texture&&i._texture instanceof J){const e=i._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function UC(i,t){return t instanceof Bs?(t.updateText(!0),!0):!1}function $C(i,t){if(t instanceof Yi){const e=t.toFontString();return Qt.measureFont(e),!0}return!1}function GC(i,t){if(i instanceof Bs){t.includes(i.style)||t.push(i.style),t.includes(i)||t.push(i);const e=i._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function HC(i,t){return i instanceof Yi?(t.includes(i)||t.push(i),!0):!1}const xv=class{constructor(i){this.limiter=new yv(xv.uploadsPerFrame),this.renderer=i,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(GC),this.registerFindHook(HC),this.registerFindHook(BC),this.registerFindHook(LC),this.registerFindHook(NC),this.registerUploadHook(UC),this.registerUploadHook($C)}upload(i){return new Promise(t=>{i&&this.add(i),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,jt.system.addOnce(this.tick,this,gs.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const i=this.queue[0];let t=!1;if(i&&!i._destroyed){for(let e=0,s=this.uploadHooks.length;e<s;e++)if(this.uploadHooks[e](this.uploadHookHelper,i)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)jt.system.addOnce(this.tick,this,gs.UTILITY);else{this.ticking=!1;const i=this.completes.slice(0);this.completes.length=0;for(let t=0,e=i.length;t<e;t++)i[t]()}}registerFindHook(i){return i&&this.addHooks.push(i),this}registerUploadHook(i){return i&&this.uploadHooks.push(i),this}add(i){for(let t=0,e=this.addHooks.length;t<e&&!this.addHooks[t](i,this.queue);t++);if(i instanceof ee)for(let t=i.children.length-1;t>=0;t--)this.add(i.children[t]);return this}destroy(){this.ticking&&jt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let na=xv;na.uploadsPerFrame=4;Object.defineProperties(Z,{UPLOADS_PER_FRAME:{get(){return na.uploadsPerFrame},set(i){ut("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),na.uploadsPerFrame=i}}});function bv(i,t){return t instanceof dt?(t._glTextures[i.CONTEXT_UID]||i.texture.bind(t),!0):!1}function zC(i,t){if(!(t instanceof _s))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:s}=e;for(let r=0;r<s.length;r++){const{texture:n}=s[r].style;n&&bv(i,n.baseTexture)}return e.batchable||i.geometry.bind(e,t._resolveDirectShader(i)),!0}function VC(i,t){return i instanceof _s?(t.push(i),!0):!1}class xf extends na{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(VC),this.registerUploadHook(bv),this.registerUploadHook(zC)}}xf.extension={name:"prepare",type:Q.RendererSystem};nt.add(xf);class jC{constructor(t){this.maxMilliseconds=t,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}class sh extends Qi{constructor(t,e=!0){super(t[0]instanceof J?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(jt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(jt.shared.add(this.update,this,gs.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=this.animationSpeed*t,s=this.currentFrame;if(this._durations!==null){let r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];const n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s||this.animationSpeed<0&&this.currentFrame>s)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let s=0;s<t.length;++s)e.push(J.from(t[s]));return new sh(e)}static fromImages(t){const e=[];for(let s=0;s<t.length;++s)e.push(J.from(t[s]));return new sh(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof J)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(jt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(jt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const mo=new ft;class bf extends Qi{constructor(t,e=100,s=100){super(t),this.tileTransform=new Ta,this._width=e,this._height=s,this.uvMatrix=this.texture.uvMatrix||new Gh(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const e=this._texture;!e||!e.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,s=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,s,r)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,mo);const e=this._width,s=this._height,r=-e*this.anchor._x;if(mo.x>=r&&mo.x<r+e){const n=-s*this.anchor._y;if(mo.y>=n&&mo.y<n+s)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,e){const s=t instanceof J?t:J.from(t,e);return new bf(s,e.width,e.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var WC=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,XC=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,YC=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Hm=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,qC=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const ml=new Ct;class wf extends Ea{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new jd,this.state=Zi.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=Ci.from(Hm,qC,e),this.shader=t.context.webGLVersion>1?Ci.from(XC,WC,e):Ci.from(Hm,YC,e)}render(t){const e=this.renderer,s=this.quad;let r=s.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);const n=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;r=s.uvs,r[0]=r[6]=-n,r[1]=r[3]=-o,r[2]=r[4]=1-n,r[5]=r[7]=1-o,s.invalidate();const a=t._texture,l=a.baseTexture,h=l.alphaMode>0,c=t.tileTransform.localTransform,u=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[e.CONTEXT_UID]?d=l.wrapMode!==Hi.CLAMP:l.wrapMode===Hi.CLAMP&&(l.wrapMode=Hi.REPEAT));const p=d?this.simpleShader:this.shader,m=a.width,g=a.height,_=t._width,x=t._height;ml.set(c.a*m/_,c.b*m/x,c.c*g/_,c.d*g/x,c.tx/_,c.ty/x),ml.invert(),d?ml.prepend(u.mapCoord):(p.uniforms.uMapCoord=u.mapCoord.toArray(!0),p.uniforms.uClampFrame=u.uClampFrame,p.uniforms.uClampOffset=u.uClampOffset),p.uniforms.uTransform=ml.toArray(!0),p.uniforms.uColor=vt.shared.setValue(t.tint).premultiply(t.worldAlpha,h).toArray(p.uniforms.uColor),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=a,e.shader.bind(p),e.geometry.bind(s),this.state.blendMode=Ld(t.blendMode,h),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}wf.extension={name:"tilingSprite",type:Q.RendererPlugin};nt.add(wf);const Co=class{constructor(i,t,e=null){this.linkedSheets=[],this._texture=i instanceof J?i:null,this.baseTexture=i instanceof dt?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const s=this.baseTexture.resource;this.resolution=this._updateResolution(e||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(i=null){const{scale:t}=this.data.meta;let e=fs(i,null);return e===null&&(e=parseFloat(t??"1")),e!==1&&this.baseTexture.setResolution(e),e}parse(){return new Promise(i=>{this._callback=i,this._batchIndex=0,this._frameKeys.length<=Co.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(i){let t=i;const e=Co.BATCH_SIZE;for(;t-i<e&&t<this._frameKeys.length;){const s=this._frameKeys[t],r=this._frames[s],n=r.frame;if(n){let o=null,a=null;const l=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,h=new pt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);r.rotated?o=new pt(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):o=new pt(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(a=new pt(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[s]=new J(this.baseTexture,o,h,a,r.rotated?2:0,r.anchor,r.borders),J.addToCache(this.textures[s],s)}t++}}_processAnimations(){const i=this.data.animations||{};for(const t in i){this.animations[t]=[];for(let e=0;e<i[t].length;e++){const s=i[t][e];this.animations[t].push(this.textures[s])}}}_parseComplete(){const i=this._callback;this._callback=null,this._batchIndex=0,i.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Co.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Co.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(i=!1){var t;for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,i&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let rh=Co;rh.BATCH_SIZE=1e3;const KC=["jpg","png","jpeg","avif","webp"];function wv(i,t,e){const s={};if(i.forEach(r=>{s[r]=t}),Object.keys(t.textures).forEach(r=>{s[r]=t.textures[r]}),!e){const r=le.dirname(i[0]);t.linkedSheets.forEach((n,o)=>{const a=wv([`${r}/${t.data.meta.related_multi_packs[o]}`],n,!0);Object.assign(s,a)})}return s}const Tv={extension:Q.Asset,cache:{test:i=>i instanceof rh,getCacheableAssets:(i,t)=>wv(i,t,!1)},resolver:{test:i=>{const e=i.split("?")[0].split("."),s=e.pop(),r=e.pop();return s==="json"&&KC.includes(r)},parse:i=>{var e;const t=i.split(".");return{resolution:parseFloat(((e=Z.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:t[t.length-2],src:i}}},loader:{name:"spritesheetLoader",extension:{type:Q.LoadParser,priority:Ri.Normal},async testParse(i,t){return le.extname(t.src).toLowerCase()===".json"&&!!i.frames},async parse(i,t,e){var h,c;let s=le.dirname(t.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");let r=s+i.meta.image;r=ih(r,t.src);const o=(await e.load([r]))[r],a=new rh(o.baseTexture,i,t.src);await a.parse();const l=(h=i==null?void 0:i.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(l)){const u=[];for(const p of l){if(typeof p!="string")continue;let m=s+p;(c=t.data)!=null&&c.ignoreMultiPack||(m=ih(m,t.src),u.push(e.load({src:m,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(u);a.linkedSheets=d,d.forEach(p=>{p.linkedSheets=[a].concat(a.linkedSheets.filter(m=>m!==p))})}return a},unload(i){i.destroy(!0)}}};nt.add(Tv);class oa{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Uo{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const n in e){const o=e[n].match(/^[a-z]+/gm)[0],a=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const h in a){const c=a[h].split("="),u=c[0],d=c[1].replace(/"/gm,""),p=parseFloat(d),m=isNaN(p)?d:p;l[u]=m}s[o].push(l)}const r=new oa;return s.info.forEach(n=>r.info.push({face:n.face,size:parseInt(n.size,10)})),s.common.forEach(n=>r.common.push({lineHeight:parseInt(n.lineHeight,10)})),s.page.forEach(n=>r.page.push({id:parseInt(n.id,10),file:n.file})),s.char.forEach(n=>r.char.push({id:parseInt(n.id,10),page:parseInt(n.page,10),x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10),xoffset:parseInt(n.xoffset,10),yoffset:parseInt(n.yoffset,10),xadvance:parseInt(n.xadvance,10)})),s.kerning.forEach(n=>r.kerning.push({first:parseInt(n.first,10),second:parseInt(n.second,10),amount:parseInt(n.amount,10)})),s.distanceField.forEach(n=>r.distanceField.push({distanceRange:parseInt(n.distanceRange,10),fieldType:n.fieldType})),r}}class nh{static test(t){const e=t;return"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new oa,s=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let h=0;h<s.length;h++)e.info.push({face:s[h].getAttribute("face"),size:parseInt(s[h].getAttribute("size"),10)});for(let h=0;h<r.length;h++)e.common.push({lineHeight:parseInt(r[h].getAttribute("lineHeight"),10)});for(let h=0;h<n.length;h++)e.page.push({id:parseInt(n[h].getAttribute("id"),10)||0,file:n[h].getAttribute("file")});for(let h=0;h<o.length;h++){const c=o[h];e.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)e.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<l.length;h++)e.distanceField.push({fieldType:l[h].getAttribute("fieldType"),distanceRange:parseInt(l[h].getAttribute("distanceRange"),10)});return e}}class oh{static test(t){return typeof t=="string"&&t.includes("<font>")?nh.test(Z.ADAPTER.parseXML(t)):!1}static parse(t){return nh.parse(Z.ADAPTER.parseXML(t))}}const Nc=[Uo,nh,oh];function Ev(i){for(let t=0;t<Nc.length;t++)if(Nc[t].test(i))return Nc[t];return null}function ZC(i,t,e,s,r,n){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=e.dropShadow?e.dropShadowDistance:0,h=e.padding||0,c=i.width/s-l-h*2,u=i.height/s-l-h*2,d=o.slice(),p=e.fillGradientStops.slice();if(!p.length){const m=d.length+1;for(let g=1;g<m;++g)p.push(g/m)}if(d.unshift(o[0]),p.unshift(0),d.push(o[o.length-1]),p.push(1),e.fillGradientType===Oa.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,h,c/2,u+h);let m=0;const _=(n.fontProperties.fontSize+e.strokeThickness)/u;for(let x=0;x<r.length;x++){const b=n.lineHeight*x;for(let y=0;y<d.length;y++){let w=0;typeof p[y]=="number"?w=p[y]:w=y/d.length;const T=b/u+w*_;let D=Math.max(m,T);D=Math.min(D,1),a.addColorStop(D,d[y]),m=D}}}else{a=t.createLinearGradient(h,u/2,c+h,u/2);const m=d.length+1;let g=1;for(let _=0;_<d.length;_++){let x;typeof p[_]=="number"?x=p[_]:x=g/m,a.addColorStop(x,d[_]),g++}}return a}function QC(i,t,e,s,r,n,o){const a=e.text,l=e.fontProperties;t.translate(s,r),t.scale(n,n);const h=o.strokeThickness/2,c=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=ZC(i,t,o,n,[a],e),t.strokeStyle=o.stroke,o.dropShadow){const u=o.dropShadowColor,d=o.dropShadowBlur*n,p=o.dropShadowDistance*n;t.shadowColor=vt.shared.setValue(u).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=d,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,h,c+e.lineHeight-l.descent),o.fill&&t.fillText(a,h,c+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Il(i){return i.codePointAt?i.codePointAt(0):i.charCodeAt(0)}function Av(i){return Array.from?Array.from(i):i.split("")}function JC(i){typeof i=="string"&&(i=[i]);const t=[];for(let e=0,s=i.length;e<s;e++){const r=i[e];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const n=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<n)throw new Error("[BitmapFont]: Invalid character range.");for(let a=n,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...Av(r))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const _i=class{constructor(i,t,e){var h;const[s]=i.info,[r]=i.common,[n]=i.page,[o]=i.distanceField,a=fs(n.file),l={};this._ownsTextures=e,this.font=s.face,this.size=s.size,this.lineHeight=r.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<i.page.length;c++){const{id:u,file:d}=i.page[c];l[u]=t instanceof Array?t[c]:t[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[u].baseTexture.alphaMode=hi.NO_PREMULTIPLIED_ALPHA,l[u].baseTexture.mipmap=Mi.OFF)}for(let c=0;c<i.char.length;c++){const{id:u,page:d}=i.char[c];let{x:p,y:m,width:g,height:_,xoffset:x,yoffset:b,xadvance:y}=i.char[c];p/=a,m/=a,g/=a,_/=a,x/=a,b/=a,y/=a;const w=new pt(p+l[d].frame.x/a,m+l[d].frame.y/a,g,_);this.chars[u]={xOffset:x,yOffset:b,xAdvance:y,kerning:{},texture:new J(l[d].baseTexture,w),page:d}}for(let c=0;c<i.kerning.length;c++){let{first:u,second:d,amount:p}=i.kerning[c];u/=a,d/=a,p/=a,this.chars[d]&&(this.chars[d].kerning[u]=p)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((h=o==null?void 0:o.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const i in this.chars)this.chars[i].texture.destroy(),this.chars[i].texture=null;for(const i in this.pageTextures)this._ownsTextures&&this.pageTextures[i].destroy(!0),this.pageTextures[i]=null;this.chars=null,this.pageTextures=null}static install(i,t,e){let s;if(i instanceof oa)s=i;else{const n=Ev(i);if(!n)throw new Error("Unrecognized data format for font.");s=n.parse(i)}t instanceof J&&(t=[t]);const r=new _i(s,t,e);return _i.available[r.font]=r,r}static uninstall(i){const t=_i.available[i];if(!t)throw new Error(`No font found named '${i}'`);t.destroy(),delete _i.available[i]}static from(i,t,e){if(!i)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:r,resolution:n,textureWidth:o,textureHeight:a,...l}=Object.assign({},_i.defaultOptions,e),h=JC(s),c=t instanceof Yi?t:new Yi(t),u=o,d=new oa;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};let p=0,m=0,g,_,x,b=0;const y=[];for(let T=0;T<h.length;T++){g||(g=Z.ADAPTER.createCanvas(),g.width=o,g.height=a,_=g.getContext("2d"),x=new dt(g,{resolution:n,...l}),y.push(new J(x)),d.page.push({id:y.length-1,file:""}));const D=h[T],I=Qt.measureText(D,c,!1,g),P=I.width,S=Math.ceil(I.height),M=Math.ceil((c.fontStyle==="italic"?2:1)*P);if(m>=a-S*n){if(m===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${D}')`);--T,g=null,_=null,x=null,m=0,p=0,b=0;continue}if(b=Math.max(S+I.fontProperties.descent,b),M*n+p>=u){if(p===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${D}')`);--T,m+=b*n,m=Math.ceil(m),p=0,b=0;continue}QC(g,_,I,p,m,n,c);const O=Il(I.text);d.char.push({id:O,page:y.length-1,x:p/n,y:m/n,width:M,height:S,xoffset:0,yoffset:0,xadvance:P-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),p+=(M+2*r)*n,p=Math.ceil(p)}for(let T=0,D=h.length;T<D;T++){const I=h[T];for(let P=0;P<D;P++){const S=h[P],M=_.measureText(I).width,O=_.measureText(S).width,B=_.measureText(I+S).width-(M+O);B&&d.kerning.push({first:Il(I),second:Il(S),amount:B})}}const w=new _i(d,y,!0);return _i.available[i]!==void 0&&_i.uninstall(i),_i.available[i]=w,w}};let ge=_i;ge.ALPHA=[["a","z"],["A","Z"]," "];ge.NUMERIC=[["0","9"]];ge.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];ge.ASCII=[[" ","~"]];ge.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_i.ALPHANUMERIC};ge.available={};var tS=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,eS=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const zm=[],Vm=[],jm=[],Cv=class extends ee{constructor(i,t={}){super();const{align:e,tint:s,maxWidth:r,letterSpacing:n,fontName:o,fontSize:a}=Object.assign({},Cv.styleDefaults,t);if(!ge.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=e,this._tintColor=new vt(s),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=i,this._maxWidth=r,this._maxLineHeight=0,this._letterSpacing=n,this._anchor=new Ni(()=>{this.dirty=!0},this,0,0),this._roundPixels=Z.ROUND_PIXELS,this.dirty=!0,this._resolution=Z.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var M;const i=ge.available[this._fontName],t=this.fontSize,e=t/i.size,s=new ft,r=[],n=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Av(a),h=this._maxWidth*i.size/t,c=i.distanceFieldType==="none"?zm:Vm;let u=null,d=0,p=0,m=0,g=-1,_=0,x=0,b=0,y=0;for(let O=0;O<l.length;O++){const N=l[O],B=Il(N);if(/(?:\s)/.test(N)&&(g=O,_=d,y++),N==="\r"||N===`
`){n.push(d),o.push(-1),p=Math.max(p,d),++m,++x,s.x=0,s.y+=i.lineHeight,u=null,y=0;continue}const F=i.chars[B];if(!F)continue;u&&F.kerning[u]&&(s.x+=F.kerning[u]);const U=jm.pop()||{texture:J.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ft};U.texture=F.texture,U.line=m,U.charCode=B,U.position.x=Math.round(s.x+F.xOffset+this._letterSpacing/2),U.position.y=Math.round(s.y+F.yOffset),U.prevSpaces=y,r.push(U),d=U.position.x+Math.max(F.xAdvance-F.xOffset,F.texture.orig.width),s.x+=F.xAdvance+this._letterSpacing,b=Math.max(b,F.yOffset+F.texture.height),u=B,g!==-1&&h>0&&s.x>h&&(++x,Ar(r,1+g-x,1+O-g),O=g,g=-1,n.push(_),o.push(r.length>0?r[r.length-1].prevSpaces:0),p=Math.max(p,_),m++,s.x=0,s.y+=i.lineHeight,u=null,y=0)}const w=l[l.length-1];w!=="\r"&&w!==`
`&&(/(?:\s)/.test(w)&&(d=_),n.push(d),p=Math.max(p,d),o.push(-1));const T=[];for(let O=0;O<=m;O++){let N=0;this._align==="right"?N=p-n[O]:this._align==="center"?N=(p-n[O])/2:this._align==="justify"&&(N=o[O]<0?0:(p-n[O])/o[O]),T.push(N)}const D=r.length,I={},P=[],S=this._activePagesMeshData;c.push(...S);for(let O=0;O<D;O++){const N=r[O].texture,B=N.baseTexture.uid;if(!I[B]){let F=c.pop();if(!F){const V=new Da;let k,W;i.distanceFieldType==="none"?(k=new Gn(J.EMPTY),W=lt.NORMAL):(k=new Gn(J.EMPTY,{program:ii.from(eS,tS),uniforms:{uFWidth:0}}),W=lt.NORMAL_NPM);const $=new Lr(V,k);$.blendMode=W,F={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:$,vertices:null,uvs:null,indices:null}}F.index=0,F.indexCount=0,F.vertexCount=0,F.uvsCount=0,F.total=0;const{_textureCache:U}=this;U[B]=U[B]||new J(N.baseTexture),F.mesh.texture=U[B],F.mesh.tint=this._tintColor.value,P.push(F),I[B]=F}I[B].total++}for(let O=0;O<S.length;O++)P.includes(S[O])||this.removeChild(S[O].mesh);for(let O=0;O<P.length;O++)P[O].mesh.parent!==this&&this.addChild(P[O].mesh);this._activePagesMeshData=P;for(const O in I){const N=I[O],B=N.total;if(!(((M=N.indices)==null?void 0:M.length)>6*B)||N.vertices.length<Lr.BATCHABLE_SIZE*2)N.vertices=new Float32Array(4*2*B),N.uvs=new Float32Array(4*2*B),N.indices=new Uint16Array(6*B);else{const F=N.total,U=N.vertices;for(let V=F*4*2;V<U.length;V++)U[V]=0}N.mesh.size=6*B}for(let O=0;O<D;O++){const N=r[O];let B=N.position.x+T[N.line]*(this._align==="justify"?N.prevSpaces:1);this._roundPixels&&(B=Math.round(B));const F=B*e,U=N.position.y*e,V=N.texture,k=I[V.baseTexture.uid],W=V.frame,$=V._uvs,E=k.index++;k.indices[E*6+0]=0+E*4,k.indices[E*6+1]=1+E*4,k.indices[E*6+2]=2+E*4,k.indices[E*6+3]=0+E*4,k.indices[E*6+4]=2+E*4,k.indices[E*6+5]=3+E*4,k.vertices[E*8+0]=F,k.vertices[E*8+1]=U,k.vertices[E*8+2]=F+W.width*e,k.vertices[E*8+3]=U,k.vertices[E*8+4]=F+W.width*e,k.vertices[E*8+5]=U+W.height*e,k.vertices[E*8+6]=F,k.vertices[E*8+7]=U+W.height*e,k.uvs[E*8+0]=$.x0,k.uvs[E*8+1]=$.y0,k.uvs[E*8+2]=$.x1,k.uvs[E*8+3]=$.y1,k.uvs[E*8+4]=$.x2,k.uvs[E*8+5]=$.y2,k.uvs[E*8+6]=$.x3,k.uvs[E*8+7]=$.y3}this._textWidth=p*e,this._textHeight=(s.y+i.lineHeight)*e;for(const O in I){const N=I[O];if(this.anchor.x!==0||this.anchor.y!==0){let V=0;const k=this._textWidth*this.anchor.x,W=this._textHeight*this.anchor.y;for(let $=0;$<N.total;$++)N.vertices[V++]-=k,N.vertices[V++]-=W,N.vertices[V++]-=k,N.vertices[V++]-=W,N.vertices[V++]-=k,N.vertices[V++]-=W,N.vertices[V++]-=k,N.vertices[V++]-=W}this._maxLineHeight=b*e;const B=N.mesh.geometry.getBuffer("aVertexPosition"),F=N.mesh.geometry.getBuffer("aTextureCoord"),U=N.mesh.geometry.getIndex();B.data=N.vertices,F.data=N.uvs,U.data=N.indices,B.update(),F.update(),U.update()}for(let O=0;O<r.length;O++)jm.push(r[O]);this._font=i,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:e,size:s}=ge.available[this._fontName];if(e!=="none"){const{a:r,b:n,c:o,d:a}=this.worldTransform,l=Math.sqrt(r*r+n*n),h=Math.sqrt(o*o+a*a),c=(Math.abs(l)+Math.abs(h))/2,u=this.fontSize/s,d=i._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=c*t*u*d}super._render(i)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const i=ge.available[this._fontName];if(!i)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==i&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(i){if(this.tint!==i){this._tintColor.setValue(i);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=i}}get align(){return this._align}set align(i){this._align!==i&&(this._align=i,this.dirty=!0)}get fontName(){return this._fontName}set fontName(i){if(!ge.available[i])throw new Error(`Missing BitmapFont "${i}"`);this._fontName!==i&&(this._fontName=i,this.dirty=!0)}get fontSize(){return this._fontSize??ge.available[this._fontName].size}set fontSize(i){this._fontSize!==i&&(this._fontSize=i,this.dirty=!0)}get anchor(){return this._anchor}set anchor(i){typeof i=="number"?this._anchor.set(i):this._anchor.copyFrom(i)}get text(){return this._text}set text(i){i=String(i??""),this._text!==i&&(this._text=i,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(i){this._maxWidth!==i&&(this._maxWidth=i,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(i){i!==this._roundPixels&&(this._roundPixels=i,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)}destroy(i){const{_textureCache:t}=this,s=ge.available[this._fontName].distanceFieldType==="none"?zm:Vm;s.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],s.filter(r=>t[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=J.EMPTY});for(const r in t)t[r].destroy(),delete t[r];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(i)}};let Sv=Cv;Sv.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const iS=[".xml",".fnt"],Pv={extension:{type:Q.LoadParser,priority:Ri.Normal},name:"loadBitmapFont",test(i){return iS.includes(le.extname(i).toLowerCase())},async testParse(i){return Uo.test(i)||oh.test(i)},async parse(i,t,e){const s=Uo.test(i)?Uo.parse(i):oh.parse(i),{src:r}=t,{page:n}=s,o=[];for(let h=0;h<n.length;++h){const c=n[h].file;let u=le.join(le.dirname(r),c);u=ih(u,r),o.push(u)}const a=await e.load(o),l=o.map(h=>a[h]);return ge.install(s,l,!0)},async load(i,t){return(await Z.ADAPTER.fetch(i)).text()},unload(i){i.destroy()}};nt.add(Pv);const pn=class extends Yi{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(i){return new pn(Object.keys(pn.defaultOptions).reduce((t,e)=>({...t,[e]:i[e]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(i=>{URL.revokeObjectURL(i.src),i.refs--,i.refs===0&&(i.fontFace&&document.fonts.delete(i.fontFace),delete pn.availableFonts[i.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(i,t={}){const{availableFonts:e}=pn;if(e[i]){const s=e[i];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Z.ADAPTER.fetch(i).then(s=>s.blob()).then(async s=>new Promise((r,n)=>{const o=URL.createObjectURL(s),a=new FileReader;a.onload=()=>r([o,a.result]),a.onerror=n,a.readAsDataURL(s)})).then(async([s,r])=>{const n=Object.assign({family:le.basename(i,le.extname(i)),weight:"normal",style:"normal",src:s,dataSrc:r,refs:1,originalUrl:i,fontFace:null},t);e[i]=n,this._fonts.push(n),this.styleID++;const o=new FontFace(n.family,`url(${n.src})`,{weight:n.weight,style:n.style});n.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...i){const t=i.filter(e=>!this._overrides.includes(e));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...i){const t=i.filter(e=>this._overrides.includes(e));t.length>0&&(this._overrides=this._overrides.filter(e=>!t.includes(e)),this.styleID++)}toCSS(i){return[`transform: scale(${i})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((i,t)=>`${i}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(i){this._stylesheet!==i&&(this._stylesheet=i,this.styleID++)}normalizeColor(i){return Array.isArray(i)&&(i=wa(i)),typeof i=="number"?X_(i):i}dropShadowToCSS(){let i=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,e=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);i.startsWith("#")&&t<1&&(i+=(t*255|0).toString(16).padStart(2,"0"));const r=`${e}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${r} ${this.dropShadowBlur}px ${i}`:`text-shadow: ${r} ${i}`}reset(){Object.assign(this,pn.defaultOptions)}onBeforeDraw(){const{fontsDirty:i}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&i?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:i}=Z.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(i)}set fillGradientStops(i){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(i){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(i){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(i){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(i){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(i){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(i){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let An=pn;An.availableFonts={};An.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const mn=class extends Qi{constructor(i="",t={}){super(J.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const e=new Image,s=J.from(e,{scaleMode:Z.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new pt,s.trim=new pt,this.texture=s;const r="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xhtml",o=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject"),l=document.createElementNS(n,"div"),h=document.createElementNS(n,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=mn.defaultMaxWidth,this.maxHeight=mn.defaultMaxHeight,this._domElement=l,this._styleElement=h,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(h),this._foreignObject.appendChild(l),this._image=e,this._loadImage=new Image,this._autoResolution=mn.defaultAutoResolution,this._resolution=mn.defaultResolution??Z.RESOLUTION,this.text=i,this.style=t}measureText(i){var a,l;const{text:t,style:e,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},i);Object.assign(this._domElement,{innerHTML:t,style:e.toCSS(s)}),this._styleElement.textContent=e.toGlobalCSS(),document.body.appendChild(this._svgRoot);const r=this._domElement.getBoundingClientRect();this._svgRoot.remove();const n=Math.min(this.maxWidth,Math.ceil(r.width)),o=Math.min(this.maxHeight,Math.ceil(r.height));return this._svgRoot.setAttribute("width",n.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),e!==this._style&&(Object.assign(this._domElement,{style:(a=this._style)==null?void 0:a.toCSS(s)}),this._styleElement.textContent=(l=this._style)==null?void 0:l.toGlobalCSS()),{width:n+e.padding*2,height:o+e.padding*2}}async updateText(i=!0){const{style:t,_image:e,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&i)return;const{width:r,height:n}=this.measureText();e.width=s.width=Math.ceil(Math.max(1,r)),e.height=s.height=Math.ceil(Math.max(1,n)),this._loading||(this._loading=!0,await new Promise(o=>{s.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,e.src=s.src,s.onload=null,s.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:i,texture:t,_image:e,resolution:s}=this,{padding:r}=i,{baseTexture:n}=t;t.trim.width=t._frame.width=e.width/s,t.trim.height=t._frame.height=e.height/s,t.trim.x=-r,t.trim.y=-r,t.orig.width=t._frame.width-r*2,t.orig.height=t._frame.height-r*2,this._onTextureUpdate(),n.setRealSize(e.width,e.height,s),this.dirty=!1}_render(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),super._render(i)}_renderCanvas(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(i)}getLocalBounds(i){return this.updateText(!0),super.getLocalBounds(i)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(i){var e,s,r,n,o;typeof i=="boolean"&&(i={children:i}),i=Object.assign({},mn.defaultDestroyOptions,i),super.destroy(i);const t=null;this.ownsStyle&&((e=this._style)==null||e.cleanFonts()),this._style=t,(s=this._svgRoot)==null||s.remove(),this._svgRoot=t,(r=this._domElement)==null||r.remove(),this._domElement=t,(n=this._foreignObject)==null||n.remove(),this._foreignObject=t,(o=this._styleElement)==null||o.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(i){this.updateText(!0);const t=cs(this.scale.x)||1;this.scale.x=t*i/this._image.width/this.resolution,this._width=i}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(i){this.updateText(!0);const t=cs(this.scale.y)||1;this.scale.y=t*i/this._image.height/this.resolution,this._height=i}get style(){return this._style}set style(i){this._style!==i&&(i=i||{},i instanceof An?(this.ownsStyle=!1,this._style=i):i instanceof Yi?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=An.from(i)):(this.ownsStyle=!0,this._style=new An(i)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(i){i=String(i===""||i===null||i===void 0?" ":i),i=this.sanitiseText(i),this._text!==i&&(this._text=i,this.dirty=!0)}get resolution(){return this._resolution}set resolution(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)}sanitiseText(i){return i.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let ka=mn;ka.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};ka.defaultMaxWidth=2024;ka.defaultMaxHeight=2024;ka.defaultAutoResolution=!0;const sS=Object.freeze(Object.defineProperty({__proto__:null,ALPHA_MODES:hi,AbstractMultiResource:df,AccessibilityManager:pf,AlphaFilter:O0,AnimatedSprite:sh,Application:zh,ArrayResource:I0,Assets:br,AssetsClass:q0,Attribute:Zo,BLEND_MODES:lt,BUFFER_BITS:jl,BUFFER_TYPE:Ei,BackgroundSystem:Aa,BaseImageResource:ms,BasePrepare:na,BaseRenderTexture:Gd,BaseTexture:dt,BatchDrawCall:Zl,BatchGeometry:Ud,BatchRenderer:Qe,BatchShaderGenerator:d0,BatchSystem:$d,BatchTextureArray:Ql,BitmapFont:ge,BitmapFontData:oa,BitmapText:Sv,BlobResource:iv,BlurFilter:k0,BlurFilterPass:th,Bounds:Jo,BrowserAdapter:B_,Buffer:Nt,BufferResource:Jn,BufferSystem:cf,CLEAR_MODES:yi,COLOR_MASK_BITS:F_,Cache:dn,CanvasResource:M0,Circle:Nh,Color:vt,ColorMatrixFilter:eh,CompressedTextureResource:Fs,Container:ee,ContextSystem:Ca,CountLimiter:yv,CubeResource:ff,DEG_TO_RAD:Nn,DRAW_MODES:bi,DisplacementFilter:F0,DisplayObject:Dt,ENV:js,Ellipse:Uh,EventBoundary:N0,EventSystem:$n,ExtensionType:Q,Extract:gf,FORMATS:Y,FORMATS_TO_COMPONENTS:rv,FXAAFilter:B0,FederatedDisplayObject:U0,FederatedEvent:to,FederatedMouseEvent:ta,FederatedPointerEvent:Ve,FederatedWheelEvent:Br,FillStyle:Ra,Filter:mt,FilterState:p0,FilterSystem:Wd,Framebuffer:Jl,FramebufferSystem:Xd,GC_MODES:Oh,GLFramebuffer:m0,GLProgram:y0,GLTexture:Al,GRAPHICS_CURVES:bC,GenerateTextureSystem:tf,Geometry:ps,GeometrySystem:Yd,Graphics:_s,GraphicsData:ra,GraphicsGeometry:vf,HTMLText:ka,HTMLTextStyle:An,IGLUniformData:GE,INSTALLED:Kl,INTERNAL_FORMATS:be,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:ia,ImageBitmapResource:xr,ImageResource:Hd,LINE_CAP:Ss,LINE_JOIN:Ye,LineStyle:Wh,LoaderParserPriority:Ri,MASK_TYPES:Xt,MIPMAP_MODES:Mi,MSAA_QUALITY:Vt,MaskData:_0,MaskSystem:qd,Matrix:Ct,Mesh:Lr,MeshBatchUvs:pv,MeshGeometry:Da,MeshMaterial:Gn,MultisampleSystem:hf,NineSlicePlane:SC,NoiseFilter:L0,ObjectRenderer:Ea,ObjectRendererSystem:uf,ObservablePoint:Ni,PI_2:Qo,PRECISION:Fe,ParticleContainer:MC,ParticleRenderer:yf,PlaneGeometry:gv,PluginSystem:Qd,Point:ft,Polygon:Cr,Prepare:xf,Program:ii,ProjectionSystem:Jd,Quad:f0,QuadUv:jd,RAD_TO_DEG:i0,RENDERER_TYPE:kd,Rectangle:pt,RenderTexture:Ws,RenderTexturePool:Vd,RenderTextureSystem:ef,Renderer:Hr,ResizePlugin:mf,Resource:Ln,RopeGeometry:_v,RoundedRectangle:$h,Runner:Be,SAMPLER_TYPES:Wl,SCALE_MODES:wi,SHAPES:Jt,SVGResource:Un,ScissorSystem:Kd,Shader:Ci,ShaderSystem:sf,SimpleMesh:PC,SimplePlane:vv,SimpleRope:IC,Sprite:Qi,SpriteMaskFilter:g0,Spritesheet:rh,StartupSystem:Sa,State:Zi,StateSystem:rf,StencilSystem:Zd,SystemManager:A0,TARGETS:Er,TEXT_GRADIENT:Oa,TYPES:ot,TYPES_TO_BYTES_PER_COMPONENT:Nu,TYPES_TO_BYTES_PER_PIXEL:nv,TemporaryDisplayObject:R0,Text:Bs,TextFormat:Uo,TextMetrics:Qt,TextStyle:Yi,Texture:J,TextureGCSystem:Je,TextureMatrix:Gh,TextureSystem:nf,TextureUvs:zd,Ticker:jt,TickerPlugin:af,TilingSprite:bf,TilingSpriteRenderer:wf,TimeLimiter:jC,Transform:Ta,TransformFeedback:rA,TransformFeedbackSystem:of,UPDATE_PRIORITY:gs,UniformGroup:ai,VERSION:nA,VideoResource:Hh,ViewSystem:Pa,ViewableBuffer:ql,WRAP_MODES:Hi,XMLFormat:nh,XMLStringFormat:oh,accessibleTarget:$0,autoDetectFormat:Ev,autoDetectRenderer:S0,autoDetectResource:Nd,cacheTextureArray:K0,checkDataUrl:eo,checkExtension:Xs,checkMaxIfStatementsInShader:e0,convertToList:zi,copySearchParams:ih,createStringVariations:H0,createTexture:Ia,createUBOElements:w0,curves:Gs,defaultFilterVertex:lf,defaultVertex:P0,detectAvif:Z0,detectCompressedTextures:ev,detectDefaults:J0,detectWebp:Q0,extensions:nt,filters:ku,generateProgram:x0,generateUniformBufferSync:E0,getFontFamilyName:j0,getTestContext:l0,getUBOData:T0,graphicsUtils:EC,groupD8:It,isMobile:Ti,isSingleItem:ea,loadBitmapFont:Pv,loadDDS:av,loadImageBitmap:X0,loadJson:z0,loadKTX:lv,loadSVG:Y0,loadTextures:Ma,loadTxt:V0,loadWebFont:W0,parseDDS:sv,parseKTX:ov,resolveCompressedTextureUrl:hv,resolveTextureUrl:tv,settings:Z,spritesheetAsset:Tv,uniformParsers:Sr,unsafeEvalSupported:u0,utils:cE},Symbol.toStringTag,{value:"Module"}));class rS extends ee{constructor(){super();q(this,"progress");const e=new Bs("Loading...",{fill:"white",fontFamily:"Verdana, Geneva, sans-serif",fontVariant:"small-caps",fontWeight:"900"});e.anchor.set(.5),e.y=he.HEIGHT/2,e.x=he.WIDTH/2;const s=new Bs("Powered by PIXI.JS",{fill:"white",fontFamily:"Verdana, Geneva, sans-serif",fontVariant:"small-caps",fontWeight:"100",fontSize:10});s.anchor.set(.5),s.y=he.HEIGHT-16,s.x=he.WIDTH/2,this.progress=new Bs("0.00%",{fill:"white",fontFamily:"Verdana, Geneva, sans-serif",fontVariant:"small-caps",fontWeight:"300",fontSize:10}),this.progress.anchor.set(.5),this.progress.y=he.HEIGHT-32,this.progress.x=he.WIDTH/2,this.addChild(e,s,this.progress)}updateProgress(e){this.progress.text=this.toPercent(e)}toPercent(e){return e.toFixed(2)+"%"}}class nS{constructor(t){q(this,"status","ON");q(this,"volume",.25);q(this,"name");this.name=t;const e=localStorage.getItem(t),s=["ON","OFF"].includes(e);this.status=s?e:"ON"}setVolume(t){this.volume=t}isEnabled(){return this.status==="ON"}isDisabled(){return this.status!=="ON"}enable(){localStorage.setItem(this.name,"ON"),this.status="ON"}disable(){localStorage.setItem(this.name,"OFF"),this.status="OFF"}toggle(){const t=this.status.replace(/ON|OFF/g,this.status);this.status=t,localStorage.setItem(this.name,t)}}const oS={},aS={},hs={images:oS,audios:aS};class lS extends nS{constructor(){super("SLOT-SOUND");q(this,"winSound");q(this,"spinSound");this.winSound=hs.audios.WIN,this.spinSound=hs.audios.SPIN}playSpin(e){return this.spinSound.volume=e??this.volume,this.spinSound.muted=this.isDisabled(),this.spinSound.play().then(),this.spinSound}playWin(e){return this.winSound.volume=e??this.volume,this.winSound.muted=this.isDisabled(),this.winSound.play().then(),this.winSound}}class hS extends Map{}class cS{constructor(){q(this,"spinner");q(this,"app");q(this,"slotSound");q(this,"slotSymbols");this.spinner=new rS,this.slotSound=new lS,this.slotSymbols=new hS}updateProgress(t){this.spinner.updateProgress(t*100)}setup(){this.slotSymbols.set(bt.BARx1,hs.images.BARx1),this.slotSymbols.set(bt.BARx2,hs.images.BARx2),this.slotSymbols.set(bt.BARx3,hs.images.BARx3),this.slotSymbols.set(bt.SEVEN,hs.images.SEVEN),this.slotSymbols.set(bt.CHERRY,hs.images.CHERRY)}hideSpinner(){this.spinner.destroy()}createPixiApplication(){const t=document.getElementById("slot");if(!t)throw new Error("#slot not found in the document");this.app=new zh({view:t,width:he.WIDTH,height:he.HEIGHT,backgroundColor:"#041238",backgroundAlpha:.7,resolution:1,antialias:!0,hello:!1})}renderSpinner(){this.app.stage.addChild(this.spinner)}}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.18.2
 * @author George Michael Brower
 * @license MIT
 */class Vi{constructor(t,e,s,r,n="div"){this.parent=t,this.object=e,this.property=s,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),Vi.nextNameID=Vi.nextNameID||0,this.$name.id=`lil-gui-name-${++Vi.nextNameID}`,this.$widget=document.createElement(n),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",o=>o.stopPropagation()),this.domElement.addEventListener("keyup",o=>o.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(s)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled?this:(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t),this)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class uS extends Vi{constructor(t,e,s){super(t,e,s,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function zu(i){let t,e;return(t=i.match(/(#|0x)?([a-f0-9]{6})/i))?e=t[2]:(t=i.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?e=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=i.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(e=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),e?"#"+e:!1}const dS={isPrimitive:!0,match:i=>typeof i=="string",fromHexString:zu,toHexString:zu},aa={isPrimitive:!0,match:i=>typeof i=="number",fromHexString:i=>parseInt(i.substring(1),16),toHexString:i=>"#"+i.toString(16).padStart(6,0)},fS={isPrimitive:!1,match:i=>Array.isArray(i),fromHexString(i,t,e=1){const s=aa.fromHexString(i);t[0]=(s>>16&255)/255*e,t[1]=(s>>8&255)/255*e,t[2]=(s&255)/255*e},toHexString([i,t,e],s=1){s=255/s;const r=i*s<<16^t*s<<8^e*s<<0;return aa.toHexString(r)}},pS={isPrimitive:!1,match:i=>Object(i)===i,fromHexString(i,t,e=1){const s=aa.fromHexString(i);t.r=(s>>16&255)/255*e,t.g=(s>>8&255)/255*e,t.b=(s&255)/255*e},toHexString({r:i,g:t,b:e},s=1){s=255/s;const r=i*s<<16^t*s<<8^e*s<<0;return aa.toHexString(r)}},mS=[dS,aa,fS,pS];function gS(i){return mS.find(t=>t.match(i))}class _S extends Vi{constructor(t,e,s,r){super(t,e,s,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=gS(this.initialValue),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const n=zu(this.$text.value);n&&this._setValueFromHexString(n)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class Uc extends Vi{constructor(t,e,s){super(t,e,s,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class vS extends Vi{constructor(t,e,s,r,n,o){super(t,e,s,"number"),this._initInput(),this.min(r),this.max(n);const a=o!==void 0;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=e*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=()=>{let b=parseFloat(this.$input.value);isNaN(b)||(this._stepExplicit&&(b=this._snap(b)),this.setValue(this._clamp(b)))},s=b=>{const y=parseFloat(this.$input.value);isNaN(y)||(this._snapClampSetValue(y+b),this.$input.value=this.getValue())},r=b=>{b.key==="Enter"&&this.$input.blur(),b.code==="ArrowUp"&&(b.preventDefault(),s(this._step*this._arrowKeyMultiplier(b))),b.code==="ArrowDown"&&(b.preventDefault(),s(this._step*this._arrowKeyMultiplier(b)*-1))},n=b=>{this._inputFocused&&(b.preventDefault(),s(this._step*this._normalizeMouseWheel(b)))};let o=!1,a,l,h,c,u;const d=5,p=b=>{a=b.clientX,l=h=b.clientY,o=!0,c=this.getValue(),u=0,window.addEventListener("mousemove",m),window.addEventListener("mouseup",g)},m=b=>{if(o){const y=b.clientX-a,w=b.clientY-l;Math.abs(w)>d?(b.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(y)>d&&g()}if(!o){const y=b.clientY-h;u-=y*this._step*this._arrowKeyMultiplier(b),c+u>this._max?u=this._max-c:c+u<this._min&&(u=this._min-c),this._snapClampSetValue(c+u)}h=b.clientY},g=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",g)},_=()=>{this._inputFocused=!0},x=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",e),this.$input.addEventListener("keydown",r),this.$input.addEventListener("wheel",n,{passive:!1}),this.$input.addEventListener("mousedown",p),this.$input.addEventListener("focus",_),this.$input.addEventListener("blur",x)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=(x,b,y,w,T)=>(x-b)/(y-b)*(T-w)+w,e=x=>{const b=this.$slider.getBoundingClientRect();let y=t(x,b.left,b.right,this._min,this._max);this._snapClampSetValue(y)},s=x=>{this._setDraggingStyle(!0),e(x.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",n)},r=x=>{e(x.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",n)};let o=!1,a,l;const h=x=>{x.preventDefault(),this._setDraggingStyle(!0),e(x.touches[0].clientX),o=!1},c=x=>{x.touches.length>1||(this._hasScrollBar?(a=x.touches[0].clientX,l=x.touches[0].clientY,o=!0):h(x),window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("touchend",d))},u=x=>{if(o){const b=x.touches[0].clientX-a,y=x.touches[0].clientY-l;Math.abs(b)>Math.abs(y)?h(x):(window.removeEventListener("touchmove",u),window.removeEventListener("touchend",d))}else x.preventDefault(),e(x.touches[0].clientX)},d=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",d)},p=this._callOnFinishChange.bind(this),m=400;let g;const _=x=>{if(Math.abs(x.deltaX)<Math.abs(x.deltaY)&&this._hasScrollBar)return;x.preventDefault();const y=this._normalizeMouseWheel(x)*this._step;this._snapClampSetValue(this.getValue()+y),this.$input.value=this.getValue(),clearTimeout(g),g=setTimeout(p,m)};this.$slider.addEventListener("mousedown",s),this.$slider.addEventListener("touchstart",c,{passive:!1}),this.$slider.addEventListener("wheel",_,{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle(`lil-gui-${e}`,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:s}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,s=-t.wheelDelta/120,s*=this._stepExplicit?1:10),e+-s}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){const e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class yS extends Vi{constructor(t,e,s,r){super(t,e,s,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(n=>{const o=document.createElement("option");o.innerHTML=n,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.innerHTML=e===-1?t:this._names[e],this}}class xS extends Vi{constructor(t,e,s){super(t,e,s,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const bS=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function wS(i){const t=document.createElement("style");t.innerHTML=i;const e=document.querySelector("head link[rel=stylesheet], head style");e?document.head.insertBefore(t,e):document.head.appendChild(t)}let Wm=!1;class Tf{constructor({parent:t,autoPlace:e=t===void 0,container:s,width:r,title:n="Controls",closeFolders:o=!1,injectStyles:a=!0,touchStyles:l=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",h=>{(h.code==="Enter"||h.code==="Space")&&(h.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(n),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),l&&this.domElement.classList.add("allow-touch-styles"),!Wm&&a&&(wS(bS),Wm=!0),s?s.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this._closeFolders=o}add(t,e,s,r,n){if(Object(s)===s)return new yS(this,t,e,s);const o=t[e];switch(typeof o){case"number":return new vS(this,t,e,s,r,n);case"boolean":return new uS(this,t,e);case"string":return new xS(this,t,e);case"function":return new Uc(this,t,e)}console.error(`gui.add failed
	property:`,e,`
	object:`,t,`
	value:`,o)}addColor(t,e,s=1){return new _S(this,t,e,s)}addFolder(t){const e=new Tf({parent:this,title:t});return this.root._closeFolders&&e.close(),e}load(t,e=!0){return t.controllers&&this.controllers.forEach(s=>{s instanceof Uc||s._name in t.controllers&&s.load(t.controllers[s._name])}),e&&t.folders&&this.folders.forEach(s=>{s._title in t.folders&&s.load(t.folders[s._title])}),this}save(t=!0){const e={controllers:{},folders:{}};return this.controllers.forEach(s=>{if(!(s instanceof Uc)){if(s._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${s._name}"`);e.controllers[s._name]=s.save()}}),t&&this.folders.forEach(s=>{if(s._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${s._title}"`);e.folders[s._title]=s.save()}),e}open(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(t){this._closed!==t&&(this._closed=t,this._callOnOpenClose(this))}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");const s=n=>{n.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",s))};this.$children.addEventListener("transitionend",s);const r=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(s=>s.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onOpenClose(t){return this._onOpenClose=t,this}_callOnOpenClose(t){this.parent&&this.parent._callOnOpenClose(t),this._onOpenClose!==void 0&&this._onOpenClose.call(this,t)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(e=>{t=t.concat(e.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(e=>{t=t.concat(e.foldersRecursive())}),t}}const TS=Tf,ES={enabled(){return window.location.hash.includes("debug")},disabled(){return!this.enabled()}},Iv=new TS({title:"Slot Machine"});Iv.show(ES.enabled());class Mv{constructor(t,e){this.gui=t,this.app=e}}const _r=class _r extends _s{constructor(t,e){super(),this.y=e-_r.height/2,this.x=t,this.beginFill("#7691dc",.8),this.drawRoundedRect(0,0,_r.width,_r.height,4),this.endFill(),this.zIndex=2}};q(_r,"width",8),q(_r,"height",4);let vi=_r;class AS{constructor(t="Full block"){q(this,"_value");this._value=t}get value(){return this._value}partial(){this._value="Partial block"}full(){this._value="Full block"}isPartial(){return this._value==="Partial block"}isFull(){return this._value==="Full block"}chooseRandomly(){return Math.random()>.5?this.partial():this.full()}byPosition(t){return t==="Middle"?this.partial():this.full()}equals(t){return this.value===t.value}}function os(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Rv(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Le={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Hn={duration:.5,overwrite:!1,delay:0},Ef,de,Ut,si=1e8,At=1/si,Vu=Math.PI*2,CS=Vu/4,SS=0,Dv=Math.sqrt,PS=Math.cos,IS=Math.sin,ie=function(t){return typeof t=="string"},$t=function(t){return typeof t=="function"},vs=function(t){return typeof t=="number"},Af=function(t){return typeof t>"u"},qi=function(t){return typeof t=="object"},Te=function(t){return t!==!1},Cf=function(){return typeof window<"u"},gl=function(t){return $t(t)||ie(t)},Ov=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},fe=Array.isArray,ju=/(?:-?\.?\d|\.)+/gi,kv=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,yn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,$c=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Fv=/[+-]=-?[.\d]+/,Bv=/[^,'"\[\]\s]+/gi,MS=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ft,We,Wu,Sf,Ge={},ah={},Lv,Nv=function(t){return(ah=Nr(t,Ge))&&Ce},Pf=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},lh=function(t,e){return!e&&console.warn(t)},Uv=function(t,e){return t&&(Ge[t]=e)&&ah&&(ah[t]=e)||Ge},la=function(){return 0},RS={suppressEvents:!0,isStart:!0,kill:!1},Ml={suppressEvents:!0,kill:!1},DS={suppressEvents:!0},If={},Ls=[],Xu={},$v,De={},Gc={},Xm=30,Rl=[],Mf="",Rf=function(t){var e=t[0],s,r;if(qi(e)||$t(e)||(t=[t]),!(s=(e._gsap||{}).harness)){for(r=Rl.length;r--&&!Rl[r].targetTest(e););s=Rl[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new cy(t[r],s)))||t.splice(r,1);return t},Pr=function(t){return t._gsap||Rf(ri(t))[0]._gsap},Gv=function(t,e,s){return(s=t[e])&&$t(s)?t[e]():Af(s)&&t.getAttribute&&t.getAttribute(e)||s},Ee=function(t,e){return(t=t.split(",")).forEach(e)||t},Ht=function(t){return Math.round(t*1e5)/1e5||0},oe=function(t){return Math.round(t*1e7)/1e7||0},Cn=function(t,e){var s=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),s==="+"?t+r:s==="-"?t-r:s==="*"?t*r:t/r},OS=function(t,e){for(var s=e.length,r=0;t.indexOf(e[r])<0&&++r<s;);return r<s},hh=function(){var t=Ls.length,e=Ls.slice(0),s,r;for(Xu={},Ls.length=0,s=0;s<t;s++)r=e[s],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Hv=function(t,e,s,r){Ls.length&&!de&&hh(),t.render(e,s,r||de&&e<0&&(t._initted||t._startAt)),Ls.length&&!de&&hh()},zv=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Bv).length<2?e:ie(t)?t.trim():t},Vv=function(t){return t},li=function(t,e){for(var s in e)s in t||(t[s]=e[s]);return t},kS=function(t){return function(e,s){for(var r in s)r in e||r==="duration"&&t||r==="ease"||(e[r]=s[r])}},Nr=function(t,e){for(var s in e)t[s]=e[s];return t},Ym=function i(t,e){for(var s in e)s!=="__proto__"&&s!=="constructor"&&s!=="prototype"&&(t[s]=qi(e[s])?i(t[s]||(t[s]={}),e[s]):e[s]);return t},ch=function(t,e){var s={},r;for(r in t)r in e||(s[r]=t[r]);return s},$o=function(t){var e=t.parent||Ft,s=t.keyframes?kS(fe(t.keyframes)):li;if(Te(t.inherit))for(;e;)s(t,e.vars.defaults),e=e.parent||e._dp;return t},FS=function(t,e){for(var s=t.length,r=s===e.length;r&&s--&&t[s]===e[s];);return s<0},jv=function(t,e,s,r,n){s===void 0&&(s="_first"),r===void 0&&(r="_last");var o=t[r],a;if(n)for(a=e[n];o&&o[n]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[s],t[s]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},Xh=function(t,e,s,r){s===void 0&&(s="_first"),r===void 0&&(r="_last");var n=e._prev,o=e._next;n?n._next=o:t[s]===e&&(t[s]=o),o?o._prev=n:t[r]===e&&(t[r]=n),e._next=e._prev=e.parent=null},Hs=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Ir=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var s=t;s;)s._dirty=1,s=s.parent;return t},BS=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Yu=function(t,e,s,r){return t._startAt&&(de?t._startAt.revert(Ml):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},LS=function i(t){return!t||t._ts&&i(t.parent)},qm=function(t){return t._repeat?zn(t._tTime,t=t.duration()+t._rDelay)*t:0},zn=function(t,e){var s=Math.floor(t/=e);return t&&s===t?s-1:s},uh=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Yh=function(t){return t._end=oe(t._start+(t._tDur/Math.abs(t._ts||t._rts||At)||0))},qh=function(t,e){var s=t._dp;return s&&s.smoothChildTiming&&t._ts&&(t._start=oe(s._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Yh(t),s._dirty||Ir(s,t)),t},Wv=function(t,e){var s;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(s=uh(t.rawTime(),e),(!e._dur||Fa(0,e.totalDuration(),s)-e._tTime>At)&&e.render(s,!0)),Ir(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(s=t;s._dp;)s.rawTime()>=0&&s.totalTime(s._tTime),s=s._dp;t._zTime=-At}},Li=function(t,e,s,r){return e.parent&&Hs(e),e._start=oe((vs(s)?s:s||t!==Ft?je(t,s,e):t._time)+e._delay),e._end=oe(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),jv(t,e,"_first","_last",t._sort?"_start":0),qu(e)||(t._recent=e),r||Wv(t,e),t._ts<0&&qh(t,t._tTime),t},Xv=function(t,e){return(Ge.ScrollTrigger||Pf("scrollTrigger",e))&&Ge.ScrollTrigger.create(e,t)},Yv=function(t,e,s,r,n){if(Of(t,e,n),!t._initted)return 1;if(!s&&t._pt&&!de&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&$v!==Oe.frame)return Ls.push(t),t._lazy=[n,r],1},NS=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},qu=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},US=function(t,e,s,r){var n=t.ratio,o=e<0||!e&&(!t._start&&NS(t)&&!(!t._initted&&qu(t))||(t._ts<0||t._dp._ts<0)&&!qu(t))?0:1,a=t._rDelay,l=0,h,c,u;if(a&&t._repeat&&(l=Fa(0,t._tDur,e),c=zn(l,a),t._yoyo&&c&1&&(o=1-o),c!==zn(t._tTime,a)&&(n=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==n||de||r||t._zTime===At||!e&&t._zTime){if(!t._initted&&Yv(t,e,r,s,l))return;for(u=t._zTime,t._zTime=e||(s?At:0),s||(s=e&&!u),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,h=t._pt;h;)h.r(o,h.d),h=h._next;e<0&&Yu(t,e,s,!0),t._onUpdate&&!s&&ni(t,"onUpdate"),l&&t._repeat&&!s&&t.parent&&ni(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Hs(t,1),!s&&!de&&(ni(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},$S=function(t,e,s){var r;if(s>e)for(r=t._first;r&&r._start<=s;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=s;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},Vn=function(t,e,s,r){var n=t._repeat,o=oe(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=n?n<0?1e10:oe(o*(n+1)+t._rDelay*n):o,a>0&&!r&&qh(t,t._tTime=t._tDur*a),t.parent&&Yh(t),s||Ir(t.parent,t),t},Km=function(t){return t instanceof we?Ir(t):Vn(t,t._dur)},GS={_start:0,endTime:la,totalDuration:la},je=function i(t,e,s){var r=t.labels,n=t._recent||GS,o=t.duration()>=si?n.endTime(!1):t._dur,a,l,h;return ie(e)&&(isNaN(e)||e in r)?(l=e.charAt(0),h=e.substr(-1)==="%",a=e.indexOf("="),l==="<"||l===">"?(a>=0&&(e=e.replace(/=/,"")),(l==="<"?n._start:n.endTime(n._repeat>=0))+(parseFloat(e.substr(1))||0)*(h?(a<0?n:s).totalDuration()/100:1)):a<0?(e in r||(r[e]=o),r[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),h&&s&&(l=l/100*(fe(s)?s[0]:s).totalDuration()),a>1?i(t,e.substr(0,a-1),s)+l:o+l)):e==null?o:+e},Go=function(t,e,s){var r=vs(e[1]),n=(r?2:1)+(t<2?0:1),o=e[n],a,l;if(r&&(o.duration=e[1]),o.parent=s,t){for(a=o,l=s;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Te(l.vars.inherit)&&l.parent;o.immediateRender=Te(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[n-1]}return new Yt(e[0],o,e[n+1])},Ys=function(t,e){return t||t===0?e(t):e},Fa=function(t,e,s){return s<t?t:s>e?e:s},ce=function(t,e){return!ie(t)||!(e=MS.exec(t))?"":e[1]},HS=function(t,e,s){return Ys(s,function(r){return Fa(t,e,r)})},Ku=[].slice,qv=function(t,e){return t&&qi(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&qi(t[0]))&&!t.nodeType&&t!==We},zS=function(t,e,s){return s===void 0&&(s=[]),t.forEach(function(r){var n;return ie(r)&&!e||qv(r,1)?(n=s).push.apply(n,ri(r)):s.push(r)})||s},ri=function(t,e,s){return Ut&&!e&&Ut.selector?Ut.selector(t):ie(t)&&!s&&(Wu||!jn())?Ku.call((e||Sf).querySelectorAll(t),0):fe(t)?zS(t,s):qv(t)?Ku.call(t,0):t?[t]:[]},Zu=function(t){return t=ri(t)[0]||lh("Invalid scope")||{},function(e){var s=t.current||t.nativeElement||t;return ri(e,s.querySelectorAll?s:s===t?lh("Invalid scope")||Sf.createElement("div"):t)}},Kv=function(t){return t.sort(function(){return .5-Math.random()})},Zv=function(t){if($t(t))return t;var e=qi(t)?t:{each:t},s=Mr(e.ease),r=e.from||0,n=parseFloat(e.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,h=e.axis,c=r,u=r;return ie(r)?c=u={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(c=r[0],u=r[1]),function(d,p,m){var g=(m||e).length,_=o[g],x,b,y,w,T,D,I,P,S;if(!_){if(S=e.grid==="auto"?0:(e.grid||[1,si])[1],!S){for(I=-si;I<(I=m[S++].getBoundingClientRect().left)&&S<g;);S--}for(_=o[g]=[],x=l?Math.min(S,g)*c-.5:r%S,b=S===si?0:l?g*u/S-.5:r/S|0,I=0,P=si,D=0;D<g;D++)y=D%S-x,w=b-(D/S|0),_[D]=T=h?Math.abs(h==="y"?w:y):Dv(y*y+w*w),T>I&&(I=T),T<P&&(P=T);r==="random"&&Kv(_),_.max=I-P,_.min=P,_.v=g=(parseFloat(e.amount)||parseFloat(e.each)*(S>g?g-1:h?h==="y"?g/S:S:Math.max(S,g/S))||0)*(r==="edges"?-1:1),_.b=g<0?n-g:n,_.u=ce(e.amount||e.each)||0,s=s&&g<0?ay(s):s}return g=(_[d]-_.min)/_.max||0,oe(_.b+(s?s(g):g)*_.v)+_.u}},Qu=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(s){var r=oe(Math.round(parseFloat(s)/t)*t*e);return(r-r%1)/e+(vs(s)?0:ce(s))}},Qv=function(t,e){var s=fe(t),r,n;return!s&&qi(t)&&(r=s=t.radius||si,t.values?(t=ri(t.values),(n=!vs(t[0]))&&(r*=r)):t=Qu(t.increment)),Ys(e,s?$t(t)?function(o){return n=t(o),Math.abs(n-o)<=r?n:o}:function(o){for(var a=parseFloat(n?o.x:o),l=parseFloat(n?o.y:0),h=si,c=0,u=t.length,d,p;u--;)n?(d=t[u].x-a,p=t[u].y-l,d=d*d+p*p):d=Math.abs(t[u]-a),d<h&&(h=d,c=u);return c=!r||h<=r?t[c]:o,n||c===o||vs(o)?c:c+ce(o)}:Qu(t))},Jv=function(t,e,s,r){return Ys(fe(t)?!e:s===!0?!!(s=0):!r,function(){return fe(t)?t[~~(Math.random()*t.length)]:(s=s||1e-5)&&(r=s<1?Math.pow(10,(s+"").length-2):1)&&Math.floor(Math.round((t-s/2+Math.random()*(e-t+s*.99))/s)*s*r)/r})},VS=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return function(r){return e.reduce(function(n,o){return o(n)},r)}},jS=function(t,e){return function(s){return t(parseFloat(s))+(e||ce(s))}},WS=function(t,e,s){return ey(t,e,0,1,s)},ty=function(t,e,s){return Ys(s,function(r){return t[~~e(r)]})},XS=function i(t,e,s){var r=e-t;return fe(t)?ty(t,i(0,t.length),e):Ys(s,function(n){return(r+(n-t)%r)%r+t})},YS=function i(t,e,s){var r=e-t,n=r*2;return fe(t)?ty(t,i(0,t.length-1),e):Ys(s,function(o){return o=(n+(o-t)%n)%n||0,t+(o>r?n-o:o)})},ha=function(t){for(var e=0,s="",r,n,o,a;~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),a=t.charAt(r+7)==="[",n=t.substr(r+7,o-r-7).match(a?Bv:ju),s+=t.substr(e,r-e)+Jv(a?n:+n[0],a?0:+n[1],+n[2]||1e-5),e=o+1;return s+t.substr(e,t.length-e)},ey=function(t,e,s,r,n){var o=e-t,a=r-s;return Ys(n,function(l){return s+((l-t)/o*a||0)})},qS=function i(t,e,s,r){var n=isNaN(t+e)?0:function(p){return(1-p)*t+p*e};if(!n){var o=ie(t),a={},l,h,c,u,d;if(s===!0&&(r=1)&&(s=null),o)t={p:t},e={p:e};else if(fe(t)&&!fe(e)){for(c=[],u=t.length,d=u-2,h=1;h<u;h++)c.push(i(t[h-1],t[h]));u--,n=function(m){m*=u;var g=Math.min(d,~~m);return c[g](m-g)},s=e}else r||(t=Nr(fe(t)?[]:{},t));if(!c){for(l in e)Df.call(a,t,l,"get",e[l]);n=function(m){return Bf(m,a)||(o?t.p:t)}}}return Ys(s,n)},Zm=function(t,e,s){var r=t.labels,n=si,o,a,l;for(o in r)a=r[o]-e,a<0==!!s&&a&&n>(a=Math.abs(a))&&(l=o,n=a);return l},ni=function(t,e,s){var r=t.vars,n=r[e],o=Ut,a=t._ctx,l,h,c;if(n)return l=r[e+"Params"],h=r.callbackScope||t,s&&Ls.length&&hh(),a&&(Ut=a),c=l?n.apply(h,l):n.call(h),Ut=o,c},So=function(t){return Hs(t),t.scrollTrigger&&t.scrollTrigger.kill(!!de),t.progress()<1&&ni(t,"onInterrupt"),t},xn,iy=[],sy=function(t){if(Cf()&&t){t=!t.name&&t.default||t;var e=t.name,s=$t(t),r=e&&!s&&t.init?function(){this._props=[]}:t,n={init:la,render:Bf,add:Df,kill:uP,modifier:cP,rawVars:0},o={targetTest:0,get:0,getSetter:Ff,aliases:{},register:0};if(jn(),t!==r){if(De[e])return;li(r,li(ch(t,n),o)),Nr(r.prototype,Nr(n,ch(t,o))),De[r.prop=e]=r,t.targetTest&&(Rl.push(r),If[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Uv(e,r),t.register&&t.register(Ce,r,Ae)}else t&&iy.push(t)},Et=255,Po={aqua:[0,Et,Et],lime:[0,Et,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Et],navy:[0,0,128],white:[Et,Et,Et],olive:[128,128,0],yellow:[Et,Et,0],orange:[Et,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Et,0,0],pink:[Et,192,203],cyan:[0,Et,Et],transparent:[Et,Et,Et,0]},Hc=function(t,e,s){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(s-e)*t*6:t<.5?s:t*3<2?e+(s-e)*(2/3-t)*6:e)*Et+.5|0},ry=function(t,e,s){var r=t?vs(t)?[t>>16,t>>8&Et,t&Et]:0:Po.black,n,o,a,l,h,c,u,d,p,m;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Po[t])r=Po[t];else if(t.charAt(0)==="#"){if(t.length<6&&(n=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+n+n+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&Et,r&Et,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&Et,t&Et]}else if(t.substr(0,3)==="hsl"){if(r=m=t.match(ju),!e)l=+r[0]%360/360,h=+r[1]/100,c=+r[2]/100,o=c<=.5?c*(h+1):c+h-c*h,n=c*2-o,r.length>3&&(r[3]*=1),r[0]=Hc(l+1/3,n,o),r[1]=Hc(l,n,o),r[2]=Hc(l-1/3,n,o);else if(~t.indexOf("="))return r=t.match(kv),s&&r.length<4&&(r[3]=1),r}else r=t.match(ju)||Po.transparent;r=r.map(Number)}return e&&!m&&(n=r[0]/Et,o=r[1]/Et,a=r[2]/Et,u=Math.max(n,o,a),d=Math.min(n,o,a),c=(u+d)/2,u===d?l=h=0:(p=u-d,h=c>.5?p/(2-u-d):p/(u+d),l=u===n?(o-a)/p+(o<a?6:0):u===o?(a-n)/p+2:(n-o)/p+4,l*=60),r[0]=~~(l+.5),r[1]=~~(h*100+.5),r[2]=~~(c*100+.5)),s&&r.length<4&&(r[3]=1),r},ny=function(t){var e=[],s=[],r=-1;return t.split(Ns).forEach(function(n){var o=n.match(yn)||[];e.push.apply(e,o),s.push(r+=o.length+1)}),e.c=s,e},Qm=function(t,e,s){var r="",n=(t+r).match(Ns),o=e?"hsla(":"rgba(",a=0,l,h,c,u;if(!n)return t;if(n=n.map(function(d){return(d=ry(d,e,1))&&o+(e?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),s&&(c=ny(t),l=s.c,l.join(r)!==c.c.join(r)))for(h=t.replace(Ns,"1").split(yn),u=h.length-1;a<u;a++)r+=h[a]+(~l.indexOf(a)?n.shift()||o+"0,0,0,0)":(c.length?c:n.length?n:s).shift());if(!h)for(h=t.split(Ns),u=h.length-1;a<u;a++)r+=h[a]+n[a];return r+h[u]},Ns=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Po)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),KS=/hsl[a]?\(/,oy=function(t){var e=t.join(" "),s;if(Ns.lastIndex=0,Ns.test(e))return s=KS.test(e),t[1]=Qm(t[1],s),t[0]=Qm(t[0],s,ny(t[1])),!0},ca,Oe=function(){var i=Date.now,t=500,e=33,s=i(),r=s,n=1e3/240,o=n,a=[],l,h,c,u,d,p,m=function g(_){var x=i()-r,b=_===!0,y,w,T,D;if(x>t&&(s+=x-e),r+=x,T=r-s,y=T-o,(y>0||b)&&(D=++u.frame,d=T-u.time*1e3,u.time=T=T/1e3,o+=y+(y>=n?4:n-y),w=1),b||(l=h(g)),w)for(p=0;p<a.length;p++)a[p](T,d,D,_)};return u={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(_){return d/(1e3/(_||60))},wake:function(){Lv&&(!Wu&&Cf()&&(We=Wu=window,Sf=We.document||{},Ge.gsap=Ce,(We.gsapVersions||(We.gsapVersions=[])).push(Ce.version),Nv(ah||We.GreenSockGlobals||!We.gsap&&We||{}),c=We.requestAnimationFrame,iy.forEach(sy)),l&&u.sleep(),h=c||function(_){return setTimeout(_,o-u.time*1e3+1|0)},ca=1,m(2))},sleep:function(){(c?We.cancelAnimationFrame:clearTimeout)(l),ca=0,h=la},lagSmoothing:function(_,x){t=_||1/0,e=Math.min(x||33,t)},fps:function(_){n=1e3/(_||240),o=u.time*1e3+n},add:function(_,x,b){var y=x?function(w,T,D,I){_(w,T,D,I),u.remove(y)}:_;return u.remove(_),a[b?"unshift":"push"](y),jn(),y},remove:function(_,x){~(x=a.indexOf(_))&&a.splice(x,1)&&p>=x&&p--},_listeners:a},u}(),jn=function(){return!ca&&Oe.wake()},yt={},ZS=/^[\d.\-M][\d.\-,\s]/,QS=/["']/g,JS=function(t){for(var e={},s=t.substr(1,t.length-3).split(":"),r=s[0],n=1,o=s.length,a,l,h;n<o;n++)l=s[n],a=n!==o-1?l.lastIndexOf(","):l.length,h=l.substr(0,a),e[r]=isNaN(h)?h.replace(QS,"").trim():+h,r=l.substr(a+1).trim();return e},tP=function(t){var e=t.indexOf("(")+1,s=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<s?t.indexOf(")",s+1):s)},eP=function(t){var e=(t+"").split("("),s=yt[e[0]];return s&&e.length>1&&s.config?s.config.apply(null,~t.indexOf("{")?[JS(e[1])]:tP(t).split(",").map(zv)):yt._CE&&ZS.test(t)?yt._CE("",t):s},ay=function(t){return function(e){return 1-t(1-e)}},ly=function i(t,e){for(var s=t._first,r;s;)s instanceof we?i(s,e):s.vars.yoyoEase&&(!s._yoyo||!s._repeat)&&s._yoyo!==e&&(s.timeline?i(s.timeline,e):(r=s._ease,s._ease=s._yEase,s._yEase=r,s._yoyo=e)),s=s._next},Mr=function(t,e){return t&&($t(t)?t:yt[t]||eP(t))||e},zr=function(t,e,s,r){s===void 0&&(s=function(l){return 1-e(1-l)}),r===void 0&&(r=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var n={easeIn:e,easeOut:s,easeInOut:r},o;return Ee(t,function(a){yt[a]=Ge[a]=n,yt[o=a.toLowerCase()]=s;for(var l in n)yt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=yt[a+"."+l]=n[l]}),n},hy=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},zc=function i(t,e,s){var r=e>=1?e:1,n=(s||(t?.3:.45))/(e<1?e:1),o=n/Vu*(Math.asin(1/r)||0),a=function(c){return c===1?1:r*Math.pow(2,-10*c)*IS((c-o)*n)+1},l=t==="out"?a:t==="in"?function(h){return 1-a(1-h)}:hy(a);return n=Vu/n,l.config=function(h,c){return i(t,h,c)},l},Vc=function i(t,e){e===void 0&&(e=1.70158);var s=function(o){return o?--o*o*((e+1)*o+e)+1:0},r=t==="out"?s:t==="in"?function(n){return 1-s(1-n)}:hy(s);return r.config=function(n){return i(t,n)},r};Ee("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;zr(i+",Power"+(e-1),t?function(s){return Math.pow(s,e)}:function(s){return s},function(s){return 1-Math.pow(1-s,e)},function(s){return s<.5?Math.pow(s*2,e)/2:1-Math.pow((1-s)*2,e)/2})});yt.Linear.easeNone=yt.none=yt.Linear.easeIn;zr("Elastic",zc("in"),zc("out"),zc());(function(i,t){var e=1/t,s=2*e,r=2.5*e,n=function(a){return a<e?i*a*a:a<s?i*Math.pow(a-1.5/t,2)+.75:a<r?i*(a-=2.25/t)*a+.9375:i*Math.pow(a-2.625/t,2)+.984375};zr("Bounce",function(o){return 1-n(1-o)},n)})(7.5625,2.75);zr("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});zr("Circ",function(i){return-(Dv(1-i*i)-1)});zr("Sine",function(i){return i===1?1:-PS(i*CS)+1});zr("Back",Vc("in"),Vc("out"),Vc());yt.SteppedEase=yt.steps=Ge.SteppedEase={config:function(t,e){t===void 0&&(t=1);var s=1/t,r=t+(e?0:1),n=e?1:0,o=1-At;return function(a){return((r*Fa(0,o,a)|0)+n)*s}}};Hn.ease=yt["quad.out"];Ee("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return Mf+=i+","+i+"Params,"});var cy=function(t,e){this.id=SS++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Gv,this.set=e?e.getSetter:Ff},ua=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Vn(this,+e.duration,1,1),this.data=e.data,Ut&&(this._ctx=Ut,Ut.data.push(this)),ca||Oe.wake()}var t=i.prototype;return t.delay=function(s){return s||s===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+s-this._delay),this._delay=s,this):this._delay},t.duration=function(s){return arguments.length?this.totalDuration(this._repeat>0?s+(s+this._rDelay)*this._repeat:s):this.totalDuration()&&this._dur},t.totalDuration=function(s){return arguments.length?(this._dirty=0,Vn(this,this._repeat<0?s:(s-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(s,r){if(jn(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(qh(this,s),!n._dp||n.parent||Wv(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&s<this._tDur||this._ts<0&&s>0||!this._tDur&&!s)&&Li(this._dp,this,this._start-this._delay)}return(this._tTime!==s||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===At||!s&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=s),Hv(this,s,r)),this},t.time=function(s,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),s+qm(this))%(this._dur+this._rDelay)||(s?this._dur:0),r):this._time},t.totalProgress=function(s,r){return arguments.length?this.totalTime(this.totalDuration()*s,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(s,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-s:s)+qm(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(s,r){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(s-1)*n,r):this._repeat?zn(this._tTime,n)+1:1},t.timeScale=function(s){if(!arguments.length)return this._rts===-At?0:this._rts;if(this._rts===s)return this;var r=this.parent&&this._ts?uh(this.parent._time,this):this._tTime;return this._rts=+s||0,this._ts=this._ps||s===-At?0:this._rts,this.totalTime(Fa(-Math.abs(this._delay),this._tDur,r),!0),Yh(this),BS(this)},t.paused=function(s){return arguments.length?(this._ps!==s&&(this._ps=s,s?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(jn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==At&&(this._tTime-=At)))),this):this._ps},t.startTime=function(s){if(arguments.length){this._start=s;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Li(r,this,s-this._delay),this}return this._start},t.endTime=function(s){return this._start+(Te(s)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(s){var r=this.parent||this._dp;return r?s&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?uh(r.rawTime(s),this):this._tTime:this._tTime},t.revert=function(s){s===void 0&&(s=DS);var r=de;return de=s,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(s),this.totalTime(-.01,s.suppressEvents)),this.data!=="nested"&&s.kill!==!1&&this.kill(),de=r,this},t.globalTime=function(s){for(var r=this,n=arguments.length?s:r.rawTime();r;)n=r._start+n/(r._ts||1),r=r._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(s):n},t.repeat=function(s){return arguments.length?(this._repeat=s===1/0?-2:s,Km(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(s){if(arguments.length){var r=this._time;return this._rDelay=s,Km(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(s){return arguments.length?(this._yoyo=s,this):this._yoyo},t.seek=function(s,r){return this.totalTime(je(this,s),Te(r))},t.restart=function(s,r){return this.play().totalTime(s?-this._delay:0,Te(r))},t.play=function(s,r){return s!=null&&this.seek(s,r),this.reversed(!1).paused(!1)},t.reverse=function(s,r){return s!=null&&this.seek(s||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(s,r){return s!=null&&this.seek(s,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(s){return arguments.length?(!!s!==this.reversed()&&this.timeScale(-this._rts||(s?-At:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-At,this},t.isActive=function(){var s=this.parent||this._dp,r=this._start,n;return!!(!s||this._ts&&this._initted&&s.isActive()&&(n=s.rawTime(!0))>=r&&n<this.endTime(!0)-At)},t.eventCallback=function(s,r,n){var o=this.vars;return arguments.length>1?(r?(o[s]=r,n&&(o[s+"Params"]=n),s==="onUpdate"&&(this._onUpdate=r)):delete o[s],this):o[s]},t.then=function(s){var r=this;return new Promise(function(n){var o=$t(s)?s:Vv,a=function(){var h=r.then;r.then=null,$t(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=h),n(o),r.then=h};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},t.kill=function(){So(this)},i}();li(ua.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-At,_prom:0,_ps:!1,_rts:1});var we=function(i){Rv(t,i);function t(s,r){var n;return s===void 0&&(s={}),n=i.call(this,s)||this,n.labels={},n.smoothChildTiming=!!s.smoothChildTiming,n.autoRemoveChildren=!!s.autoRemoveChildren,n._sort=Te(s.sortChildren),Ft&&Li(s.parent||Ft,os(n),r),s.reversed&&n.reverse(),s.paused&&n.paused(!0),s.scrollTrigger&&Xv(os(n),s.scrollTrigger),n}var e=t.prototype;return e.to=function(r,n,o){return Go(0,arguments,this),this},e.from=function(r,n,o){return Go(1,arguments,this),this},e.fromTo=function(r,n,o,a){return Go(2,arguments,this),this},e.set=function(r,n,o){return n.duration=0,n.parent=this,$o(n).repeatDelay||(n.repeat=0),n.immediateRender=!!n.immediateRender,new Yt(r,n,je(this,o),1),this},e.call=function(r,n,o){return Li(this,Yt.delayedCall(0,r,n),o)},e.staggerTo=function(r,n,o,a,l,h,c){return o.duration=n,o.stagger=o.stagger||a,o.onComplete=h,o.onCompleteParams=c,o.parent=this,new Yt(r,o,je(this,l)),this},e.staggerFrom=function(r,n,o,a,l,h,c){return o.runBackwards=1,$o(o).immediateRender=Te(o.immediateRender),this.staggerTo(r,n,o,a,l,h,c)},e.staggerFromTo=function(r,n,o,a,l,h,c,u){return a.startAt=o,$o(a).immediateRender=Te(a.immediateRender),this.staggerTo(r,n,a,l,h,c,u)},e.render=function(r,n,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,h=this._dur,c=r<=0?0:oe(r),u=this._zTime<0!=r<0&&(this._initted||!h),d,p,m,g,_,x,b,y,w,T,D,I;if(this!==Ft&&c>l&&r>=0&&(c=l),c!==this._tTime||o||u){if(a!==this._time&&h&&(c+=this._time-a,r+=this._time-a),d=c,w=this._start,y=this._ts,x=!y,u&&(h||(a=this._zTime),(r||!n)&&(this._zTime=r)),this._repeat){if(D=this._yoyo,_=h+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(_*100+r,n,o);if(d=oe(c%_),c===l?(g=this._repeat,d=h):(g=~~(c/_),g&&g===c/_&&(d=h,g--),d>h&&(d=h)),T=zn(this._tTime,_),!a&&this._tTime&&T!==g&&this._tTime-T*_-this._dur<=0&&(T=g),D&&g&1&&(d=h-d,I=1),g!==T&&!this._lock){var P=D&&T&1,S=P===(D&&g&1);if(g<T&&(P=!P),a=P?0:c%h?h:c,this._lock=1,this.render(a||(I?0:oe(g*_)),n,!h)._lock=0,this._tTime=c,!n&&this.parent&&ni(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),a&&a!==this._time||x!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,l=this._tDur,S&&(this._lock=2,a=P?h:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!x)return this;ly(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=$S(this,oe(a),oe(d)),b&&(c-=d-(d=b._start))),this._tTime=c,this._time=d,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!n&&!g&&(ni(this,"onStart"),this._tTime!==c))return this;if(d>=a&&r>=0)for(p=this._first;p;){if(m=p._next,(p._act||d>=p._start)&&p._ts&&b!==p){if(p.parent!==this)return this.render(r,n,o);if(p.render(p._ts>0?(d-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(d-p._start)*p._ts,n,o),d!==this._time||!this._ts&&!x){b=0,m&&(c+=this._zTime=-At);break}}p=m}else{p=this._last;for(var M=r<0?r:d;p;){if(m=p._prev,(p._act||M<=p._end)&&p._ts&&b!==p){if(p.parent!==this)return this.render(r,n,o);if(p.render(p._ts>0?(M-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(M-p._start)*p._ts,n,o||de&&(p._initted||p._startAt)),d!==this._time||!this._ts&&!x){b=0,m&&(c+=this._zTime=M?-At:At);break}}p=m}}if(b&&!n&&(this.pause(),b.render(d>=a?0:-At)._zTime=d>=a?1:-1,this._ts))return this._start=w,Yh(this),this.render(r,n,o);this._onUpdate&&!n&&ni(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(w===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((r||!h)&&(c===l&&this._ts>0||!c&&this._ts<0)&&Hs(this,1),!n&&!(r<0&&!a)&&(c||a||!l)&&(ni(this,c===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,n){var o=this;if(vs(n)||(n=je(this,n,r)),!(r instanceof ua)){if(fe(r))return r.forEach(function(a){return o.add(a,n)}),this;if(ie(r))return this.addLabel(r,n);if($t(r))r=Yt.delayedCall(0,r);else return this}return this!==r?Li(this,r,n):this},e.getChildren=function(r,n,o,a){r===void 0&&(r=!0),n===void 0&&(n=!0),o===void 0&&(o=!0),a===void 0&&(a=-si);for(var l=[],h=this._first;h;)h._start>=a&&(h instanceof Yt?n&&l.push(h):(o&&l.push(h),r&&l.push.apply(l,h.getChildren(!0,n,o)))),h=h._next;return l},e.getById=function(r){for(var n=this.getChildren(1,1,1),o=n.length;o--;)if(n[o].vars.id===r)return n[o]},e.remove=function(r){return ie(r)?this.removeLabel(r):$t(r)?this.killTweensOf(r):(Xh(this,r),r===this._recent&&(this._recent=this._last),Ir(this))},e.totalTime=function(r,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=oe(Oe.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,n),this._forcing=0,this):this._tTime},e.addLabel=function(r,n){return this.labels[r]=je(this,n),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,n,o){var a=Yt.delayedCall(0,n||la,o);return a.data="isPause",this._hasPause=1,Li(this,a,je(this,r))},e.removePause=function(r){var n=this._first;for(r=je(this,r);n;)n._start===r&&n.data==="isPause"&&Hs(n),n=n._next},e.killTweensOf=function(r,n,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Ps!==a[l]&&a[l].kill(r,n);return this},e.getTweensOf=function(r,n){for(var o=[],a=ri(r),l=this._first,h=vs(n),c;l;)l instanceof Yt?OS(l._targets,a)&&(h?(!Ps||l._initted&&l._ts)&&l.globalTime(0)<=n&&l.globalTime(l.totalDuration())>n:!n||l.isActive())&&o.push(l):(c=l.getTweensOf(a,n)).length&&o.push.apply(o,c),l=l._next;return o},e.tweenTo=function(r,n){n=n||{};var o=this,a=je(o,r),l=n,h=l.startAt,c=l.onStart,u=l.onStartParams,d=l.immediateRender,p,m=Yt.to(o,li({ease:n.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:n.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale())||At,onStart:function(){if(o.pause(),!p){var _=n.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale());m._dur!==_&&Vn(m,_,0,1).render(m._time,!0,!0),p=1}c&&c.apply(m,u||[])}},n));return d?m.render(0):m},e.tweenFromTo=function(r,n,o){return this.tweenTo(n,li({startAt:{time:je(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),Zm(this,je(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),Zm(this,je(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+At)},e.shiftChildren=function(r,n,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,h;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(n)for(h in l)l[h]>=o&&(l[h]+=r);return Ir(this)},e.invalidate=function(r){var n=this._first;for(this._lock=0;n;)n.invalidate(r),n=n._next;return i.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var n=this._first,o;n;)o=n._next,this.remove(n),n=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Ir(this)},e.totalDuration=function(r){var n=0,o=this,a=o._last,l=si,h,c,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(u=o.parent;a;)h=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Li(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(n-=c,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>n&&a._ts&&(n=a._end),a=h;Vn(o,o===Ft&&o._time>n?o._time:n,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(Ft._ts&&(Hv(Ft,uh(r,Ft)),$v=Oe.frame),Oe.frame>=Xm){Xm+=Le.autoSleep||120;var n=Ft._first;if((!n||!n._ts)&&Le.autoSleep&&Oe._listeners.length<2){for(;n&&!n._ts;)n=n._next;n||Oe.sleep()}}},t}(ua);li(we.prototype,{_lock:0,_hasPause:0,_forcing:0});var iP=function(t,e,s,r,n,o,a){var l=new Ae(this._pt,t,e,0,1,gy,null,n),h=0,c=0,u,d,p,m,g,_,x,b;for(l.b=s,l.e=r,s+="",r+="",(x=~r.indexOf("random("))&&(r=ha(r)),o&&(b=[s,r],o(b,t,e),s=b[0],r=b[1]),d=s.match($c)||[];u=$c.exec(r);)m=u[0],g=r.substring(h,u.index),p?p=(p+1)%5:g.substr(-5)==="rgba("&&(p=1),m!==d[c++]&&(_=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:g||c===1?g:",",s:_,c:m.charAt(1)==="="?Cn(_,m)-_:parseFloat(m)-_,m:p&&p<4?Math.round:0},h=$c.lastIndex);return l.c=h<r.length?r.substring(h,r.length):"",l.fp=a,(Fv.test(r)||x)&&(l.e=0),this._pt=l,l},Df=function(t,e,s,r,n,o,a,l,h,c){$t(r)&&(r=r(n||0,t,o));var u=t[e],d=s!=="get"?s:$t(u)?h?t[e.indexOf("set")||!$t(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():u,p=$t(u)?h?aP:py:kf,m;if(ie(r)&&(~r.indexOf("random(")&&(r=ha(r)),r.charAt(1)==="="&&(m=Cn(d,r)+(ce(d)||0),(m||m===0)&&(r=m))),!c||d!==r||Ju)return!isNaN(d*r)&&r!==""?(m=new Ae(this._pt,t,e,+d||0,r-(d||0),typeof u=="boolean"?hP:my,0,p),h&&(m.fp=h),a&&m.modifier(a,this,t),this._pt=m):(!u&&!(e in t)&&Pf(e,r),iP.call(this,t,e,d,r,p,l||Le.stringFilter,h))},sP=function(t,e,s,r,n){if($t(t)&&(t=Ho(t,n,e,s,r)),!qi(t)||t.style&&t.nodeType||fe(t)||Ov(t))return ie(t)?Ho(t,n,e,s,r):t;var o={},a;for(a in t)o[a]=Ho(t[a],n,e,s,r);return o},uy=function(t,e,s,r,n,o){var a,l,h,c;if(De[t]&&(a=new De[t]).init(n,a.rawVars?e[t]:sP(e[t],r,n,o,s),s,r,o)!==!1&&(s._pt=l=new Ae(s._pt,n,t,0,1,a.render,a,0,a.priority),s!==xn))for(h=s._ptLookup[s._targets.indexOf(n)],c=a._props.length;c--;)h[a._props[c]]=l;return a},Ps,Ju,Of=function i(t,e,s){var r=t.vars,n=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,h=r.onUpdate,c=r.onUpdateParams,u=r.callbackScope,d=r.runBackwards,p=r.yoyoEase,m=r.keyframes,g=r.autoRevert,_=t._dur,x=t._startAt,b=t._targets,y=t.parent,w=y&&y.data==="nested"?y.vars.targets:b,T=t._overwrite==="auto"&&!Ef,D=t.timeline,I,P,S,M,O,N,B,F,U,V,k,W,$;if(D&&(!m||!n)&&(n="none"),t._ease=Mr(n,Hn.ease),t._yEase=p?ay(Mr(p===!0?n:p,Hn.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!D&&!!r.runBackwards,!D||m&&!r.stagger){if(F=b[0]?Pr(b[0]).harness:0,W=F&&r[F.prop],I=ch(r,If),x&&(x._zTime<0&&x.progress(1),e<0&&d&&a&&!g?x.render(-1,!0):x.revert(d&&_?Ml:RS),x._lazy=0),o){if(Hs(t._startAt=Yt.set(b,li({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!x&&Te(l),startAt:null,delay:0,onUpdate:h,onUpdateParams:c,callbackScope:u,stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(de||!a&&!g)&&t._startAt.revert(Ml),a&&_&&e<=0&&s<=0){e&&(t._zTime=e);return}}else if(d&&_&&!x){if(e&&(a=!1),S=li({overwrite:!1,data:"isFromStart",lazy:a&&!x&&Te(l),immediateRender:a,stagger:0,parent:y},I),W&&(S[F.prop]=W),Hs(t._startAt=Yt.set(b,S)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(de?t._startAt.revert(Ml):t._startAt.render(-1,!0)),t._zTime=e,!a)i(t._startAt,At,At);else if(!e)return}for(t._pt=t._ptCache=0,l=_&&Te(l)||l&&!_,P=0;P<b.length;P++){if(O=b[P],B=O._gsap||Rf(b)[P]._gsap,t._ptLookup[P]=V={},Xu[B.id]&&Ls.length&&hh(),k=w===b?P:w.indexOf(O),F&&(U=new F).init(O,W||I,t,k,w)!==!1&&(t._pt=M=new Ae(t._pt,O,U.name,0,1,U.render,U,0,U.priority),U._props.forEach(function(E){V[E]=M}),U.priority&&(N=1)),!F||W)for(S in I)De[S]&&(U=uy(S,I,t,k,O,w))?U.priority&&(N=1):V[S]=M=Df.call(t,O,S,"get",I[S],k,w,0,r.stringFilter);t._op&&t._op[P]&&t.kill(O,t._op[P]),T&&t._pt&&(Ps=t,Ft.killTweensOf(O,V,t.globalTime(e)),$=!t.parent,Ps=0),t._pt&&l&&(Xu[B.id]=1)}N&&_y(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!$,m&&e<=0&&D.render(si,!0,!0)},rP=function(t,e,s,r,n,o,a){var l=(t._pt&&t._ptCache||(t._ptCache={}))[e],h,c,u,d;if(!l)for(l=t._ptCache[e]=[],u=t._ptLookup,d=t._targets.length;d--;){if(h=u[d][e],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return Ju=1,t.vars[e]="+=0",Of(t,a),Ju=0,1;l.push(h)}for(d=l.length;d--;)c=l[d],h=c._pt||c,h.s=(r||r===0)&&!n?r:h.s+(r||0)+o*h.c,h.c=s-h.s,c.e&&(c.e=Ht(s)+ce(c.e)),c.b&&(c.b=h.s+ce(c.b))},nP=function(t,e){var s=t[0]?Pr(t[0]).harness:0,r=s&&s.aliases,n,o,a,l;if(!r)return e;n=Nr({},e);for(o in r)if(o in n)for(l=r[o].split(","),a=l.length;a--;)n[l[a]]=n[o];return n},oP=function(t,e,s,r){var n=e.ease||r||"power1.inOut",o,a;if(fe(e))a=s[t]||(s[t]=[]),e.forEach(function(l,h){return a.push({t:h/(e.length-1)*100,v:l,e:n})});else for(o in e)a=s[o]||(s[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:n})},Ho=function(t,e,s,r,n){return $t(t)?t.call(e,s,r,n):ie(t)&&~t.indexOf("random(")?ha(t):t},dy=Mf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",fy={};Ee(dy+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return fy[i]=1});var Yt=function(i){Rv(t,i);function t(s,r,n,o){var a;typeof r=="number"&&(n.duration=r,r=n,n=null),a=i.call(this,o?r:$o(r))||this;var l=a.vars,h=l.duration,c=l.delay,u=l.immediateRender,d=l.stagger,p=l.overwrite,m=l.keyframes,g=l.defaults,_=l.scrollTrigger,x=l.yoyoEase,b=r.parent||Ft,y=(fe(s)||Ov(s)?vs(s[0]):"length"in r)?[s]:ri(s),w,T,D,I,P,S,M,O;if(a._targets=y.length?Rf(y):lh("GSAP target "+s+" not found. https://greensock.com",!Le.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,m||d||gl(h)||gl(c)){if(r=a.vars,w=a.timeline=new we({data:"nested",defaults:g||{},targets:b&&b.data==="nested"?b.vars.targets:y}),w.kill(),w.parent=w._dp=os(a),w._start=0,d||gl(h)||gl(c)){if(I=y.length,M=d&&Zv(d),qi(d))for(P in d)~dy.indexOf(P)&&(O||(O={}),O[P]=d[P]);for(T=0;T<I;T++)D=ch(r,fy),D.stagger=0,x&&(D.yoyoEase=x),O&&Nr(D,O),S=y[T],D.duration=+Ho(h,os(a),T,S,y),D.delay=(+Ho(c,os(a),T,S,y)||0)-a._delay,!d&&I===1&&D.delay&&(a._delay=c=D.delay,a._start+=c,D.delay=0),w.to(S,D,M?M(T,S,y):0),w._ease=yt.none;w.duration()?h=c=0:a.timeline=0}else if(m){$o(li(w.vars.defaults,{ease:"none"})),w._ease=Mr(m.ease||r.ease||"none");var N=0,B,F,U;if(fe(m))m.forEach(function(V){return w.to(y,V,">")}),w.duration();else{D={};for(P in m)P==="ease"||P==="easeEach"||oP(P,m[P],D,m.easeEach);for(P in D)for(B=D[P].sort(function(V,k){return V.t-k.t}),N=0,T=0;T<B.length;T++)F=B[T],U={ease:F.e,duration:(F.t-(T?B[T-1].t:0))/100*h},U[P]=F.v,w.to(y,U,N),N+=U.duration;w.duration()<h&&w.to({},{duration:h-w.duration()})}}h||a.duration(h=w.duration())}else a.timeline=0;return p===!0&&!Ef&&(Ps=os(a),Ft.killTweensOf(y),Ps=0),Li(b,os(a),n),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(u||!h&&!m&&a._start===oe(b._time)&&Te(u)&&LS(os(a))&&b.data!=="nested")&&(a._tTime=-At,a.render(Math.max(0,-c)||0)),_&&Xv(os(a),_),a}var e=t.prototype;return e.render=function(r,n,o){var a=this._time,l=this._tDur,h=this._dur,c=r<0,u=r>l-At&&!c?l:r<At?0:r,d,p,m,g,_,x,b,y,w;if(!h)US(this,r,n,o);else if(u!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=u,y=this.timeline,this._repeat){if(g=h+this._rDelay,this._repeat<-1&&c)return this.totalTime(g*100+r,n,o);if(d=oe(u%g),u===l?(m=this._repeat,d=h):(m=~~(u/g),m&&m===u/g&&(d=h,m--),d>h&&(d=h)),x=this._yoyo&&m&1,x&&(w=this._yEase,d=h-d),_=zn(this._tTime,g),d===a&&!o&&this._initted)return this._tTime=u,this;m!==_&&(y&&this._yEase&&ly(y,x),this.vars.repeatRefresh&&!x&&!this._lock&&(this._lock=o=1,this.render(oe(g*m),!0).invalidate()._lock=0))}if(!this._initted){if(Yv(this,c?r:d,o,n,u))return this._tTime=0,this;if(a!==this._time)return this;if(h!==this._dur)return this.render(r,n,o)}if(this._tTime=u,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(w||this._ease)(d/h),this._from&&(this.ratio=b=1-b),d&&!a&&!n&&!m&&(ni(this,"onStart"),this._tTime!==u))return this;for(p=this._pt;p;)p.r(b,p.d),p=p._next;y&&y.render(r<0?r:!d&&x?-At:y._dur*y._ease(d/this._dur),n,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!n&&(c&&Yu(this,r,n,o),ni(this,"onUpdate")),this._repeat&&m!==_&&this.vars.onRepeat&&!n&&this.parent&&ni(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&Yu(this,r,!0,!0),(r||!h)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&Hs(this,1),!n&&!(c&&!a)&&(u||a||x)&&(ni(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},e.resetTo=function(r,n,o,a){ca||Oe.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||Of(this,l),h=this._ease(l/this._dur),rP(this,r,n,o,a,h,l)?this.resetTo(r,n,o,a):(qh(this,0),this.parent||jv(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,n){if(n===void 0&&(n="all"),!r&&(!n||n==="all"))return this._lazy=this._pt=0,this.parent?So(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,n,Ps&&Ps.vars.overwrite!==!0)._first||So(this),this.parent&&o!==this.timeline.totalDuration()&&Vn(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?ri(r):a,h=this._ptLookup,c=this._pt,u,d,p,m,g,_,x;if((!n||n==="all")&&FS(a,l))return n==="all"&&(this._pt=0),So(this);for(u=this._op=this._op||[],n!=="all"&&(ie(n)&&(g={},Ee(n,function(b){return g[b]=1}),n=g),n=nP(a,n)),x=a.length;x--;)if(~l.indexOf(a[x])){d=h[x],n==="all"?(u[x]=n,m=d,p={}):(p=u[x]=u[x]||{},m=n);for(g in m)_=d&&d[g],_&&((!("kill"in _.d)||_.d.kill(g)===!0)&&Xh(this,_,"_pt"),delete d[g]),p!=="all"&&(p[g]=1)}return this._initted&&!this._pt&&c&&So(this),this},t.to=function(r,n){return new t(r,n,arguments[2])},t.from=function(r,n){return Go(1,arguments)},t.delayedCall=function(r,n,o,a){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:n,onReverseComplete:n,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(r,n,o){return Go(2,arguments)},t.set=function(r,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(r,n)},t.killTweensOf=function(r,n,o){return Ft.killTweensOf(r,n,o)},t}(ua);li(Yt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ee("staggerTo,staggerFrom,staggerFromTo",function(i){Yt[i]=function(){var t=new we,e=Ku.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var kf=function(t,e,s){return t[e]=s},py=function(t,e,s){return t[e](s)},aP=function(t,e,s,r){return t[e](r.fp,s)},lP=function(t,e,s){return t.setAttribute(e,s)},Ff=function(t,e){return $t(t[e])?py:Af(t[e])&&t.setAttribute?lP:kf},my=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},hP=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},gy=function(t,e){var s=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;s;)r=s.p+(s.m?s.m(s.s+s.c*t):Math.round((s.s+s.c*t)*1e4)/1e4)+r,s=s._next;r+=e.c}e.set(e.t,e.p,r,e)},Bf=function(t,e){for(var s=e._pt;s;)s.r(t,s.d),s=s._next},cP=function(t,e,s,r){for(var n=this._pt,o;n;)o=n._next,n.p===r&&n.modifier(t,e,s),n=o},uP=function(t){for(var e=this._pt,s,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?Xh(this,e,"_pt"):e.dep||(s=1),e=r;return!s},dP=function(t,e,s,r){r.mSet(t,e,r.m.call(r.tween,s,r.mt),r)},_y=function(t){for(var e=t._pt,s,r,n,o;e;){for(s=e._next,r=n;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:n=e,(e._next=r)?r._prev=e:o=e,e=s}t._pt=n},Ae=function(){function i(e,s,r,n,o,a,l,h,c){this.t=s,this.s=n,this.c=o,this.p=r,this.r=a||my,this.d=l||this,this.set=h||kf,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(s,r,n){this.mSet=this.mSet||this.set,this.set=dP,this.m=s,this.mt=n,this.tween=r},i}();Ee(Mf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return If[i]=1});Ge.TweenMax=Ge.TweenLite=Yt;Ge.TimelineLite=Ge.TimelineMax=we;Ft=new we({sortChildren:!1,defaults:Hn,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Le.stringFilter=oy;var Rr=[],Dl={},fP=[],Jm=0,pP=0,jc=function(t){return(Dl[t]||fP).map(function(e){return e()})},td=function(){var t=Date.now(),e=[];t-Jm>2&&(jc("matchMediaInit"),Rr.forEach(function(s){var r=s.queries,n=s.conditions,o,a,l,h;for(a in r)o=We.matchMedia(r[a]).matches,o&&(l=1),o!==n[a]&&(n[a]=o,h=1);h&&(s.revert(),l&&e.push(s))}),jc("matchMediaRevert"),e.forEach(function(s){return s.onMatch(s)}),Jm=t,jc("matchMedia"))},vy=function(){function i(e,s){this.selector=s&&Zu(s),this.data=[],this._r=[],this.isReverted=!1,this.id=pP++,e&&this.add(e)}var t=i.prototype;return t.add=function(s,r,n){$t(s)&&(n=r,r=s,s=$t);var o=this,a=function(){var h=Ut,c=o.selector,u;return h&&h!==o&&h.data.push(o),n&&(o.selector=Zu(n)),Ut=o,u=r.apply(o,arguments),$t(u)&&o._r.push(u),Ut=h,o.selector=c,o.isReverted=!1,u};return o.last=a,s===$t?a(o):s?o[s]=a:a},t.ignore=function(s){var r=Ut;Ut=null,s(this),Ut=r},t.getTweens=function(){var s=[];return this.data.forEach(function(r){return r instanceof i?s.push.apply(s,r.getTweens()):r instanceof Yt&&!(r.parent&&r.parent.data==="nested")&&s.push(r)}),s},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(s,r){var n=this;if(s){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(h){return o.splice(o.indexOf(h),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,h){return h.g-l.g||-1/0}).forEach(function(l){return l.t.revert(s)}),this.data.forEach(function(l){return!(l instanceof Yt)&&l.revert&&l.revert(s)}),this._r.forEach(function(l){return l(s,n)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),r)for(var a=Rr.length;a--;)Rr[a].id===this.id&&Rr.splice(a,1)},t.revert=function(s){this.kill(s||{})},i}(),mP=function(){function i(e){this.contexts=[],this.scope=e}var t=i.prototype;return t.add=function(s,r,n){qi(s)||(s={matches:s});var o=new vy(0,n||this.scope),a=o.conditions={},l,h,c;Ut&&!o.selector&&(o.selector=Ut.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=s;for(h in s)h==="all"?c=1:(l=We.matchMedia(s[h]),l&&(Rr.indexOf(o)<0&&Rr.push(o),(a[h]=l.matches)&&(c=1),l.addListener?l.addListener(td):l.addEventListener("change",td)));return c&&r(o),this},t.revert=function(s){this.kill(s||{})},t.kill=function(s){this.contexts.forEach(function(r){return r.kill(s,!0)})},i}(),dh={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];e.forEach(function(r){return sy(r)})},timeline:function(t){return new we(t)},getTweensOf:function(t,e){return Ft.getTweensOf(t,e)},getProperty:function(t,e,s,r){ie(t)&&(t=ri(t)[0]);var n=Pr(t||{}).get,o=s?Vv:zv;return s==="native"&&(s=""),t&&(e?o((De[e]&&De[e].get||n)(t,e,s,r)):function(a,l,h){return o((De[a]&&De[a].get||n)(t,a,l,h))})},quickSetter:function(t,e,s){if(t=ri(t),t.length>1){var r=t.map(function(c){return Ce.quickSetter(c,e,s)}),n=r.length;return function(c){for(var u=n;u--;)r[u](c)}}t=t[0]||{};var o=De[e],a=Pr(t),l=a.harness&&(a.harness.aliases||{})[e]||e,h=o?function(c){var u=new o;xn._pt=0,u.init(t,s?c+s:c,xn,0,[t]),u.render(1,u),xn._pt&&Bf(1,xn)}:a.set(t,l);return o?h:function(c){return h(t,l,s?c+s:c,a,1)}},quickTo:function(t,e,s){var r,n=Ce.to(t,Nr((r={},r[e]="+=0.1",r.paused=!0,r),s||{})),o=function(l,h,c){return n.resetTo(e,l,h,c)};return o.tween=n,o},isTweening:function(t){return Ft.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Mr(t.ease,Hn.ease)),Ym(Hn,t||{})},config:function(t){return Ym(Le,t||{})},registerEffect:function(t){var e=t.name,s=t.effect,r=t.plugins,n=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!De[a]&&!Ge[a]&&lh(e+" effect requires "+a+" plugin.")}),Gc[e]=function(a,l,h){return s(ri(a),li(l||{},n),h)},o&&(we.prototype[e]=function(a,l,h){return this.add(Gc[e](a,qi(l)?l:(h=l)&&{},this),h)})},registerEase:function(t,e){yt[t]=Mr(e)},parseEase:function(t,e){return arguments.length?Mr(t,e):yt},getById:function(t){return Ft.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var s=new we(t),r,n;for(s.smoothChildTiming=Te(t.smoothChildTiming),Ft.remove(s),s._dp=0,s._time=s._tTime=Ft._time,r=Ft._first;r;)n=r._next,(e||!(!r._dur&&r instanceof Yt&&r.vars.onComplete===r._targets[0]))&&Li(s,r,r._start-r._delay),r=n;return Li(Ft,s,0),s},context:function(t,e){return t?new vy(t,e):Ut},matchMedia:function(t){return new mP(t)},matchMediaRefresh:function(){return Rr.forEach(function(t){var e=t.conditions,s,r;for(r in e)e[r]&&(e[r]=!1,s=1);s&&t.revert()})||td()},addEventListener:function(t,e){var s=Dl[t]||(Dl[t]=[]);~s.indexOf(e)||s.push(e)},removeEventListener:function(t,e){var s=Dl[t],r=s&&s.indexOf(e);r>=0&&s.splice(r,1)},utils:{wrap:XS,wrapYoyo:YS,distribute:Zv,random:Jv,snap:Qv,normalize:WS,getUnit:ce,clamp:HS,splitColor:ry,toArray:ri,selector:Zu,mapRange:ey,pipe:VS,unitize:jS,interpolate:qS,shuffle:Kv},install:Nv,effects:Gc,ticker:Oe,updateRoot:we.updateRoot,plugins:De,globalTimeline:Ft,core:{PropTween:Ae,globals:Uv,Tween:Yt,Timeline:we,Animation:ua,getCache:Pr,_removeLinkedListItem:Xh,reverting:function(){return de},context:function(t){return t&&Ut&&(Ut.data.push(t),t._ctx=Ut),Ut},suppressOverwrites:function(t){return Ef=t}}};Ee("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return dh[i]=Yt[i]});Oe.add(we.updateRoot);xn=dh.to({},{duration:0});var gP=function(t,e){for(var s=t._pt;s&&s.p!==e&&s.op!==e&&s.fp!==e;)s=s._next;return s},_P=function(t,e){var s=t._targets,r,n,o;for(r in e)for(n=s.length;n--;)o=t._ptLookup[n][r],o&&(o=o.d)&&(o._pt&&(o=gP(o,r)),o&&o.modifier&&o.modifier(e[r],t,s[n],r))},Wc=function(t,e){return{name:t,rawVars:1,init:function(r,n,o){o._onInit=function(a){var l,h;if(ie(n)&&(l={},Ee(n,function(c){return l[c]=1}),n=l),e){l={};for(h in n)l[h]=e(n[h]);n=l}_P(a,n)}}}},Ce=dh.registerPlugin({name:"attr",init:function(t,e,s,r,n){var o,a,l;this.tween=s;for(o in e)l=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(l||0)+"",e[o],r,n,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var s=e._pt;s;)de?s.set(s.t,s.p,s.b,s):s.r(t,s.d),s=s._next}},{name:"endArray",init:function(t,e){for(var s=e.length;s--;)this.add(t,s,t[s]||0,e[s],0,0,0,0,0,1)}},Wc("roundProps",Qu),Wc("modifiers"),Wc("snap",Qv))||dh;Yt.version=we.version=Ce.version="3.12.2";Lv=1;Cf()&&jn();yt.Power0;yt.Power1;yt.Power2;yt.Power3;yt.Power4;yt.Linear;yt.Quad;yt.Cubic;yt.Quart;yt.Quint;yt.Strong;yt.Elastic;yt.Back;yt.SteppedEase;yt.Bounce;yt.Sine;yt.Expo;yt.Circ;/*!
 * CSSPlugin 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var tg,Is,Sn,Lf,wr,eg,Nf,vP=function(){return typeof window<"u"},ys={},mr=180/Math.PI,Pn=Math.PI/180,sn=Math.atan2,ig=1e8,Uf=/([A-Z])/g,yP=/(left|right|width|margin|padding|x)/i,xP=/[\s,\(]\S/,Ui={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ed=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},bP=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},wP=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},TP=function(t,e){var s=e.s+e.c*t;e.set(e.t,e.p,~~(s+(s<0?-.5:.5))+e.u,e)},yy=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},xy=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},EP=function(t,e,s){return t.style[e]=s},AP=function(t,e,s){return t.style.setProperty(e,s)},CP=function(t,e,s){return t._gsap[e]=s},SP=function(t,e,s){return t._gsap.scaleX=t._gsap.scaleY=s},PP=function(t,e,s,r,n){var o=t._gsap;o.scaleX=o.scaleY=s,o.renderTransform(n,o)},IP=function(t,e,s,r,n){var o=t._gsap;o[e]=s,o.renderTransform(n,o)},Lt="transform",Si=Lt+"Origin",MP=function i(t,e){var s=this,r=this.target,n=r.style;if(t in ys&&n){if(this.tfm=this.tfm||{},t!=="transform")t=Ui[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return s.tfm[o]=ls(r,o)}):this.tfm[t]=r._gsap.x?r._gsap[t]:ls(r,t);else return Ui.transform.split(",").forEach(function(o){return i.call(s,o,e)});if(this.props.indexOf(Lt)>=0)return;r._gsap.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Si,e,"")),t=Lt}(n||e)&&this.props.push(t,e,n[t])},by=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},RP=function(){var t=this.props,e=this.target,s=e.style,r=e._gsap,n,o;for(n=0;n<t.length;n+=3)t[n+1]?e[t[n]]=t[n+2]:t[n+2]?s[t[n]]=t[n+2]:s.removeProperty(t[n].substr(0,2)==="--"?t[n]:t[n].replace(Uf,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),n=Nf(),(!n||!n.isStart)&&!s[Lt]&&(by(s),r.uncache=1)}},wy=function(t,e){var s={target:t,props:[],revert:RP,save:MP};return t._gsap||Ce.core.getCache(t),e&&e.split(",").forEach(function(r){return s.save(r)}),s},Ty,id=function(t,e){var s=Is.createElementNS?Is.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Is.createElement(t);return s.style?s:Is.createElement(t)},ji=function i(t,e,s){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(Uf,"-$1").toLowerCase())||r.getPropertyValue(e)||!s&&i(t,Wn(e)||e,1)||""},sg="O,Moz,ms,Ms,Webkit".split(","),Wn=function(t,e,s){var r=e||wr,n=r.style,o=5;if(t in n&&!s)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(sg[o]+t in n););return o<0?null:(o===3?"ms":o>=0?sg[o]:"")+t},sd=function(){vP()&&window.document&&(tg=window,Is=tg.document,Sn=Is.documentElement,wr=id("div")||{style:{}},id("div"),Lt=Wn(Lt),Si=Lt+"Origin",wr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ty=!!Wn("perspective"),Nf=Ce.core.reverting,Lf=1)},Xc=function i(t){var e=id("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,r=this.nextSibling,n=this.style.cssText,o;if(Sn.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return s&&(r?s.insertBefore(this,r):s.appendChild(this)),Sn.removeChild(e),this.style.cssText=n,o},rg=function(t,e){for(var s=e.length;s--;)if(t.hasAttribute(e[s]))return t.getAttribute(e[s])},Ey=function(t){var e;try{e=t.getBBox()}catch{e=Xc.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Xc||(e=Xc.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+rg(t,["x","cx","x1"])||0,y:+rg(t,["y","cy","y1"])||0,width:0,height:0}:e},Ay=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Ey(t))},da=function(t,e){if(e){var s=t.style;e in ys&&e!==Si&&(e=Lt),s.removeProperty?((e.substr(0,2)==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),s.removeProperty(e.replace(Uf,"-$1").toLowerCase())):s.removeAttribute(e)}},Ms=function(t,e,s,r,n,o){var a=new Ae(t._pt,e,s,0,1,o?xy:yy);return t._pt=a,a.b=r,a.e=n,t._props.push(s),a},ng={deg:1,rad:1,turn:1},DP={grid:1,flex:1},zs=function i(t,e,s,r){var n=parseFloat(s)||0,o=(s+"").trim().substr((n+"").length)||"px",a=wr.style,l=yP.test(e),h=t.tagName.toLowerCase()==="svg",c=(h?"client":"offset")+(l?"Width":"Height"),u=100,d=r==="px",p=r==="%",m,g,_,x;return r===o||!n||ng[r]||ng[o]?n:(o!=="px"&&!d&&(n=i(t,e,s,"px")),x=t.getCTM&&Ay(t),(p||o==="%")&&(ys[e]||~e.indexOf("adius"))?(m=x?t.getBBox()[l?"width":"height"]:t[c],Ht(p?n/m*u:n/100*m)):(a[l?"width":"height"]=u+(d?o:r),g=~e.indexOf("adius")||r==="em"&&t.appendChild&&!h?t:t.parentNode,x&&(g=(t.ownerSVGElement||{}).parentNode),(!g||g===Is||!g.appendChild)&&(g=Is.body),_=g._gsap,_&&p&&_.width&&l&&_.time===Oe.time&&!_.uncache?Ht(n/_.width*u):((p||o==="%")&&!DP[ji(g,"display")]&&(a.position=ji(t,"position")),g===t&&(a.position="static"),g.appendChild(wr),m=wr[c],g.removeChild(wr),a.position="absolute",l&&p&&(_=Pr(g),_.time=Oe.time,_.width=g[c]),Ht(d?m*n/u:m&&n?u/m*n:0))))},ls=function(t,e,s,r){var n;return Lf||sd(),e in Ui&&e!=="transform"&&(e=Ui[e],~e.indexOf(",")&&(e=e.split(",")[0])),ys[e]&&e!=="transform"?(n=pa(t,r),n=e!=="transformOrigin"?n[e]:n.svg?n.origin:ph(ji(t,Si))+" "+n.zOrigin+"px"):(n=t.style[e],(!n||n==="auto"||r||~(n+"").indexOf("calc("))&&(n=fh[e]&&fh[e](t,e,s)||ji(t,e)||Gv(t,e)||(e==="opacity"?1:0))),s&&!~(n+"").trim().indexOf(" ")?zs(t,e,n,s)+s:n},OP=function(t,e,s,r){if(!s||s==="none"){var n=Wn(e,t,1),o=n&&ji(t,n,1);o&&o!==s?(e=n,s=o):e==="borderColor"&&(s=ji(t,"borderTopColor"))}var a=new Ae(this._pt,t.style,e,0,1,gy),l=0,h=0,c,u,d,p,m,g,_,x,b,y,w,T;if(a.b=s,a.e=r,s+="",r+="",r==="auto"&&(t.style[e]=r,r=ji(t,e)||r,t.style[e]=s),c=[s,r],oy(c),s=c[0],r=c[1],d=s.match(yn)||[],T=r.match(yn)||[],T.length){for(;u=yn.exec(r);)_=u[0],b=r.substring(l,u.index),m?m=(m+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(m=1),_!==(g=d[h++]||"")&&(p=parseFloat(g)||0,w=g.substr((p+"").length),_.charAt(1)==="="&&(_=Cn(p,_)+w),x=parseFloat(_),y=_.substr((x+"").length),l=yn.lastIndex-y.length,y||(y=y||Le.units[e]||w,l===r.length&&(r+=y,a.e+=y)),w!==y&&(p=zs(t,e,g,y)||0),a._pt={_next:a._pt,p:b||h===1?b:",",s:p,c:x-p,m:m&&m<4||e==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=e==="display"&&r==="none"?xy:yy;return Fv.test(r)&&(a.e=0),this._pt=a,a},og={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},kP=function(t){var e=t.split(" "),s=e[0],r=e[1]||"50%";return(s==="top"||s==="bottom"||r==="left"||r==="right")&&(t=s,s=r,r=t),e[0]=og[s]||s,e[1]=og[r]||r,e.join(" ")},FP=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var s=e.t,r=s.style,n=e.u,o=s._gsap,a,l,h;if(n==="all"||n===!0)r.cssText="",l=1;else for(n=n.split(","),h=n.length;--h>-1;)a=n[h],ys[a]&&(l=1,a=a==="transformOrigin"?Si:Lt),da(s,a);l&&(da(s,Lt),o&&(o.svg&&s.removeAttribute("transform"),pa(s,1),o.uncache=1,by(r)))}},fh={clearProps:function(t,e,s,r,n){if(n.data!=="isFromStart"){var o=t._pt=new Ae(t._pt,e,s,0,0,FP);return o.u=r,o.pr=-10,o.tween=n,t._props.push(s),1}}},fa=[1,0,0,1,0,0],Cy={},Sy=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ag=function(t){var e=ji(t,Lt);return Sy(e)?fa:e.substr(7).match(kv).map(Ht)},$f=function(t,e){var s=t._gsap||Pr(t),r=t.style,n=ag(t),o,a,l,h;return s.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,n=[l.a,l.b,l.c,l.d,l.e,l.f],n.join(",")==="1,0,0,1,0,0"?fa:n):(n===fa&&!t.offsetParent&&t!==Sn&&!s.svg&&(l=r.display,r.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(h=1,a=t.nextElementSibling,Sn.appendChild(t)),n=ag(t),l?r.display=l:da(t,"display"),h&&(a?o.insertBefore(t,a):o?o.appendChild(t):Sn.removeChild(t))),e&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n)},rd=function(t,e,s,r,n,o){var a=t._gsap,l=n||$f(t,!0),h=a.xOrigin||0,c=a.yOrigin||0,u=a.xOffset||0,d=a.yOffset||0,p=l[0],m=l[1],g=l[2],_=l[3],x=l[4],b=l[5],y=e.split(" "),w=parseFloat(y[0])||0,T=parseFloat(y[1])||0,D,I,P,S;s?l!==fa&&(I=p*_-m*g)&&(P=w*(_/I)+T*(-g/I)+(g*b-_*x)/I,S=w*(-m/I)+T*(p/I)-(p*b-m*x)/I,w=P,T=S):(D=Ey(t),w=D.x+(~y[0].indexOf("%")?w/100*D.width:w),T=D.y+(~(y[1]||y[0]).indexOf("%")?T/100*D.height:T)),r||r!==!1&&a.smooth?(x=w-h,b=T-c,a.xOffset=u+(x*p+b*g)-x,a.yOffset=d+(x*m+b*_)-b):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=T,a.smooth=!!r,a.origin=e,a.originIsAbsolute=!!s,t.style[Si]="0px 0px",o&&(Ms(o,a,"xOrigin",h,w),Ms(o,a,"yOrigin",c,T),Ms(o,a,"xOffset",u,a.xOffset),Ms(o,a,"yOffset",d,a.yOffset)),t.setAttribute("data-svg-origin",w+" "+T)},pa=function(t,e){var s=t._gsap||new cy(t);if("x"in s&&!e&&!s.uncache)return s;var r=t.style,n=s.scaleX<0,o="px",a="deg",l=getComputedStyle(t),h=ji(t,Si)||"0",c,u,d,p,m,g,_,x,b,y,w,T,D,I,P,S,M,O,N,B,F,U,V,k,W,$,E,L,G,R,z,X;return c=u=d=g=_=x=b=y=w=0,p=m=1,s.svg=!!(t.getCTM&&Ay(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[Lt]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Lt]!=="none"?l[Lt]:"")),r.scale=r.rotate=r.translate="none"),I=$f(t,s.svg),s.svg&&(s.uncache?(W=t.getBBox(),h=s.xOrigin-W.x+"px "+(s.yOrigin-W.y)+"px",k=""):k=!e&&t.getAttribute("data-svg-origin"),rd(t,k||h,!!k||s.originIsAbsolute,s.smooth!==!1,I)),T=s.xOrigin||0,D=s.yOrigin||0,I!==fa&&(O=I[0],N=I[1],B=I[2],F=I[3],c=U=I[4],u=V=I[5],I.length===6?(p=Math.sqrt(O*O+N*N),m=Math.sqrt(F*F+B*B),g=O||N?sn(N,O)*mr:0,b=B||F?sn(B,F)*mr+g:0,b&&(m*=Math.abs(Math.cos(b*Pn))),s.svg&&(c-=T-(T*O+D*B),u-=D-(T*N+D*F))):(X=I[6],R=I[7],E=I[8],L=I[9],G=I[10],z=I[11],c=I[12],u=I[13],d=I[14],P=sn(X,G),_=P*mr,P&&(S=Math.cos(-P),M=Math.sin(-P),k=U*S+E*M,W=V*S+L*M,$=X*S+G*M,E=U*-M+E*S,L=V*-M+L*S,G=X*-M+G*S,z=R*-M+z*S,U=k,V=W,X=$),P=sn(-B,G),x=P*mr,P&&(S=Math.cos(-P),M=Math.sin(-P),k=O*S-E*M,W=N*S-L*M,$=B*S-G*M,z=F*M+z*S,O=k,N=W,B=$),P=sn(N,O),g=P*mr,P&&(S=Math.cos(P),M=Math.sin(P),k=O*S+N*M,W=U*S+V*M,N=N*S-O*M,V=V*S-U*M,O=k,U=W),_&&Math.abs(_)+Math.abs(g)>359.9&&(_=g=0,x=180-x),p=Ht(Math.sqrt(O*O+N*N+B*B)),m=Ht(Math.sqrt(V*V+X*X)),P=sn(U,V),b=Math.abs(P)>2e-4?P*mr:0,w=z?1/(z<0?-z:z):0),s.svg&&(k=t.getAttribute("transform"),s.forceCSS=t.setAttribute("transform","")||!Sy(ji(t,Lt)),k&&t.setAttribute("transform",k))),Math.abs(b)>90&&Math.abs(b)<270&&(n?(p*=-1,b+=g<=0?180:-180,g+=g<=0?180:-180):(m*=-1,b+=b<=0?180:-180)),e=e||s.uncache,s.x=c-((s.xPercent=c&&(!e&&s.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*s.xPercent/100:0)+o,s.y=u-((s.yPercent=u&&(!e&&s.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-u)?-50:0)))?t.offsetHeight*s.yPercent/100:0)+o,s.z=d+o,s.scaleX=Ht(p),s.scaleY=Ht(m),s.rotation=Ht(g)+a,s.rotationX=Ht(_)+a,s.rotationY=Ht(x)+a,s.skewX=b+a,s.skewY=y+a,s.transformPerspective=w+o,(s.zOrigin=parseFloat(h.split(" ")[2])||0)&&(r[Si]=ph(h)),s.xOffset=s.yOffset=0,s.force3D=Le.force3D,s.renderTransform=s.svg?LP:Ty?Py:BP,s.uncache=0,s},ph=function(t){return(t=t.split(" "))[0]+" "+t[1]},Yc=function(t,e,s){var r=ce(e);return Ht(parseFloat(e)+parseFloat(zs(t,"x",s+"px",r)))+r},BP=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Py(t,e)},lr="0deg",go="0px",hr=") ",Py=function(t,e){var s=e||this,r=s.xPercent,n=s.yPercent,o=s.x,a=s.y,l=s.z,h=s.rotation,c=s.rotationY,u=s.rotationX,d=s.skewX,p=s.skewY,m=s.scaleX,g=s.scaleY,_=s.transformPerspective,x=s.force3D,b=s.target,y=s.zOrigin,w="",T=x==="auto"&&t&&t!==1||x===!0;if(y&&(u!==lr||c!==lr)){var D=parseFloat(c)*Pn,I=Math.sin(D),P=Math.cos(D),S;D=parseFloat(u)*Pn,S=Math.cos(D),o=Yc(b,o,I*S*-y),a=Yc(b,a,-Math.sin(D)*-y),l=Yc(b,l,P*S*-y+y)}_!==go&&(w+="perspective("+_+hr),(r||n)&&(w+="translate("+r+"%, "+n+"%) "),(T||o!==go||a!==go||l!==go)&&(w+=l!==go||T?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+hr),h!==lr&&(w+="rotate("+h+hr),c!==lr&&(w+="rotateY("+c+hr),u!==lr&&(w+="rotateX("+u+hr),(d!==lr||p!==lr)&&(w+="skew("+d+", "+p+hr),(m!==1||g!==1)&&(w+="scale("+m+", "+g+hr),b.style[Lt]=w||"translate(0, 0)"},LP=function(t,e){var s=e||this,r=s.xPercent,n=s.yPercent,o=s.x,a=s.y,l=s.rotation,h=s.skewX,c=s.skewY,u=s.scaleX,d=s.scaleY,p=s.target,m=s.xOrigin,g=s.yOrigin,_=s.xOffset,x=s.yOffset,b=s.forceCSS,y=parseFloat(o),w=parseFloat(a),T,D,I,P,S;l=parseFloat(l),h=parseFloat(h),c=parseFloat(c),c&&(c=parseFloat(c),h+=c,l+=c),l||h?(l*=Pn,h*=Pn,T=Math.cos(l)*u,D=Math.sin(l)*u,I=Math.sin(l-h)*-d,P=Math.cos(l-h)*d,h&&(c*=Pn,S=Math.tan(h-c),S=Math.sqrt(1+S*S),I*=S,P*=S,c&&(S=Math.tan(c),S=Math.sqrt(1+S*S),T*=S,D*=S)),T=Ht(T),D=Ht(D),I=Ht(I),P=Ht(P)):(T=u,P=d,D=I=0),(y&&!~(o+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(y=zs(p,"x",o,"px"),w=zs(p,"y",a,"px")),(m||g||_||x)&&(y=Ht(y+m-(m*T+g*I)+_),w=Ht(w+g-(m*D+g*P)+x)),(r||n)&&(S=p.getBBox(),y=Ht(y+r/100*S.width),w=Ht(w+n/100*S.height)),S="matrix("+T+","+D+","+I+","+P+","+y+","+w+")",p.setAttribute("transform",S),b&&(p.style[Lt]=S)},NP=function(t,e,s,r,n){var o=360,a=ie(n),l=parseFloat(n)*(a&&~n.indexOf("rad")?mr:1),h=l-r,c=r+h+"deg",u,d;return a&&(u=n.split("_")[1],u==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),u==="cw"&&h<0?h=(h+o*ig)%o-~~(h/o)*o:u==="ccw"&&h>0&&(h=(h-o*ig)%o-~~(h/o)*o)),t._pt=d=new Ae(t._pt,e,s,r,h,bP),d.e=c,d.u="deg",t._props.push(s),d},lg=function(t,e){for(var s in e)t[s]=e[s];return t},UP=function(t,e,s){var r=lg({},s._gsap),n="perspective,force3D,transformOrigin,svgOrigin",o=s.style,a,l,h,c,u,d,p,m;r.svg?(h=s.getAttribute("transform"),s.setAttribute("transform",""),o[Lt]=e,a=pa(s,1),da(s,Lt),s.setAttribute("transform",h)):(h=getComputedStyle(s)[Lt],o[Lt]=e,a=pa(s,1),o[Lt]=h);for(l in ys)h=r[l],c=a[l],h!==c&&n.indexOf(l)<0&&(p=ce(h),m=ce(c),u=p!==m?zs(s,l,h,m):parseFloat(h),d=parseFloat(c),t._pt=new Ae(t._pt,a,l,u,d-u,ed),t._pt.u=m||0,t._props.push(l));lg(a,r)};Ee("padding,margin,Width,Radius",function(i,t){var e="Top",s="Right",r="Bottom",n="Left",o=(t<3?[e,s,r,n]:[e+n,e+s,r+s,r+n]).map(function(a){return t<2?i+a:"border"+a+i});fh[t>1?"border"+i:i]=function(a,l,h,c,u){var d,p;if(arguments.length<4)return d=o.map(function(m){return ls(a,m,h)}),p=d.join(" "),p.split(d[0]).length===5?d[0]:p;d=(c+"").split(" "),p={},o.forEach(function(m,g){return p[m]=d[g]=d[g]||d[(g-1)/2|0]}),a.init(l,p,u)}});var Iy={name:"css",register:sd,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,s,r,n){var o=this._props,a=t.style,l=s.vars.startAt,h,c,u,d,p,m,g,_,x,b,y,w,T,D,I,P;Lf||sd(),this.styles=this.styles||wy(t),P=this.styles.props,this.tween=s;for(g in e)if(g!=="autoRound"&&(c=e[g],!(De[g]&&uy(g,e,s,r,t,n)))){if(p=typeof c,m=fh[g],p==="function"&&(c=c.call(s,r,t,n),p=typeof c),p==="string"&&~c.indexOf("random(")&&(c=ha(c)),m)m(this,t,g,c,s)&&(I=1);else if(g.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(g)+"").trim(),c+="",Ns.lastIndex=0,Ns.test(h)||(_=ce(h),x=ce(c)),x?_!==x&&(h=zs(t,g,h,x)+x):_&&(c+=_),this.add(a,"setProperty",h,c,r,n,0,0,g),o.push(g),P.push(g,0,a[g]);else if(p!=="undefined"){if(l&&g in l?(h=typeof l[g]=="function"?l[g].call(s,r,t,n):l[g],ie(h)&&~h.indexOf("random(")&&(h=ha(h)),ce(h+"")||(h+=Le.units[g]||ce(ls(t,g))||""),(h+"").charAt(1)==="="&&(h=ls(t,g))):h=ls(t,g),d=parseFloat(h),b=p==="string"&&c.charAt(1)==="="&&c.substr(0,2),b&&(c=c.substr(2)),u=parseFloat(c),g in Ui&&(g==="autoAlpha"&&(d===1&&ls(t,"visibility")==="hidden"&&u&&(d=0),P.push("visibility",0,a.visibility),Ms(this,a,"visibility",d?"inherit":"hidden",u?"inherit":"hidden",!u)),g!=="scale"&&g!=="transform"&&(g=Ui[g],~g.indexOf(",")&&(g=g.split(",")[0]))),y=g in ys,y){if(this.styles.save(g),w||(T=t._gsap,T.renderTransform&&!e.parseTransform||pa(t,e.parseTransform),D=e.smoothOrigin!==!1&&T.smooth,w=this._pt=new Ae(this._pt,a,Lt,0,1,T.renderTransform,T,0,-1),w.dep=1),g==="scale")this._pt=new Ae(this._pt,T,"scaleY",T.scaleY,(b?Cn(T.scaleY,b+u):u)-T.scaleY||0,ed),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){P.push(Si,0,a[Si]),c=kP(c),T.svg?rd(t,c,0,D,0,this):(x=parseFloat(c.split(" ")[2])||0,x!==T.zOrigin&&Ms(this,T,"zOrigin",T.zOrigin,x),Ms(this,a,g,ph(h),ph(c)));continue}else if(g==="svgOrigin"){rd(t,c,1,D,0,this);continue}else if(g in Cy){NP(this,T,g,d,b?Cn(d,b+c):c);continue}else if(g==="smoothOrigin"){Ms(this,T,"smooth",T.smooth,c);continue}else if(g==="force3D"){T[g]=c;continue}else if(g==="transform"){UP(this,c,t);continue}}else g in a||(g=Wn(g)||g);if(y||(u||u===0)&&(d||d===0)&&!xP.test(c)&&g in a)_=(h+"").substr((d+"").length),u||(u=0),x=ce(c)||(g in Le.units?Le.units[g]:_),_!==x&&(d=zs(t,g,h,x)),this._pt=new Ae(this._pt,y?T:a,g,d,(b?Cn(d,b+u):u)-d,!y&&(x==="px"||g==="zIndex")&&e.autoRound!==!1?TP:ed),this._pt.u=x||0,_!==x&&x!=="%"&&(this._pt.b=h,this._pt.r=wP);else if(g in a)OP.call(this,t,g,h,b?b+c:c);else if(g in t)this.add(t,g,h||t[g],b?b+c:c,r,n);else if(g!=="parseTransform"){Pf(g,c);continue}y||(g in a?P.push(g,0,a[g]):P.push(g,1,h||t[g])),o.push(g)}}I&&_y(this)},render:function(t,e){if(e.tween._time||!Nf())for(var s=e._pt;s;)s.r(t,s.d),s=s._next;else e.styles.revert()},get:ls,aliases:Ui,getSetter:function(t,e,s){var r=Ui[e];return r&&r.indexOf(",")<0&&(e=r),e in ys&&e!==Si&&(t._gsap.x||ls(t,"x"))?s&&eg===s?e==="scale"?SP:CP:(eg=s||{})&&(e==="scale"?PP:IP):t.style&&!Af(t.style[e])?EP:~e.indexOf("-")?AP:Ff(t,e)},core:{_removeProperty:da,_getMatrix:$f}};Ce.utils.checkPrefix=Wn;Ce.core.getStyleSaver=wy;(function(i,t,e,s){var r=Ee(i+","+t+","+e,function(n){ys[n]=1});Ee(t,function(n){Le.units[n]="deg",Cy[n]=1}),Ui[r[13]]=i+","+t,Ee(s,function(n){var o=n.split(":");Ui[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ee("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Le.units[i]="px"});Ce.registerPlugin(Iy);var Gf=Ce.registerPlugin(Iy)||Ce;Gf.core.Tween;var Xn=1e3,Yn=Xn*60,qn=Yn*60,Ur=qn*24,$P=Ur*7,GP=Ur*365.25,HP=function(i,t){t=t||{};var e=typeof i;if(e==="string"&&i.length>0)return zP(i);if(e==="number"&&isFinite(i))return t.long?jP(i):VP(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function zP(i){if(i=String(i),!(i.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(t){var e=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return e*GP;case"weeks":case"week":case"w":return e*$P;case"days":case"day":case"d":return e*Ur;case"hours":case"hour":case"hrs":case"hr":case"h":return e*qn;case"minutes":case"minute":case"mins":case"min":case"m":return e*Yn;case"seconds":case"second":case"secs":case"sec":case"s":return e*Xn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e;default:return}}}}function VP(i){var t=Math.abs(i);return t>=Ur?Math.round(i/Ur)+"d":t>=qn?Math.round(i/qn)+"h":t>=Yn?Math.round(i/Yn)+"m":t>=Xn?Math.round(i/Xn)+"s":i+"ms"}function jP(i){var t=Math.abs(i);return t>=Ur?_l(i,t,Ur,"day"):t>=qn?_l(i,t,qn,"hour"):t>=Yn?_l(i,t,Yn,"minute"):t>=Xn?_l(i,t,Xn,"second"):i+" ms"}function _l(i,t,e,s){var r=t>=e*1.5;return Math.round(i/e)+" "+s+(r?"s":"")}const WP=wh(HP);class qc extends ee{constructor(e,s,r){super();q(this,"capacity");q(this,"_spinning");q(this,"_blocks");q(this,"_stopAt");q(this,"_size",0);this.reelOptions=e,this.gui=s,this.animations=r,this._spinning=!1,this._blocks=[],this._stopAt=new AS,this.x=e.id*_n.WIDTH,this.capacity=this.getCapacityByReelId(e.id),this.reset()}get stopAt(){return this._stopAt}get isSpinning(){return this._spinning}get blocks(){return this._blocks}get size(){return this._blocks.length*zt.HEIGHT}get spinTime(){return WP(this.reelOptions.spinTime)}init(){const e=this.reelOptions.id+1,s=String(e).padStart(2,"0"),r=this.gui.addFolder(`Reel ${s}`),n=["1.0 sec","1.4 sec","1.8 sec","2.2 sec","2.6 sec","3.0 sec"];r.add(this.reelOptions,"spinTime",n).name("Spin time").onChange(o=>{this.reelOptions.spinTime=o}),r.add(this,"capacity",8,64,1).name("Block capacity")}subscribe(){this.visible=!0}unsubscribe(){this.visible=!1}stopAtEquals(...e){return e.every(s=>this.stopAt.equals(s.stopAt))}async spin(){this._spinning=!0,await Gf.to(this,{pixi:{y:this.getCalculatedStopAtPoint()},duration:this.getCalculatedSpinTime(),ease:this.animations.getCurrentValue()}).then(()=>{this._spinning=!1})}addBlock(e){this._blocks.push(e),e.y=-this._blocks.length*zt.HEIGHT,this._size+=zt.HEIGHT+zt.LINE_THICKNESS*2,this.addChild(e)}clearBlocks(){this._blocks.length=0,this.removeChildren()}update(e,s){for(const r of this._blocks)r.update(e,s)}reset(){this.clearBlocks(),this.y=this.size+2*zt.HEIGHT,this._size=0,this.stopAt.chooseRandomly()}getCapacityByReelId(e){return(e+1)*8}getCalculatedStopAtPoint(){return this.stopAt.isPartial()?this.size-zt.HEIGHT/2:this.size}getCalculatedSpinTime(){return this.spinTime/1e3}}class XP{constructor(t){this.vars=t}getDefaultView(){return this.vars.VITE_DEFAULT_VIEW}getAnimationFunction(){return this.vars.VITE_ANIMATION_FUNCTION}getAnimationStrength(){return this.vars.VITE_ANIMATION_STRENGTH}getDoubleDelay(){return+this.vars.VITE_DOUBLE_DELAY}}const ma=new XP({VITE_ANIMATION_FUNCTION:"back.out",VITE_ANIMATION_STRENGTH:"0.4",VITE_DEFAULT_VIEW:"Slot",VITE_BASE_URL:"/mini-slot",VITE_DESCRIPTION:"Lucky Spin is a game of chance where you can win a prize. You can play once a day for free, or buy more spins.",VITE_TITLE:"Lucky Spin | ",VITE_ENV:"GitHub",VITE_DOUBLE_DELAY:"1000",BASE_URL:"/mini-slot",MODE:"github",DEV:!1,PROD:!0,SSR:!1});class YP{constructor(t){q(this,"current",ma.getAnimationFunction());q(this,"strength",ma.getAnimationStrength());q(this,"fns",["back.out","bounce.out","power1.out","power1.in","power1.inOut","power2.out","power2.in","power2.inOut","power3.out","power3.in","power3.inOut","power4.out","power4.in","power4.inOut","expo.out","expo.in","expo.inOut","sine.out","sine.in","sine.inOut","elastic.out","elastic.in","elastic.inOut"]);q(this,"section");this.section=t.addFolder("Animations")}init(){this.section.add(this.fns,"",this.fns).name("Function").setValue(this.current).onChange(t=>{this.current=t}),this.section.add(this,"strength",0,1,.1).name("Strength")}getCurrentValue(){return`${this.current}(${this.strength})`}}class qP{constructor(t,e){q(this,"reels");q(this,"section");q(this,"app");q(this,"animations");this.app=e,this.section=t.addFolder("Reels"),this.animations=new YP(this.section),this.reels=[new qc({spinTime:"1.0 sec",id:0},this.section,this.animations),new qc({spinTime:"1.4 sec",id:1},this.section,this.animations),new qc({spinTime:"1.8 sec",id:2},this.section,this.animations)],this.update=this.update.bind(this)}init(){this.animations.init();for(const t of this.reels)t.init(),this.app.stage.addChild(t)}subscribe(){for(const t of this.reels)t.subscribe()}unsubscribe(){for(const t of this.reels)t.unsubscribe()}areRunning(){for(const t of this.reels)if(t.isSpinning)return!0;return!1}stoppedAtSamePosition(){const[t]=this.reels;return t.stopAtEquals(...this.reels)}stoppedAtPartialPosition(){for(const t of this.reels)if(!t.stopAt.isPartial())return!1;return!0}extractLines(){const t=[];let e=-1;for(;++e<3;){const s=[];for(const r of this.reels)s.push(r.blocks[r.blocks.length-1-e]);t.push(s)}return{first:t[0],second:t[1],third:t[2]}}toArray(){return this.reels}update(t,e){for(const s of this.reels)s.update(t,e)}*[Symbol.iterator](){for(const t of this.reels)yield t}}class KP{calculate([t,e,s],r){return t.equals(e,s)?this.getValue(t)*this.getMultiplier(t,r):t.isAnyBAR&&e.isAnyBAR&&s.isAnyBAR?5:t.isSevenOrCherry&&e.isSevenOrCherry&&s.isSevenOrCherry?75:0}getMultiplier(t,e){if(t.isCherry){if(e==="Top")return 2;if(e==="Middle")return 1;if(e==="Bottom")return 3}if(t.isSeven){if(e==="Top")return 1;if(e==="Middle")return 3;if(e==="Bottom")return 2}return 1}getValue(t){return t.isBARx1?10:t.isBARx2?20:t.isBARx3?50:t.isSeven?150:t.isCherry?300:0}}class My{constructor(t,e){q(this,"symbols",[bt.SEVEN,bt.CHERRY,bt.BARx1,bt.BARx2,bt.BARx3]);q(this,"calculator");this.reels=t,this.reelSymbols=e,this.calculator=new KP}async spin(){if(this.reels.areRunning())return;this.reset(),this.addBlocks();const t=[];for(const e of this.reels)t.push(e.spin());await Promise.all(t)}reset(){for(const t of this.reels)t.reset()}calculatePayout(){const t=this.reels.extractLines();if(!this.reels.stoppedAtSamePosition())return 0;if(this.reels.stoppedAtPartialPosition()){const r=this.calculateMiddleLine(t.second);return r>0?(t.second.forEach(n=>n.highlightWinnerLine()),r*xi()):0}const e=this.calculateTopLine(t.first),s=this.calculateBottomLine(t.second);return e>0&&t.first.forEach(r=>r.highlightWinnerLine()),s>0&&t.second.forEach(r=>r.highlightWinnerLine()),(e+s)*xi()}subscribe(){}unsubscribe(){}hideGui(){}showGui(){}calculateMiddleLine(t){return this.calculator.calculate(t,"Middle")}calculateTopLine(t){return this.calculator.calculate(t,"Top")}calculateBottomLine(t){return this.calculator.calculate(t,"Bottom")}}var ZP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,QP=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,JP=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`;let mh=class extends mt{constructor(t=4,e=3,s=!1){super(ZP,s?JP:QP),this._kernels=[],this._blur=4,this._quality=3,this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new ft,this.pixelSize=1,this._clamp=s,Array.isArray(t)?this.kernels=t:(this._blur=t,this.quality=e)}apply(t,e,s,r){const n=this._pixelSize.x/e._frame.width,o=this._pixelSize.y/e._frame.height;let a;if(this._quality===1||this._blur===0)a=this._kernels[0]+.5,this.uniforms.uOffset[0]=a*n,this.uniforms.uOffset[1]=a*o,t.applyFilter(this,e,s,r);else{const l=t.getFilterTexture();let h=e,c=l,u;const d=this._quality-1;for(let p=0;p<d;p++)a=this._kernels[p]+.5,this.uniforms.uOffset[0]=a*n,this.uniforms.uOffset[1]=a*o,t.applyFilter(this,h,c,1),u=h,h=c,c=u;a=this._kernels[d]+.5,this.uniforms.uOffset[0]=a*n,this.uniforms.uOffset[1]=a*o,t.applyFilter(this,h,s,r),t.returnFilterTexture(l)}}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((t,e)=>t+e+.5,0))}_generateKernels(){const t=this._blur,e=this._quality,s=[t];if(t>0){let r=t;const n=t/e;for(let o=1;o<e;o++)r-=n,s.push(r)}this._kernels=s,this._updatePadding()}get kernels(){return this._kernels}set kernels(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max(...t)):(this._kernels=[0],this._quality=1)}get clamp(){return this._clamp}set pixelSize(t){typeof t=="number"?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof ft?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)}get pixelSize(){return this._pixelSize}get quality(){return this._quality}set quality(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()}get blur(){return this._blur}set blur(t){this._blur=t,this._generateKernels()}};var Ry=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,t2=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`;let e2=class extends mt{constructor(t=.5){super(Ry,t2),this.threshold=t}get threshold(){return this.uniforms.threshold}set threshold(t){this.uniforms.threshold=t}};var i2=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`;const Dy=class extends mt{constructor(t){super(Ry,i2),this.bloomScale=1,this.brightness=1,this._resolution=Z.FILTER_RESOLUTION,typeof t=="number"&&(t={threshold:t});const e=Object.assign(Dy.defaults,t);this.bloomScale=e.bloomScale,this.brightness=e.brightness;const{kernels:s,blur:r,quality:n,pixelSize:o,resolution:a}=e;this._extractFilter=new e2(e.threshold),this._extractFilter.resolution=a,this._blurFilter=s?new mh(s):new mh(r,n),this.pixelSize=o,this.resolution=a}apply(t,e,s,r,n){const o=t.getFilterTexture();this._extractFilter.apply(t,e,o,1,n);const a=t.getFilterTexture();this._blurFilter.apply(t,o,a,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=a,t.applyFilter(this,e,s,r),t.returnFilterTexture(a),t.returnFilterTexture(o)}get resolution(){return this._resolution}set resolution(t){this._resolution=t,this._extractFilter&&(this._extractFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)}get threshold(){return this._extractFilter.threshold}set threshold(t){this._extractFilter.threshold=t}get kernels(){return this._blurFilter.kernels}set kernels(t){this._blurFilter.kernels=t}get blur(){return this._blurFilter.blur}set blur(t){this._blurFilter.blur=t}get quality(){return this._blurFilter.quality}set quality(t){this._blurFilter.quality=t}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(t){this._blurFilter.pixelSize=t}};let s2=Dy;s2.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:Z.FILTER_RESOLUTION};var r2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,n2=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`;const Oy=class extends mt{constructor(t){super(r2,n2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,Oy.defaults,t)}apply(t,e,s,r){const{width:n,height:o}=e.filterFrame;this.uniforms.dimensions[0]=n,this.uniforms.dimensions[1]=o,t.applyFilter(this,e,s,r)}get radius(){return this.uniforms.radius}set radius(t){this.uniforms.radius=t}get strength(){return this.uniforms.strength}set strength(t){this.uniforms.strength=t}get center(){return this.uniforms.center}set center(t){this.uniforms.center=t}};let o2=Oy;o2.defaults={center:[.5,.5],radius:100,strength:1};var a2=`const float PI = 3.1415926538;
const float PI_2 = PI*2.;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;
uniform sampler2D uSampler;

const int TYPE_LINEAR = 0;
const int TYPE_RADIAL = 1;
const int TYPE_CONIC = 2;
const int MAX_STOPS = 32;

uniform int uNumStops;
uniform float uAlphas[3*MAX_STOPS];
uniform vec3 uColors[MAX_STOPS];
uniform float uOffsets[MAX_STOPS];
uniform int uType;
uniform float uAngle;
uniform float uAlpha;
uniform int uMaxColors;

struct ColorStop {
    float offset;
    vec3 color;
    float alpha;
};

mat2 rotate2d(float angle){
    return mat2(cos(angle), -sin(angle),
    sin(angle), cos(angle));
}

float projectLinearPosition(vec2 pos, float angle){
    vec2 center = vec2(0.5);
    vec2 result = pos - center;
    result = rotate2d(angle) * result;
    result = result + center;
    return clamp(result.x, 0., 1.);
}

float projectRadialPosition(vec2 pos) {
    float r = distance(vFilterCoord, vec2(0.5));
    return clamp(2.*r, 0., 1.);
}

float projectAnglePosition(vec2 pos, float angle) {
    vec2 center = pos - vec2(0.5);
    float polarAngle=atan(-center.y, center.x);
    return mod(polarAngle + angle, PI_2) / PI_2;
}

float projectPosition(vec2 pos, int type, float angle) {
    if (type == TYPE_LINEAR) {
        return projectLinearPosition(pos, angle);
    } else if (type == TYPE_RADIAL) {
        return projectRadialPosition(pos);
    } else if (type == TYPE_CONIC) {
        return projectAnglePosition(pos, angle);
    }

    return pos.y;
}

void main(void) {
    // current/original color
    vec4 currentColor = texture2D(uSampler, vTextureCoord);

    // skip calculations if gradient alpha is 0
    if (0.0 == uAlpha) {
        gl_FragColor = currentColor;
        return;
    }

    // project position
    float y = projectPosition(vFilterCoord, uType, radians(uAngle));

    // check gradient bounds
    float offsetMin = uOffsets[0];
    float offsetMax = 0.0;

    for (int i = 0; i < MAX_STOPS; i++) {
        if (i == uNumStops-1){ // last index
            offsetMax = uOffsets[i];
        }
    }

    if (y  < offsetMin || y > offsetMax) {
        gl_FragColor = currentColor;
        return;
    }

    // limit colors
    if (uMaxColors > 0) {
        float stepSize = 1./float(uMaxColors);
        float stepNumber = float(floor(y/stepSize));
        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment
    }

    // find color stops
    ColorStop from;
    ColorStop to;

    for (int i = 0; i < MAX_STOPS; i++) {
        if (y >= uOffsets[i]) {
            from = ColorStop(uOffsets[i], uColors[i], uAlphas[i]);
            to = ColorStop(uOffsets[i+1], uColors[i+1], uAlphas[i+1]);
        }

        if (i == uNumStops-1){ // last index
            break;
        }
    }

    // mix colors from stops
    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);
    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);

    float segmentHeight = to.offset - from.offset;
    float relativePos = y - from.offset;// position from 0 to [segmentHeight]
    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].

    float gradientAlpha = uAlpha * currentColor.a;
    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;

    // mix resulting color with current color
    gl_FragColor = gradientColor + currentColor*(1.-gradientColor.a);
}
`,l2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform vec4 inputSize;
uniform vec4 outputFrame;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
    vFilterCoord = vTextureCoord * inputSize.xy / outputFrame.zw;
}
`,Vr=Vr||{};Vr.stringify=function(){var i={"visit_linear-gradient":function(t){return i.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return i.visit_gradient(t)},"visit_radial-gradient":function(t){return i.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return i.visit_gradient(t)},visit_gradient:function(t){var e=i.visit(t.orientation);return e&&(e+=", "),t.type+"("+e+i.visit(t.colorStops)+")"},visit_shape:function(t){var e=t.value,s=i.visit(t.at),r=i.visit(t.style);return r&&(e+=" "+r),s&&(e+=" at "+s),e},"visit_default-radial":function(t){var e="",s=i.visit(t.at);return s&&(e+=s),e},"visit_extent-keyword":function(t){var e=t.value,s=i.visit(t.at);return s&&(e+=" at "+s),e},"visit_position-keyword":function(t){return t.value},visit_position:function(t){return i.visit(t.value.x)+" "+i.visit(t.value.y)},"visit_%":function(t){return t.value+"%"},visit_em:function(t){return t.value+"em"},visit_px:function(t){return t.value+"px"},visit_literal:function(t){return i.visit_color(t.value,t)},visit_hex:function(t){return i.visit_color("#"+t.value,t)},visit_rgb:function(t){return i.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return i.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,e){var s=t,r=i.visit(e.length);return r&&(s+=" "+r),s},visit_angular:function(t){return t.value+"deg"},visit_directional:function(t){return"to "+t.value},visit_array:function(t){var e="",s=t.length;return t.forEach(function(r,n){e+=i.visit(r),n<s-1&&(e+=", ")}),e},visit:function(t){if(!t)return"";var e="";if(t instanceof Array)return i.visit_array(t,e);if(t.type){var s=i["visit_"+t.type];if(s)return s(t);throw Error("Missing visitor visit_"+t.type)}else throw Error("Invalid node.")}};return function(t){return i.visit(t)}}();var Vr=Vr||{};Vr.parse=function(){var i={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function e(k){var W=new Error(t+": "+k);throw W.source=t,W}function s(){var k=r();return t.length>0&&e("Invalid input not EOF"),k}function r(){return y(n)}function n(){return o("linear-gradient",i.linearGradient,l)||o("repeating-linear-gradient",i.repeatingLinearGradient,l)||o("radial-gradient",i.radialGradient,u)||o("repeating-radial-gradient",i.repeatingRadialGradient,u)}function o(k,W,$){return a(W,function(E){var L=$();return L&&(U(i.comma)||e("Missing comma before color stops")),{type:k,orientation:L,colorStops:y(w)}})}function a(k,W){var $=U(k);if($){U(i.startCall)||e("Missing (");var E=W($);return U(i.endCall)||e("Missing )"),E}}function l(){return h()||c()}function h(){return F("directional",i.sideOrCorner,1)}function c(){return F("angular",i.angleValue,1)}function u(){var k,W=d(),$;return W&&(k=[],k.push(W),$=t,U(i.comma)&&(W=d(),W?k.push(W):t=$)),k}function d(){var k=p()||m();if(k)k.at=_();else{var W=g();if(W){k=W;var $=_();$&&(k.at=$)}else{var E=x();E&&(k={type:"default-radial",at:E})}}return k}function p(){var k=F("shape",/^(circle)/i,0);return k&&(k.style=B()||g()),k}function m(){var k=F("shape",/^(ellipse)/i,0);return k&&(k.style=O()||g()),k}function g(){return F("extent-keyword",i.extentKeywords,1)}function _(){if(F("position",/^at/,0)){var k=x();return k||e("Missing positioning value"),k}}function x(){var k=b();if(k.x||k.y)return{type:"position",value:k}}function b(){return{x:O(),y:O()}}function y(k){var W=k(),$=[];if(W)for($.push(W);U(i.comma);)W=k(),W?$.push(W):e("One extra comma");return $}function w(){var k=T();return k||e("Expected color definition"),k.length=O(),k}function T(){return I()||S()||P()||D()}function D(){return F("literal",i.literalColor,0)}function I(){return F("hex",i.hexColor,1)}function P(){return a(i.rgbColor,function(){return{type:"rgb",value:y(M)}})}function S(){return a(i.rgbaColor,function(){return{type:"rgba",value:y(M)}})}function M(){return U(i.number)[1]}function O(){return F("%",i.percentageValue,1)||N()||B()}function N(){return F("position-keyword",i.positionKeywords,1)}function B(){return F("px",i.pixelValue,1)||F("em",i.emValue,1)}function F(k,W,$){var E=U(W);if(E)return{type:k,value:E[$]}}function U(k){var W,$;return $=/^[\n\r\t\s]+/.exec(t),$&&V($[0].length),W=k.exec(t),W&&V(W[0].length),W}function V(k){t=t.substr(k)}return function(k){return t=k.toString(),s()}}();var h2=Vr.parse;Vr.stringify;var hg={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},cg={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function c2(i){var t,e=[],s=1,r;if(typeof i=="string")if(hg[i])e=hg[i].slice(),r="rgb";else if(i==="transparent")s=0,r="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var n=i.slice(1),o=n.length,a=o<=4;s=1,a?(e=[parseInt(n[0]+n[0],16),parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16)],o===4&&(s=parseInt(n[3]+n[3],16)/255)):(e=[parseInt(n[0]+n[1],16),parseInt(n[2]+n[3],16),parseInt(n[4]+n[5],16)],o===8&&(s=parseInt(n[6]+n[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),r="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var l=t[1],h=l==="rgb",n=l.replace(/a$/,"");r=n;var o=n==="cmyk"?4:n==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(d,p){if(/%$/.test(d))return p===o?parseFloat(d)/100:n==="rgb"?parseFloat(d)*255/100:parseFloat(d);if(n[p]==="h"){if(/deg$/.test(d))return parseFloat(d);if(cg[d]!==void 0)return cg[d]}return parseFloat(d)}),l===n&&e.push(1),s=h||e[o]===void 0?1:e[o],e=e.slice(0,o)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(e=i.match(/([0-9]+)/g).map(function(c){return parseFloat(c)}),r=i.match(/([a-z])/ig).join("").toLowerCase());else isNaN(i)?Array.isArray(i)||i.length?(e=[i[0],i[1],i[2]],r="rgb",s=i.length===4?i[3]:1):i instanceof Object&&(i.r!=null||i.red!=null||i.R!=null?(r="rgb",e=[i.r||i.red||i.R||0,i.g||i.green||i.G||0,i.b||i.blue||i.B||0]):(r="hsl",e=[i.h||i.hue||i.H||0,i.s||i.saturation||i.S||0,i.l||i.lightness||i.L||i.b||i.brightness]),s=i.a||i.alpha||i.opacity||1,i.opacity!=null&&(s/=100)):(r="rgb",e=[i>>>16,(i&65280)>>>8,i&255]);return{space:r,values:e,alpha:s}}var nd={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Kc={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var t=i[0]/360,e=i[1]/100,s=i[2]/100,r,n,o,a,l;if(e===0)return l=s*255,[l,l,l];s<.5?n=s*(1+e):n=s+e-s*e,r=2*s-n,a=[0,0,0];for(var h=0;h<3;h++)o=t+1/3*-(h-1),o<0?o++:o>1&&o--,6*o<1?l=r+(n-r)*6*o:2*o<1?l=n:3*o<2?l=r+(n-r)*(2/3-o)*6:l=r,a[h]=l*255;return a}};nd.hsl=function(i){var t=i[0]/255,e=i[1]/255,s=i[2]/255,r=Math.min(t,e,s),n=Math.max(t,e,s),o=n-r,a,l,h;return n===r?a=0:t===n?a=(e-s)/o:e===n?a=2+(s-t)/o:s===n&&(a=4+(t-e)/o),a=Math.min(a*60,360),a<0&&(a+=360),h=(r+n)/2,n===r?l=0:h<=.5?l=o/(n+r):l=o/(2-n-r),[a,l*100,h*100]};function u2(i){Array.isArray(i)&&i.raw&&(i=String.raw(...arguments));var t,e=c2(i);if(!e.space)return[];const s=e.space[0]==="h"?Kc.min:nd.min,r=e.space[0]==="h"?Kc.max:nd.max;return t=Array(3),t[0]=Math.min(Math.max(e.values[0],s[0]),r[0]),t[1]=Math.min(Math.max(e.values[1],s[1]),r[1]),t[2]=Math.min(Math.max(e.values[2],s[2]),r[2]),e.space[0]==="h"&&(t=Kc.rgb(t)),t.push(Math.min(Math.max(e.alpha,0),1)),t}function ky(i){switch(typeof i){case"string":return d2(i);case"number":return ba(i);default:return i}}function d2(i){const t=u2(i);if(!t)throw new Error(`Unable to parse color "${i}" as RGBA.`);return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function f2(i){const t=h2(w2(i));if(t.length===0)throw new Error("Invalid CSS gradient.");if(t.length!==1)throw new Error("Unsupported CSS gradient (multiple gradients is not supported).");const e=t[0],s=p2(e.type),r=m2(e.colorStops),n=x2(e.orientation);return{type:s,stops:r,angle:n}}function p2(i){const t={"linear-gradient":0,"radial-gradient":1};if(!(i in t))throw new Error(`Unsupported gradient type "${i}"`);return t[i]}function m2(i){const t=v2(i),e=[];for(let s=0;s<i.length;s++){const r=g2(i[s]);e.push({offset:t[s],color:r.slice(0,3),alpha:r[3]})}return e}function g2(i){return ky(_2(i))}function _2(i){switch(i.type){case"hex":return`#${i.value}`;case"literal":return i.value;default:return`${i.type}(${i.value.join(",")})`}}function v2(i){const t=[];for(let r=0;r<i.length;r++){const n=i[r];let o=-1;n.type==="literal"&&n.length&&"type"in n.length&&n.length.type==="%"&&"value"in n.length&&(o=parseFloat(n.length.value)/100),t.push(o)}const e=r=>{for(let n=r;n<t.length;n++)if(t[n]!==-1)return{indexDelta:n-r,offset:t[n]};return{indexDelta:t.length-1-r,offset:1}};let s=0;for(let r=0;r<t.length;r++){const n=t[r];if(n!==-1)s=n;else if(r===0)t[r]=0;else if(r+1===t.length)t[r]=1;else{const o=e(r),a=(o.offset-s)/(1+o.indexDelta);for(let l=0;l<=o.indexDelta;l++)t[r+l]=s+(l+1)*a;r+=o.indexDelta,s=t[r]}}return t.map(y2)}function y2(i){return i.toString().length>6?parseFloat(i.toString().substring(0,6)):i}function x2(i){if(typeof i>"u")return 0;if("type"in i&&"value"in i)switch(i.type){case"angular":return parseFloat(i.value);case"directional":return b2(i.value)}return 0}function b2(i){const t={left:270,top:0,bottom:180,right:90,"left top":315,"top left":315,"left bottom":225,"bottom left":225,"right top":45,"top right":45,"right bottom":135,"bottom right":135};if(!(i in t))throw new Error(`Unsupported directional value "${i}"`);return t[i]}function w2(i){let t=i.replace(/\s{2,}/gu," ");return t=t.replace(/;/g,""),t=t.replace(/ ,/g,","),t=t.replace(/\( /g,"("),t=t.replace(/ \)/g,")"),t.trim()}var T2=Object.defineProperty,E2=Object.defineProperties,A2=Object.getOwnPropertyDescriptors,ug=Object.getOwnPropertySymbols,C2=Object.prototype.hasOwnProperty,S2=Object.prototype.propertyIsEnumerable,dg=(i,t,e)=>t in i?T2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Zc=(i,t)=>{for(var e in t||(t={}))C2.call(t,e)&&dg(i,e,t[e]);if(ug)for(var e of ug(t))S2.call(t,e)&&dg(i,e,t[e]);return i},P2=(i,t)=>E2(i,A2(t));const fg=90;function I2(i){return[...i].sort((t,e)=>t.offset-e.offset)}const Hf=class extends mt{constructor(t){t&&"css"in t&&(t=P2(Zc({},f2(t.css||"")),{alpha:t.alpha,maxColors:t.maxColors}));const e=Zc(Zc({},Hf.defaults),t);if(!e.stops||e.stops.length<2)throw new Error("ColorGradientFilter requires at least 2 color stops.");super(l2,a2),this._stops=[],this.autoFit=!1,Object.assign(this,e)}get stops(){return this._stops}set stops(t){const e=I2(t),s=new Float32Array(e.length*3),r=0,n=1,o=2;for(let a=0;a<e.length;a++){const l=ky(e[a].color),h=a*3;s[h+r]=l[r],s[h+n]=l[n],s[h+o]=l[o]}this.uniforms.uColors=s,this.uniforms.uOffsets=e.map(a=>a.offset),this.uniforms.uAlphas=e.map(a=>a.alpha),this.uniforms.uNumStops=e.length,this._stops=e}set type(t){this.uniforms.uType=t}get type(){return this.uniforms.uType}set angle(t){this.uniforms.uAngle=t-fg}get angle(){return this.uniforms.uAngle+fg}set alpha(t){this.uniforms.uAlpha=t}get alpha(){return this.uniforms.uAlpha}set maxColors(t){this.uniforms.uMaxColors=t}get maxColors(){return this.uniforms.uMaxColors}};let vl=Hf;vl.LINEAR=0,vl.RADIAL=1,vl.CONIC=2,vl.defaults={type:Hf.LINEAR,stops:[{offset:0,color:16711680,alpha:1},{offset:1,color:255,alpha:1}],alpha:1,angle:90,maxColors:0};var M2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,R2=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`;const Fy=class extends mt{constructor(t){super(M2,R2),this.time=0,this.seed=0,this.uniforms.dimensions=new Float32Array(2),Object.assign(this,Fy.defaults,t)}apply(t,e,s,r){const{width:n,height:o}=e.filterFrame;this.uniforms.dimensions[0]=n,this.uniforms.dimensions[1]=o,this.uniforms.seed=this.seed,this.uniforms.time=this.time,t.applyFilter(this,e,s,r)}set curvature(t){this.uniforms.curvature=t}get curvature(){return this.uniforms.curvature}set lineWidth(t){this.uniforms.lineWidth=t}get lineWidth(){return this.uniforms.lineWidth}set lineContrast(t){this.uniforms.lineContrast=t}get lineContrast(){return this.uniforms.lineContrast}set verticalLine(t){this.uniforms.verticalLine=t}get verticalLine(){return this.uniforms.verticalLine}set noise(t){this.uniforms.noise=t}get noise(){return this.uniforms.noise}set noiseSize(t){this.uniforms.noiseSize=t}get noiseSize(){return this.uniforms.noiseSize}set vignetting(t){this.uniforms.vignetting=t}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(t){this.uniforms.vignettingAlpha=t}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(t){this.uniforms.vignettingBlur=t}get vignettingBlur(){return this.uniforms.vignettingBlur}};let By=Fy;By.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0};var D2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,O2=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`,k2=Object.defineProperty,pg=Object.getOwnPropertySymbols,F2=Object.prototype.hasOwnProperty,B2=Object.prototype.propertyIsEnumerable,mg=(i,t,e)=>t in i?k2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,gg=(i,t)=>{for(var e in t||(t={}))F2.call(t,e)&&mg(i,e,t[e]);if(pg)for(var e of pg(t))B2.call(t,e)&&mg(i,e,t[e]);return i};const od=class extends mt{constructor(t){super(),this.angle=45,this._distance=5,this._resolution=Z.FILTER_RESOLUTION;const e=t?gg(gg({},od.defaults),t):od.defaults,{kernels:s,blur:r,quality:n,pixelSize:o,resolution:a}=e;this._offset=new Ni(this._updatePadding,this),this._tintFilter=new mt(D2,O2),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=this._offset,this._tintFilter.resolution=a,this._blurFilter=s?new mh(s):new mh(r,n),this.pixelSize=o,this.resolution=a;const{shadowOnly:l,rotation:h,distance:c,offset:u,alpha:d,color:p}=e;this.shadowOnly=l,h!==void 0&&c!==void 0?(this.rotation=h,this.distance=c):this.offset=u,this.alpha=d,this.color=p}apply(t,e,s,r){const n=t.getFilterTexture();this._tintFilter.apply(t,e,n,1),this._blurFilter.apply(t,n,s,r),this.shadowOnly!==!0&&t.applyFilter(this,e,s,0),t.returnFilterTexture(n)}_updatePadding(){const t=Math.max(Math.abs(this._offset.x),Math.abs(this._offset.y));this.padding=t+this.blur*2}_updateShift(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}set offset(t){this._offset.copyFrom(t),this._updatePadding()}get offset(){return this._offset}get resolution(){return this._resolution}set resolution(t){this._resolution=t,this._tintFilter&&(this._tintFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)}get distance(){return this._distance}set distance(t){ut("5.3.0","DropShadowFilter distance is deprecated, use offset"),this._distance=t,this._updatePadding(),this._updateShift()}get rotation(){return this.angle/Nn}set rotation(t){ut("5.3.0","DropShadowFilter rotation is deprecated, use offset"),this.angle=t*Nn,this._updateShift()}get alpha(){return this._tintFilter.uniforms.alpha}set alpha(t){this._tintFilter.uniforms.alpha=t}get color(){return wa(this._tintFilter.uniforms.color)}set color(t){ba(t,this._tintFilter.uniforms.color)}get kernels(){return this._blurFilter.kernels}set kernels(t){this._blurFilter.kernels=t}get blur(){return this._blurFilter.blur}set blur(t){this._blurFilter.blur=t,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(t){this._blurFilter.quality=t}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(t){this._blurFilter.pixelSize=t}};let L2=od;L2.defaults={offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:Z.FILTER_RESOLUTION};var N2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,U2=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`;const ad=class extends mt{constructor(t){super(N2,U2),this.offset=100,this.fillMode=ad.TRANSPARENT,this.average=!1,this.seed=0,this.minSize=8,this.sampleSize=512,this._slices=0,this._offsets=new Float32Array(1),this._sizes=new Float32Array(1),this._direction=-1,this.uniforms.dimensions=new Float32Array(2),this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=J.from(this._canvas,{scaleMode:wi.NEAREST}),Object.assign(this,ad.defaults,t)}apply(t,e,s,r){const{width:n,height:o}=e.filterFrame;this.uniforms.dimensions[0]=n,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/n,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,t.applyFilter(this,e,s,r)}_randomizeSizes(){const t=this._sizes,e=this._slices-1,s=this.sampleSize,r=Math.min(this.minSize/s,.9/this._slices);if(this.average){const n=this._slices;let o=1;for(let a=0;a<e;a++){const l=o/(n-a),h=Math.max(l*(1-Math.random()*.6),r);t[a]=h,o-=h}t[e]=o}else{let n=1;const o=Math.sqrt(1/this._slices);for(let a=0;a<e;a++){const l=Math.max(o*n*Math.random(),r);t[a]=l,n-=l}t[e]=n}this.shuffle()}shuffle(){const t=this._sizes,e=this._slices-1;for(let s=e;s>0;s--){const r=Math.random()*s>>0,n=t[s];t[s]=t[r],t[r]=n}}_randomizeOffsets(){for(let t=0;t<this._slices;t++)this._offsets[t]=Math.random()*(Math.random()<.5?-1:1)}refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}redraw(){const t=this.sampleSize,e=this.texture,s=this._canvas.getContext("2d");s.clearRect(0,0,8,t);let r,n=0;for(let o=0;o<this._slices;o++){r=Math.floor(this._offsets[o]*256);const a=this._sizes[o]*t,l=r>0?r:0,h=r<0?-r:0;s.fillStyle=`rgba(${l}, ${h}, 0, 1)`,s.fillRect(0,n>>0,t,a+1>>0),n+=a}e.baseTexture.update(),this.uniforms.displacementMap=e}set sizes(t){const e=Math.min(this._slices,t.length);for(let s=0;s<e;s++)this._sizes[s]=t[s]}get sizes(){return this._sizes}set offsets(t){const e=Math.min(this._slices,t.length);for(let s=0;s<e;s++)this._offsets[s]=t[s]}get offsets(){return this._offsets}get slices(){return this._slices}set slices(t){this._slices!==t&&(this._slices=t,this.uniforms.slices=t,this._sizes=this.uniforms.slicesWidth=new Float32Array(t),this._offsets=this.uniforms.slicesOffset=new Float32Array(t),this.refresh())}get direction(){return this._direction}set direction(t){if(this._direction===t)return;this._direction=t;const e=t*Nn;this.uniforms.sinDir=Math.sin(e),this.uniforms.cosDir=Math.cos(e)}get red(){return this.uniforms.red}set red(t){this.uniforms.red=t}get green(){return this.uniforms.green}set green(t){this.uniforms.green=t}get blue(){return this.uniforms.blue}set blue(t){this.uniforms.blue=t}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}};let rn=ad;rn.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},rn.TRANSPARENT=0,rn.ORIGINAL=1,rn.LOOP=2,rn.CLAMP=3,rn.MIRROR=4;var $2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,G2=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;
uniform float alpha;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    if (knockout) {
      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;const Ly=class extends mt{constructor(i){const t=Object.assign({},Ly.defaults,i),{outerStrength:e,innerStrength:s,color:r,knockout:n,quality:o,alpha:a}=t,l=Math.round(t.distance);super($2,G2.replace(/__ANGLE_STEP_SIZE__/gi,`${(1/o/l).toFixed(7)}`).replace(/__DIST__/gi,`${l.toFixed(0)}.0`)),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.uniforms.alpha=1,Object.assign(this,{color:r,outerStrength:e,innerStrength:s,padding:l,knockout:n,alpha:a})}get color(){return wa(this.uniforms.glowColor)}set color(i){ba(i,this.uniforms.glowColor)}get outerStrength(){return this.uniforms.outerStrength}set outerStrength(i){this.uniforms.outerStrength=i}get innerStrength(){return this.uniforms.innerStrength}set innerStrength(i){this.uniforms.innerStrength=i}get knockout(){return this.uniforms.knockout}set knockout(i){this.uniforms.knockout=i}get alpha(){return this.uniforms.alpha}set alpha(i){this.uniforms.alpha=i}};let Ny=Ly;Ny.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1};var H2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,z2=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,V2=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`;const Uy=class extends mt{constructor(t){super(H2,V2.replace("${perlin}",z2)),this.parallel=!0,this.time=0,this._angle=0,this.uniforms.dimensions=new Float32Array(2);const e=Object.assign(Uy.defaults,t);this._angleLight=new ft,this.angle=e.angle,this.gain=e.gain,this.lacunarity=e.lacunarity,this.alpha=e.alpha,this.parallel=e.parallel,this.center=e.center,this.time=e.time}apply(t,e,s,r){const{width:n,height:o}=e.filterFrame;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=n,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/n,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,t.applyFilter(this,e,s,r)}get angle(){return this._angle}set angle(t){this._angle=t;const e=t*Nn;this._angleLight.x=Math.cos(e),this._angleLight.y=Math.sin(e)}get gain(){return this.uniforms.gain}set gain(t){this.uniforms.gain=t}get lacunarity(){return this.uniforms.lacunarity}set lacunarity(t){this.uniforms.lacunarity=t}get alpha(){return this.uniforms.alpha}set alpha(t){this.uniforms.alpha=t}};let j2=Uy;j2.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1};var W2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,X2=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float uHue;
uniform float uAlpha;
uniform bool uColorize;
uniform float uSaturation;
uniform float uLightness;

// https://en.wikipedia.org/wiki/Luma_(video)
const vec3 weight = vec3(0.299, 0.587, 0.114);

float getWeightedAverage(vec3 rgb) {
    return rgb.r * weight.r + rgb.g * weight.g + rgb.b * weight.b;
}

// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243
const vec3 k = vec3(0.57735, 0.57735, 0.57735);

vec3 hueShift(vec3 color, float angle) {
    float cosAngle = cos(angle);
    return vec3(
    color * cosAngle +
    cross(k, color) * sin(angle) +
    k * dot(k, color) * (1.0 - cosAngle)
    );
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    vec4 result = color;

    // colorize
    if (uColorize) {
        result.rgb = vec3(getWeightedAverage(result.rgb), 0., 0.);
    }

    // hue
    result.rgb = hueShift(result.rgb, uHue);

    // saturation
    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js
    float average = (result.r + result.g + result.b) / 3.0;

    if (uSaturation > 0.) {
        result.rgb += (average - result.rgb) * (1. - 1. / (1.001 - uSaturation));
    } else {
        result.rgb -= (average - result.rgb) * uSaturation;
    }

    // lightness
    result.rgb = mix(result.rgb, vec3(ceil(uLightness)) * color.a, abs(uLightness));

    // alpha
    gl_FragColor = mix(color, result, uAlpha);
}
`;const $y=class extends mt{constructor(i){super(W2,X2),this._hue=0;const t=Object.assign({},$y.defaults,i);Object.assign(this,t)}get hue(){return this._hue}set hue(i){this._hue=i,this.uniforms.uHue=this._hue*(Math.PI/180)}get alpha(){return this.uniforms.uAlpha}set alpha(i){this.uniforms.uAlpha=i}get colorize(){return this.uniforms.uColorize}set colorize(i){this.uniforms.uColorize=i}get lightness(){return this.uniforms.uLightness}set lightness(i){this.uniforms.uLightness=i}get saturation(){return this.uniforms.uSaturation}set saturation(i){this.uniforms.uSaturation=i}};let Y2=$y;Y2.defaults={hue:0,saturation:0,lightness:0,colorize:!1,alpha:1};var q2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,K2=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`;const Gy=class extends mt{constructor(t,e=0){super(q2,K2),this.seed=0,this.uniforms.dimensions=new Float32Array(2),typeof t=="number"?(this.seed=t,t=void 0):this.seed=e,Object.assign(this,Gy.defaults,t)}apply(t,e,s,r){var n,o;this.uniforms.dimensions[0]=(n=e.filterFrame)==null?void 0:n.width,this.uniforms.dimensions[1]=(o=e.filterFrame)==null?void 0:o.height,this.uniforms.seed=this.seed,t.applyFilter(this,e,s,r)}set sepia(t){this.uniforms.sepia=t}get sepia(){return this.uniforms.sepia}set noise(t){this.uniforms.noise=t}get noise(){return this.uniforms.noise}set noiseSize(t){this.uniforms.noiseSize=t}get noiseSize(){return this.uniforms.noiseSize}set scratch(t){this.uniforms.scratch=t}get scratch(){return this.uniforms.scratch}set scratchDensity(t){this.uniforms.scratchDensity=t}get scratchDensity(){return this.uniforms.scratchDensity}set scratchWidth(t){this.uniforms.scratchWidth=t}get scratchWidth(){return this.uniforms.scratchWidth}set vignetting(t){this.uniforms.vignetting=t}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(t){this.uniforms.vignettingAlpha=t}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(t){this.uniforms.vignettingBlur=t}get vignettingBlur(){return this.uniforms.vignettingBlur}};let Z2=Gy;Z2.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3};var Q2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,J2=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterClamp;

uniform float uAlpha;
uniform vec2 uThickness;
uniform vec4 uColor;
uniform bool uKnockout;

const float DOUBLE_PI = 2. * 3.14159265358979323846264;
const float ANGLE_STEP = \${angleStep};

float outlineMaxAlphaAtPos(vec2 pos) {
    if (uThickness.x == 0. || uThickness.y == 0.) {
        return 0.;
    }

    vec4 displacedColor;
    vec2 displacedPos;
    float maxAlpha = 0.;

    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {
        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);
        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);
        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, displacedColor.a);
    }

    return maxAlpha;
}

void main(void) {
    vec4 sourceColor = texture2D(uSampler, vTextureCoord);
    vec4 contentColor = sourceColor * float(!uKnockout);
    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);
    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);
    gl_FragColor = contentColor + outlineColor;
}
`;const Ol=class extends mt{constructor(t=1,e=0,s=.1,r=1,n=!1){super(Q2,J2.replace(/\$\{angleStep\}/,Ol.getAngleStep(s))),this._thickness=1,this._alpha=1,this._knockout=!1,this.uniforms.uThickness=new Float32Array([0,0]),this.uniforms.uColor=new Float32Array([0,0,0,1]),this.uniforms.uAlpha=r,this.uniforms.uKnockout=n,Object.assign(this,{thickness:t,color:e,quality:s,alpha:r,knockout:n})}static getAngleStep(t){const e=Math.max(t*Ol.MAX_SAMPLES,Ol.MIN_SAMPLES);return(Math.PI*2/e).toFixed(7)}apply(t,e,s,r){this.uniforms.uThickness[0]=this._thickness/e._frame.width,this.uniforms.uThickness[1]=this._thickness/e._frame.height,this.uniforms.uAlpha=this._alpha,this.uniforms.uKnockout=this._knockout,t.applyFilter(this,e,s,r)}get alpha(){return this._alpha}set alpha(t){this._alpha=t}get color(){return wa(this.uniforms.uColor)}set color(t){ba(t,this.uniforms.uColor)}get knockout(){return this._knockout}set knockout(t){this._knockout=t}get thickness(){return this._thickness}set thickness(t){this._thickness=t,this.padding=t}};let _g=Ol;_g.MIN_SAMPLES=1,_g.MAX_SAMPLES=100;var tI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,eI=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`;const Hy=class extends mt{constructor(t){super(tI,eI),this.time=0,this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,Hy.defaults,t)}apply(t,e,s,r){var n,o;this.uniforms.dimensions[0]=(n=e.filterFrame)==null?void 0:n.width,this.uniforms.dimensions[1]=(o=e.filterFrame)==null?void 0:o.height,this.uniforms.time=this.time,t.applyFilter(this,e,s,r)}set mirror(t){this.uniforms.mirror=t}get mirror(){return this.uniforms.mirror}set boundary(t){this.uniforms.boundary=t}get boundary(){return this.uniforms.boundary}set amplitude(t){this.uniforms.amplitude[0]=t[0],this.uniforms.amplitude[1]=t[1]}get amplitude(){return this.uniforms.amplitude}set waveLength(t){this.uniforms.waveLength[0]=t[0],this.uniforms.waveLength[1]=t[1]}get waveLength(){return this.uniforms.waveLength}set alpha(t){this.uniforms.alpha[0]=t[0],this.uniforms.alpha[1]=t[1]}get alpha(){return this.uniforms.alpha}};let iI=Hy;iI.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0};var sI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,rI=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`;const zy=class extends mt{constructor(t=[0,0],e,s=0){super(sI,rI),this.center=t,Object.assign(this,zy.defaults,e),this.time=s}apply(t,e,s,r){this.uniforms.time=this.time,t.applyFilter(this,e,s,r)}get center(){return this.uniforms.center}set center(t){this.uniforms.center=t}get amplitude(){return this.uniforms.amplitude}set amplitude(t){this.uniforms.amplitude=t}get wavelength(){return this.uniforms.wavelength}set wavelength(t){this.uniforms.wavelength=t}get brightness(){return this.uniforms.brightness}set brightness(t){this.uniforms.brightness=t}get speed(){return this.uniforms.speed}set speed(t){this.uniforms.speed=t}get radius(){return this.uniforms.radius}set radius(t){this.uniforms.radius=t}};let nI=zy;nI.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1};var oI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,aI=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`;let Vy=class extends mt{constructor(t){var e,s;super(oI,aI),this.uniforms.blur=t.blur,this.uniforms.gradientBlur=t.gradientBlur,this.uniforms.start=(e=t.start)!=null?e:new ft(0,window.innerHeight/2),this.uniforms.end=(s=t.end)!=null?s:new ft(600,window.innerHeight/2),this.uniforms.delta=new ft(30,30),this.uniforms.texSize=new ft(window.innerWidth,window.innerHeight),this.updateDelta()}updateDelta(){this.uniforms.delta.x=0,this.uniforms.delta.y=0}get blur(){return this.uniforms.blur}set blur(t){this.uniforms.blur=t}get gradientBlur(){return this.uniforms.gradientBlur}set gradientBlur(t){this.uniforms.gradientBlur=t}get start(){return this.uniforms.start}set start(t){this.uniforms.start=t,this.updateDelta()}get end(){return this.uniforms.end}set end(t){this.uniforms.end=t,this.updateDelta()}},lI=class extends Vy{updateDelta(){const t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,s=Math.sqrt(t*t+e*e);this.uniforms.delta.x=t/s,this.uniforms.delta.y=e/s}},hI=class extends Vy{updateDelta(){const t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,s=Math.sqrt(t*t+e*e);this.uniforms.delta.x=-e/s,this.uniforms.delta.y=t/s}};const jy=class extends mt{constructor(t,e,s,r){super(),typeof t=="number"&&(ut("5.3.0","TiltShiftFilter constructor arguments is deprecated, use options."),t={blur:t,gradientBlur:e,start:s,end:r}),t=Object.assign({},jy.defaults,t),this.tiltShiftXFilter=new lI(t),this.tiltShiftYFilter=new hI(t)}apply(t,e,s,r){const n=t.getFilterTexture();this.tiltShiftXFilter.apply(t,e,n,1),this.tiltShiftYFilter.apply(t,n,s,r),t.returnFilterTexture(n)}get blur(){return this.tiltShiftXFilter.blur}set blur(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}get gradientBlur(){return this.tiltShiftXFilter.gradientBlur}set gradientBlur(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}get start(){return this.tiltShiftXFilter.start}set start(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}get end(){return this.tiltShiftXFilter.end}set end(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}};let cI=jy;cI.defaults={blur:100,gradientBlur:600,start:void 0,end:void 0};var uI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,dI=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`;const Wy=class extends mt{constructor(i){super(uI,dI),Object.assign(this,Wy.defaults,i)}get offset(){return this.uniforms.offset}set offset(i){this.uniforms.offset=i}get radius(){return this.uniforms.radius}set radius(i){this.uniforms.radius=i}get angle(){return this.uniforms.angle}set angle(i){this.uniforms.angle=i}};let fI=Wy;fI.defaults={radius:200,angle:4,padding:20,offset:new ft};var pI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,mI=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,vg=Object.getOwnPropertySymbols,gI=Object.prototype.hasOwnProperty,_I=Object.prototype.propertyIsEnumerable,vI=(i,t)=>{var e={};for(var s in i)gI.call(i,s)&&t.indexOf(s)<0&&(e[s]=i[s]);if(i!=null&&vg)for(var s of vg(i))t.indexOf(s)<0&&_I.call(i,s)&&(e[s]=i[s]);return e};const Xy=class extends mt{constructor(i){const t=Object.assign(Xy.defaults,i),{maxKernelSize:e}=t,s=vI(t,["maxKernelSize"]);super(pI,mI.replace("${maxKernelSize}",e.toFixed(1))),Object.assign(this,s)}get center(){return this.uniforms.uCenter}set center(i){this.uniforms.uCenter=i}get strength(){return this.uniforms.uStrength}set strength(i){this.uniforms.uStrength=i}get innerRadius(){return this.uniforms.uInnerRadius}set innerRadius(i){this.uniforms.uInnerRadius=i}get radius(){return this.uniforms.uRadius}set radius(i){(i<0||i===1/0)&&(i=-1),this.uniforms.uRadius=i}};let yI=Xy;yI.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32};class Yy{constructor(){}update(t,e){}}class xI extends Yy{constructor(){super();q(this,"_filter");q(this,"_high",5);q(this,"_low",1);q(this,"_sign",1);this._filter=new Ny({outerStrength:0,distance:10,innerStrength:0})}get filter(){return this._filter}update(e,s){const r=this._filter.outerStrength+this._sign*e*.1;r>this._high&&(this._sign=-1),r<this._low&&(this._sign=1),this._filter.outerStrength=r}}class bI extends Yy{constructor(){super();q(this,"_filter");this._filter=new By({vignettingAlpha:.5,vignettingBlur:.3,time:0,seed:10})}get filter(){return this._filter}update(e,s){this._filter.time+=e*.1,this._filter.seed=Math.random()*e}}class Rs extends _s{constructor(e,s,r){super();q(this,"_id");q(this,"_key");q(this,"_sprite");q(this,"_default");q(this,"_highlight");this._id=r,this._key=s,this.width=zt.WIDTH,this.height=zt.HEIGHT,this.lineStyle(zt.LINE_THICKNESS,"#6A6E6AE8",.05),this.drawRect(0,0,zt.WIDTH,zt.HEIGHT),this.endFill(),this.zIndex=1,this._sprite=new Qi(e),this._sprite.width=Rs.reduce(zt.WIDTH).by(30),this._sprite.height=Rs.reduce(zt.HEIGHT).by(30),this._sprite.x=this.alignX(this._sprite),this._sprite.y=this.alignY(this._sprite),this.addChild(this._sprite),this._highlight=new xI,this._default=new bI,this._sprite.filters=[this._default.filter]}get id(){return this._id}get key(){return this._key}get isBARx1(){return this.key===bt.BARx1}get isBARx2(){return this.key===bt.BARx2}get isBARx3(){return this.key===bt.BARx3}get isAnyBAR(){return this.isBARx1||this.isBARx2||this.isBARx3}get isSeven(){return this.key===bt.SEVEN}get isCherry(){return this.key===bt.CHERRY}get isSevenOrCherry(){return this.isSeven||this.isCherry}static reduce(e){return{by(s){return e-e*s/100}}}equals(...e){return e.every(s=>s.key===this.key)}highlightWinnerLine(){this._sprite.filters=[this._highlight.filter]}update(e,s){this._highlight.update(e,s),this._default.update(e,s)}alignX(e){return(this.width-e.width)/2}alignY(e){return(this.height-e.height)/2}}let qy=class kl{static int(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t)+t)}static shuffleList(t){for(let e=0;e<t.length;e++){const s=kl.int(e+1,t.length-1);[t[s],t[e]]=[t[e],t[s]]}return t}static pick(t,e=30){const s=[],r=kl.pickRandom(t);let n=r.next();for(;s.length<e&&n.value;)s.push(n.value),n=r.next();return s}static*pickRandom(t){let e=0,s=Array.from(t);for(;;){s.length===0&&(s=Array.from(t));const r=kl.int(0,s.length),n=s[r];s.splice(r,1),yield{val:n,idx:e++}}}};class yg extends My{constructor(t,e){super(t,e)}addBlocks(){for(const t of this.reels){const e=qy.pick(this.symbols,t.capacity);for(const{val:s,idx:r}of e)t.addBlock(new Rs(this.reelSymbols.get(s),s,r))}}subscribe(){super.subscribe(),this.addInitialBlocks()}addInitialBlocks(){for(const t of this.reels){const e=t.capacity;t.capacity=3,t.addBlock(new Rs(this.reelSymbols.get(bt.CHERRY),bt.CHERRY,0)),t.addBlock(new Rs(this.reelSymbols.get(bt.SEVEN),bt.SEVEN,1)),t.addBlock(new Rs(this.reelSymbols.get(bt.BARx3),bt.BARx3,2)),t.capacity=e}}}class xg extends My{constructor(e,s,r){super(e,s);q(this,"position");q(this,"symbol");q(this,"section");this.section=r.addFolder("Fixed mode options"),this.position="Middle",this.symbol=bt.SEVEN}setPosition(e){this.position=e}setSymbol(e){this.symbol=e}hideGui(){super.hideGui(),this.section.hide()}showGui(){super.showGui(),this.section.show()}addBlocks(){for(const e of this.reels){e.stopAt.byPosition(this.position);const s=qy.pick(this.symbols,e.capacity),r=this.getIndex(s.length);for(const{val:n,idx:o}of s){const a=o===r?this.symbol:n;e.addBlock(new Rs(this.reelSymbols.get(a),a,o))}}}subscribe(){super.subscribe(),this.section.hide();const e=["Top","Middle","Bottom"];this.section.add(this,"position",e).name("Position").setValue("Middle").onChange(s=>{this.reset(),this.position=s}),this.section.add(this,"symbol",this.symbols).name("Symbol").setValue("Seven").onChange(s=>{this.reset(),this.symbol=s})}getIndex(e){return this.position==="Top"?e-1:e-2}}class wI{constructor(t,e,s){q(this,"modes");q(this,"mode");this.modes={Random:new yg(e,s),Fixed:new xg(e,s,t)},this.mode=this.modes.Random}get current(){return this.mode}isFixed(){return this.mode instanceof xg}isRandom(){return this.mode instanceof yg}changeTo(t){this.mode.hideGui(),this.mode=this.modes[t],this.mode.showGui()}subscribe(){this.modes.Random.subscribe(),this.modes.Fixed.subscribe()}unsubscribe(){this.modes.Random.unsubscribe(),this.modes.Fixed.unsubscribe()}}class bg extends Mv{constructor(e,s,r){super(e,s);q(this,"_container");q(this,"_reels");q(this,"_modes");q(this,"_section");this._section=e,this._container=new ee,this._container.width=he.WIDTH,this._container.height=he.HEIGHT,this._reels=new qP(e,this.app),this._modes=new wI(e,this._reels,r),this.ticker=this.ticker.bind(this)}async init(){this._container.addChild(...this.stoppingDots()),this.app.stage.addChild(this._container),this._reels.init(),this.attachGui()}async run(){return Hw(xi()),await this._modes.current.spin(),this._modes.current.calculatePayout()}subscribe(){this._container.visible=!0,this._reels.subscribe(),this._modes.subscribe(),this.app.ticker.add(this.ticker)}unsubscribe(){this._container.visible=!1,this._reels.unsubscribe(),this._modes.unsubscribe(),this.app.ticker.remove(this.ticker)}ticker(e){this._reels.update(e,this.app.ticker.elapsedMS/1e3)}stoppingDots(){return[new vi(0,zt.HEIGHT/2),new vi(0,_n.HEIGHT/2),new vi(0,_n.HEIGHT-zt.HEIGHT/2),new vi(he.WIDTH-vi.width,zt.HEIGHT/2),new vi(he.WIDTH-vi.width,_n.HEIGHT/2),new vi(he.WIDTH-vi.width,_n.HEIGHT-zt.HEIGHT/2)]}attachGui(){this._section.add(this._modes,"name",["Random","Fixed"]).setValue("Random").name("Select mode").onChange(e=>{this._modes.changeTo(e),this._modes.isFixed()&&(this._modes.current.setPosition("Middle"),this._modes.current.setSymbol(bt.SEVEN))})}}class TI{constructor(){q(this,"_started");q(this,"_current");this.update(),this._started=Date.now()}get elapsed(){return this._current-this._started}get delta(){return Date.now()-this._current}update(){this._current=Date.now()}}class wg extends Mv{constructor(e,s,r){super(e,s);q(this,"container",new ee);q(this,"red",new _s);q(this,"blue",new _s);q(this,"timestamp",new TI);q(this,"defaultDelay",ma.getDoubleDelay()||1e3);q(this,"level",1);q(this,"oneChanceUsed",!1);q(this,"currentlyVisible",ki.BLUE);this.ticker=this.ticker.bind(this),this.reset=this.reset.bind(this),this.onPress=this.onPress.bind(this),this.onAdError=this.onAdError.bind(this),this.onAdFinished=this.onAdFinished.bind(this),this.onAdRejected=this.onAdRejected.bind(this),this.drawShape(this.red,"red",16711680),this.drawShape(this.blue,"blue",255)}get delay(){return this.defaultDelay/this.level}init(){const e=new Bs("What color is the shape?",{fill:"white",fontFamily:"Lobster",fontWeight:"bold",fontSize:18});e.anchor.set(.5),e.y=20,e.x=he.WIDTH/2,this.container.addChild(e),this.app.stage.addChild(this.container),this.container.addChild(this.red,this.blue),this.addGui(),this.reset()}async run(){return 0}subscribe(){this.container.visible=!0,this.app.ticker.add(this.ticker,this),Xe.on("onPress",this.onPress),Xe.on("adError",this.onAdError),Xe.on("adFinished",this.onAdFinished),Xe.on("adRejected",this.onAdRejected)}unsubscribe(){this.container.visible=!1,this.app.ticker.remove(this.ticker,this),Xe.off("onPress",this.onPress),Xe.off("adError",this.onAdError),Xe.off("adFinished",this.onAdFinished),Xe.off("adRejected",this.onAdRejected),this.reset()}drawShape(e,s,r){e.name=s,e.beginFill(r),e.alpha=.7,e.lineStyle(2,16777215),e.drawRoundedRect(he.WIDTH/2-zt.WIDTH/2,40,zt.WIDTH,zt.WIDTH,5),e.endFill()}reset(){this.level=1,this.currentlyVisible=ki.BLUE,this.red.visible=!1,this.blue.visible=!0,this.oneChanceUsed=!1}toggleShape(){this.currentlyVisible=this.currentlyVisible===ki.BLUE?ki.RED:ki.BLUE,this.red.visible=this.currentlyVisible===ki.RED,this.blue.visible=this.currentlyVisible===ki.BLUE}ticker(e){O_()||this.timestamp.delta<this.delay||(this.toggleShape(),this.timestamp.update())}onPress(e){if(e===this.currentlyVisible)return this.processWin();this.hasChance()||this.processLose()}onAdError(){this.processLose()}onAdRejected(){this.processLose()}onAdFinished(){console.info("Ad complete"),Rh(Math.floor(Us()/2))}processWin(){this.level++,jw()}processLose(){k_()}hasChance(){return Bn.isCrazyGames()&&!this.oneChanceUsed?(this.oneChanceUsed=!0,Nw(),!0):!1}addGui(){this.gui.add(this,"level",1,10,1).name("Level")}}class EI{constructor(t,e,s){q(this,"views");q(this,"section");q(this,"game");q(this,"double");q(this,"view");this.section=t.addFolder("Views"),this.game=this.section.addFolder("Slot"),this.double=this.section.addFolder("Double"),this.views={Slot:new bg(this.game,e,s),Double:new wg(this.double,e,s)},this.view=this.views.Slot}get current(){return this.view}init(){this.views.Slot.init(),this.views.Double.init()}isSlot(){return this.view instanceof bg}isDouble(){return this.view instanceof wg}changeTo(t){this.unsubscribeAll(),this.hideAll(),this.view=this.views[t],this.view.subscribe(),this.showCurrentGui(),Bw({isSlot:this.isSlot(),isDouble:this.isDouble()})}activateDefault(){this.changeTo(ma.getDefaultView())}subscribe(){this.section.add(this.views,"name",Object.keys(this.views)).name("Choose view").setValue(ma.getDefaultView()).onChange(t=>{this.changeTo(t)})}unsubscribeAll(){this.views.Slot.unsubscribe(),this.views.Double.unsubscribe()}hideAll(){this.game.hide(),this.double.hide()}showCurrentGui(){this.isSlot()&&this.game.show(),this.isDouble()&&this.double.show()}}const AI=i=>new Promise(t=>setTimeout(t,i)),vr=class vr extends cS{constructor(){super();q(this,"views");q(this,"section");this.createPixiApplication(),this.renderSpinner(),this.section=Iv.addFolder("Game options"),this.views=new EI(this.section,this.app,this.slotSymbols)}static getInstance(){return vr.instance||(vr.instance=new vr),vr.instance}start(){this.hideSpinner(),this.views.init(),this.subscribe()}showDefaultView(){this.views.activateDefault()}subscribeControls(e,s,r,n){e.addEventListener("click",this.spin.bind(this)),s.addEventListener("click",this.takeWin.bind(this)),r.addEventListener("click",this.doubleWin.bind(this)),n.addEventListener("click",this.autoSpin.bind(this))}unsubscribeControls(e,s,r,n){e.removeEventListener("click",this.spin.bind(this)),s.removeEventListener("click",this.takeWin.bind(this)),r.removeEventListener("click",this.doubleWin.bind(this)),n.removeEventListener("click",this.autoSpin.bind(this))}async spin(){if(Os()<xi()){Lw(),R_(!1);return}this.takeWin();const e=await this.views.current.run();e>0&&(Bn.isCrazyGames()&&e>300&&await window.CrazyGames.SDK.game.happytime(),console.log(`You won ${e} coins!`),Rh(e)),Vl()&&(e>0&&await AI(3e3),await this.spin())}takeWin(){Gw(Us()),k_(),this.views.isDouble()&&this.views.activateDefault()}doubleWin(){this.views.changeTo("Double")}autoSpin(){Ww()}subscribe(){this.views.subscribe(),this.views.activateDefault(),this.section.add(this,"spin").name("Spin")}};q(vr,"instance");let ga=vr;const CI=se('<div class="d-flex justify-content-around btn-container"><button class="btn" id="auto-spin">Auto <br> </button><button class="btn" id="double">Double <br>Win</button><button class="btn" id="spin">Spin <br> </button><button class="btn" id="take-win">Take <br> Win'),SI=()=>{const i=ga.getInstance(),t=ti(),e=ti(),s=ti(),r=ti(),[n,o]=Rt(!1),[a,l]=Rt(!1),[h,c]=Rt(!1),[u,d]=Rt(!1);return te(()=>{o(xo.isDouble),c(Us()===0||xo.isDouble||Vl()),d(Us()===0),l(xo.isDouble)}),te(()=>(t&&i.subscribeControls(t.current,r.current,s.current,e.current),()=>{i.unsubscribeControls(t.current,r.current,s.current,e.current)})),(()=>{const p=CI(),m=p.firstChild;m.firstChild.nextSibling.nextSibling;const x=m.nextSibling,b=x.nextSibling;b.firstChild.nextSibling.nextSibling;const T=b.nextSibling,D=e.current;typeof D=="function"?yr(D,m):e.current=m,Wt(m,it(Mh,{get when(){return Vl()},fallback:"OFF",children:"ON"}),null);const I=s.current;typeof I=="function"?yr(I,x):s.current=x;const P=t.current;typeof P=="function"?yr(P,b):t.current=b,Wt(b,it(tT,{}),null);const S=r.current;return typeof S=="function"?yr(S,T):r.current=T,Wt(p,it(Jw,{get disabled(){return xo.isDouble}}),null),Gi(M=>{const O=a(),N=h(),B=n(),F=u();return O!==M._v$&&(m.disabled=M._v$=O),N!==M._v$2&&(x.disabled=M._v$2=N),B!==M._v$3&&(b.disabled=M._v$3=B),F!==M._v$4&&(T.disabled=M._v$4=F),M},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),p})()},PI=se('<div class="d-flex justify-content-around double-controls"><button class="btn btn-double btn-primary" id="bonus-blue">Blue</button><button class="btn btn-double btn-danger" id="bonus-red">Red'),II=()=>{const i=ga.getInstance(),t=e=>()=>Xe.emit("onPress",e);return te(()=>{Us()===0&&i.showDefaultView()}),(()=>{const e=PI(),s=e.firstChild,r=s.nextSibling;return du(s,"mousedown",t(ki.BLUE),!0),du(r,"mousedown",t(ki.RED),!0),e})()};Pd(["mousedown"]);const MI=()=>[it(Mh,{get when(){return xo.isDouble},get children(){return it(II,{})}}),it(SI,{})];const RI=se('<div class="counter user-credits"><div class="label">Credits</div><div>'),DI=()=>{const i=ti(),t=ti();return te(()=>{t.current||i.current&&(t.current=new Dh({el:i.current,value:Os(),theme:"slot-machine"}))},{layout:!0}),te(()=>{var e;(e=t.current)==null||e.update(Os())}),(()=>{const e=RI(),s=e.firstChild,r=s.nextSibling,n=i.current;return typeof n=="function"?yr(n,r):i.current=r,e})()};const OI=se('<div class="counter jackpot"><div class="label">Jackpot</div><div>'),kI=()=>{const i=ti(),t=ti();return te(()=>{t.current||i.current&&(t.current=new Dh({el:i.current,value:mu(),theme:"slot-machine"}))},{layout:!0}),te(()=>{var e;(e=t.current)==null||e.update(mu())}),(()=>{const e=OI(),s=e.firstChild,r=s.nextSibling,n=i.current;return typeof n=="function"?yr(n,r):i.current=r,e})()};const FI=se('<div class="counter current-win"><div class="label">Win</div><div>'),BI=()=>{const i=ti(),t=ti();return te(()=>{t.current||i.current&&(t.current=new Dh({el:i.current,value:Us(),theme:"slot-machine",duration:300}))},{layout:!0}),te(()=>{var e;(e=t.current)==null||e.update(Us())}),(()=>{const e=FI(),s=e.firstChild,r=s.nextSibling,n=i.current;return typeof n=="function"?yr(n,r):i.current=r,e})()};const LI=se('<div class="d-flex justify-content-around screen">'),NI=()=>(()=>{const i=LI();return Wt(i,it(DI,{}),null),Wt(i,it(kI,{}),null),Wt(i,it(BI,{}),null),i})();function Ky(i){var t,e,s="";if(typeof i=="string"||typeof i=="number")s+=i;else if(typeof i=="object")if(Array.isArray(i))for(t=0;t<i.length;t++)i[t]&&(e=Ky(i[t]))&&(s&&(s+=" "),s+=e);else for(t in i)i[t]&&(s&&(s+=" "),s+=t);return s}function Ki(...i){for(var t=0,e,s,r="";t<i.length;)(e=i[t++])&&(s=Ky(e))&&(r&&(r+=" "),r+=s);return r}function UI(i,t){let e=!1;const s=t.stopPropagation;return t.stopPropagation=()=>{e=!0,s()},typeof i=="function"?i(t):Array.isArray(i)&&i[0](i[1],t),t.stopPropagation=s,{isPropagationStopped:e}}function $I(i,t,e){var n,o;const s=t?t.split(" "):[],r=e?e.split(" "):[];(n=i.classList)==null||n.remove(...s.filter(a=>r.indexOf(a)===-1)),(o=i.classList)==null||o.add(...r.filter(a=>s.indexOf(a)===-1))}function GI(i){return!i||i.trim()==="#"}const HI={tabIndex:0};function zI(i){const t=Tt(HI,i),e=ae(()=>t.tagName?t.tagName:t.href!=null||t.target!=null||t.rel!=null?"a":"button"),s={get tagName(){return e()}};if(e()==="button")return[{get type(){return t.type||"button"},get disabled(){return t.disabled}},s];const r=ae(()=>a=>{if((t.disabled||e()==="a"&&GI(t.href))&&a.preventDefault(),t.disabled){a.stopPropagation();return}UI(t.onClick,a)}),n=ae(()=>a=>{a.key===" "&&(a.preventDefault(),r()(a))}),o=()=>e()==="a"?t.disabled?void 0:t.href||"#":t.href;return[{role:"button",disabled:void 0,get tabIndex(){return t.disabled?void 0:t.tabIndex},get href(){return o()},get target(){return e()==="a"?t.target:void 0},get"aria-disabled"(){return t.disabled?t.disabled:void 0},get rel(){return e()==="a"?t.rel:void 0},get onClick(){return r()},get onKeyDown(){return n()}},s]}var VI=Function.prototype.bind.call(Function.prototype.call,[].slice);function nn(i,t){return VI(i.querySelectorAll(t))}const io=!!(typeof window<"u"&&window.document&&window.document.createElement);var ld=!1,hd=!1;try{var Qc={get passive(){return ld=!0},get once(){return hd=ld=!0}};io&&(window.addEventListener("test",Qc,Qc),window.removeEventListener("test",Qc,!0))}catch{}function Zy(i,t,e,s){if(s&&typeof s!="boolean"&&!hd){var r=s.once,n=s.capture,o=e;!hd&&r&&(o=e.__once||function a(l){this.removeEventListener(t,a,n),e.call(this,l)},e.__once=o),i.addEventListener(t,o,ld?s:n)}i.addEventListener(t,e,s)}function Tg(i,t){if(i.contains)return i.contains(t);if(i.compareDocumentPosition)return i===t||!!(i.compareDocumentPosition(t)&16)}function cd(i,t,e,s){var r=s&&typeof s!="boolean"?s.capture:s;i.removeEventListener(t,e,r),e.__once&&i.removeEventListener(t,e.__once,r)}function gh(i,t,e,s){return Zy(i,t,e,s),function(){cd(i,t,e,s)}}function Kh(i){return i&&i.ownerDocument||document}const jI="data-rr-ui-";function WI(i){return`${jI}${i}`}const XI=Sh(io?window:void 0);function Qy(){return va(XI)}function Jc(i){i===void 0&&(i=Kh());try{var t=i.activeElement;return!t||!t.nodeName?null:t}catch{return i.body}}function YI(i){var t=Kh(i);return t&&t.defaultView||window}function qI(i,t){return YI(i).getComputedStyle(i,t)}var KI=/([A-Z])/g;function ZI(i){return i.replace(KI,"-$1").toLowerCase()}var QI=/^ms-/;function yl(i){return ZI(i).replace(QI,"-ms-")}var JI=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function tM(i){return!!(i&&JI.test(i))}function Dr(i,t){var e="",s="";if(typeof t=="string")return i.style.getPropertyValue(yl(t))||qI(i).getPropertyValue(yl(t));Object.keys(t).forEach(function(r){var n=t[r];!n&&n!==0?i.style.removeProperty(yl(r)):tM(r)?s+=r+"("+n+") ":e+=yl(r)+": "+n+";"}),s&&(e+="transform: "+s+";"),i.style.cssText+=";"+e}function eM(i=document){const t=i.defaultView;return Math.abs(t.innerWidth-i.documentElement.clientWidth)}const Eg=WI("modal-open");class iM{constructor({ownerDocument:t,handleContainerOverflow:e=!0,isRTL:s=!1}={}){q(this,"handleContainerOverflow");q(this,"isRTL");q(this,"modals");q(this,"state");q(this,"ownerDocument");this.handleContainerOverflow=e,this.isRTL=s,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return eM(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const e={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[s]:r.style[s]},t.scrollBarWidth&&(e[s]=`${parseInt(Dr(r,s)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(Eg,""),Dr(r,e)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const e=this.getElement();e.removeAttribute(Eg),Object.assign(e.style,t.style)}add(t){let e=this.modals.indexOf(t);return e!==-1||(e=this.modals.length,this.modals.push(t),this.setModalAttributes(t),e!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e}remove(t){const e=this.modals.indexOf(t);e!==-1&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const zf=iM,Ag=(i,t)=>io?i==null?(t||Kh()).body:(typeof i=="function"&&(i=i()),i!=null&&i.nodeType&&i||null):null;function sM(i){const t=Qy(),[e,s]=Rt(Ag(i.ref,t==null?void 0:t.document));return te(()=>{i.onResolved&&e()&&i.onResolved(e())}),te(()=>{const r=Ag(i.ref);r!==e()&&s(r)}),e}const Jy=se("<div>");let tu;function rM(i){return tu||(tu=new zf({ownerDocument:i==null?void 0:i.document})),tu}function nM(i){const t=Qy(),e=i||rM(t),s={dialog:null,backdrop:null};return Object.assign(s,{add:()=>e.add(s),remove:()=>e.remove(s),isTopModal:()=>e.isTopModal(s),setDialogRef:r=>{s.dialog=r},setBackdropRef:r=>{s.backdrop=r}})}const oM={show:!1,role:"dialog",backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,renderBackdrop:i=>(()=>{const t=Jy();return Xi(t,i,!1,!1),t})(),onHide:()=>{}},aM=i=>{var S;const[t,e]=He(Tt(oM,i),["show","role","class","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered","ref"]),s=sM({get ref(){return t.container}}),r=nM(t.manager),n=p_(),[o,a]=Rt(!1);f_(()=>a(!0)),kn(()=>a(!1));const[l,h]=Rt(!t.show);let c=null;(S=t.ref)==null||S.call(t,r),au(lu(()=>t.show,(M,O)=>{io&&!O&&M&&(c=Jc())})),au(()=>{!t.transition&&!t.show&&!l()?h(!0):t.show&&l()&&h(!1)});const u=()=>{if(r.add(),x=gh(document,"keydown",g),_=gh(document,"focus",()=>setTimeout(p),!0),t.onShow&&t.onShow(),t.autoFocus){const M=Jc(document);r.dialog&&M&&!Tg(r.dialog,M)&&(c=M,r.dialog.focus())}},d=()=>{var M;r.remove(),x==null||x(),_==null||_(),t.restoreFocus&&((M=c==null?void 0:c.focus)==null||M.call(c,t.restoreFocusOptions),c=null)};te(()=>{!t.show||!(s!=null&&s())||u()}),te(lu(l,(M,O)=>{M&&!(O??M)&&d()})),kn(()=>{d()});const p=()=>{if(!t.enforceFocus||!o()||!r.isTopModal())return;const M=Jc();r.dialog&&M&&!Tg(r.dialog,M)&&r.dialog.focus()},m=M=>{var O,N;M.target===M.currentTarget&&((O=t.onBackdropClick)==null||O.call(t,M),t.backdrop===!0&&((N=t.onHide)==null||N.call(t)))},g=M=>{var O,N;t.keyboard&&M.keyCode===27&&r.isTopModal()&&((O=t.onEscapeKeyDown)==null||O.call(t,M),M.defaultPrevented||(N=t.onHide)==null||N.call(t))};let _,x;const b=(...M)=>{var O;h(!0),(O=t.onExited)==null||O.call(t,...M)},y=ae(()=>!!(t.show||t.transition&&!l())),w=Tt({get role(){return t.role},get ref(){return r.setDialogRef},get"aria-modal"(){return t.role==="dialog"?!0:void 0}},e,{get style(){return t.style},get class(){return t.class},tabIndex:-1}),T=()=>{var O,N;const M=ya(()=>t.children);return(N=(O=M())==null?void 0:O.setAttribute)==null||N.call(O,"role","document"),M};let D=()=>m_(n,()=>t.renderDialog?t.renderDialog(w):(()=>{const M=Jy();return Xi(M,w,!1,!0),Wt(M,T),M})());const I=()=>{const M=t.transition;return M?it(M,{appear:!0,unmountOnExit:!0,get in(){return!!t.show},get onExit(){return t.onExit},get onExiting(){return t.onExiting},onExited:b,get onEnter(){return t.onEnter},get onEntering(){return t.onEntering},get onEntered(){return t.onEntered},children:D}):D},P=()=>{let M=null;if(t.backdrop){const O=t.backdropTransition;M=t.renderBackdrop({ref:r.setBackdropRef,onClick:m}),O&&(M=it(O,{appear:!0,get in(){return!!t.show},children:M}))}return M};return it(Mh,{get when(){return ae(()=>!!s())()&&y()},get children(){return it(Sw,{get mount(){return s()},get children(){return[it(P,{}),it(I,{})]}})}})},lM=Object.assign(aM,{Manager:zf}),hM=Sh(null),Cg=hM;function eu(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}const _o="unmounted",cr="exited",gr="entering",gn="entered",Sg="exiting";function on(){}const cM={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:on,onEntering:on,onEntered:on,onExit:on,onExiting:on,onExited:on},uM=i=>{const[t,e]=He(Tt(cM,i),["in","children","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);let s=va(Cg),r,n=s&&!s.isMounting?t.enter:t.appear,o,a=null;t.in?n?(o=cr,a=gr):o=gn:t.unmountOnExit||t.mountOnEnter?o=_o:o=cr;const[l,h]=Rt(o);let c=null;const[u,d]=Rt(!1),p=ae(()=>l()!==_o);f_(()=>{_(!0,a),d(!0)});const m=ae(()=>t.in);au(lu(m,()=>{if(!u())return;const S=l();m()&&S===_o&&h(cr);let M=null;m()?S!==gr&&S!==gn&&(M=gr):(S===gr||S===gn)&&(M=Sg),_(!1,M??cr)})),kn(()=>{y()});function g(){const{timeout:S}=t;let M,O,N;return typeof S=="number"?M=O=N=S:S!=null&&(M=S.exit,O=S.enter,N=S.appear!==void 0?S.appear:O),{exit:M,enter:O,appear:N}}function _(S=!1,M){M!==null?(y(),M===gr?x(S):b()):t.unmountOnExit&&l()===cr&&h(_o)}function x(S){const{enter:M}=t,O=s?s.isMounting:S,[N,B]=t.nodeRef?[O]:[r,O],F=g(),U=O?F.appear:F.enter;if(!S&&!M){w(gn,()=>{t.onEntered(N)});return}t.onEnter(N,B),eu(()=>w(gr,()=>{t.onEntering(N,B),D(U,()=>{w(gn,()=>{t.onEntered(N,B)})})}))}function b(){const{exit:S}=t,M=g(),O=t.nodeRef?void 0:r;if(!S){w(cr,()=>{t.onExited(O)});return}t.onExit(O),eu(()=>w(Sg,()=>{t.onExiting(O),D(M.exit,()=>{w(cr,()=>{t.onExited(O)}),t.unmountOnExit&&eu(()=>{h(_o)})})}))}function y(){c!==null&&(c==null||c.cancel(),c=null)}function w(S,M){M=T(M),h(S),M()}function T(S){let M=!0;return c=(...O)=>{M&&(M=!1,c=null,S(...O))},c.cancel=()=>{M=!1},c}function D(S,M){T(M);const O=t.nodeRef?t.nodeRef:r,N=S==null&&!t.addEndListener;if(!O||N){c&&setTimeout(c,0);return}if(t.addEndListener){const[B,F]=t.nodeRef?[c]:[O,c];t.addEndListener(B,F)}S!=null&&c&&setTimeout(c,S)}let I;function P(){I||(I=ya(()=>t.children));const S=I();return typeof S=="function"?S(l(),e):S}return it(Cg.Provider,{value:null,get children(){return it(Mh,{get when(){return p()},get children(){return P()}})}})},dM=["xxl","xl","lg","md","sm","xs"],tx=Sh({prefixes:{},breakpoints:dM});function Ba(i,t){const e=va(tx);return i||e.prefixes[t]||t}function fM(){const i=va(tx);return()=>i.dir==="rtl"}function pM(i){i.offsetHeight}function mM(i,t,e,s){if(e===void 0&&(e=!1),s===void 0&&(s=!0),i){var r=document.createEvent("HTMLEvents");r.initEvent(t,e,s),i.dispatchEvent(r)}}function gM(i){var t=Dr(i,"transitionDuration")||"",e=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*e}function _M(i,t,e){e===void 0&&(e=5);var s=!1,r=setTimeout(function(){s||mM(i,"transitionend",!0)},t+e),n=gh(i,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(r),n()}}function ex(i,t,e,s){e==null&&(e=gM(i)||0);var r=_M(i,e,s),n=gh(i,"transitionend",t);return function(){r(),n()}}function Pg(i,t){const e=Dr(i,t)||"",s=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*s}function vM(i,t){const e=Pg(i,"transitionDuration"),s=Pg(i,"transitionDelay"),r=ex(i,n=>{n.target===i&&(r(),t(n))},e+s)}const yM={},xM=i=>{const[t,e]=He(Tt(yM,i),["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"]);let[s,r]=Rt();const n=c=>{var u;r(c),(u=t.childRef)==null||u.call(t,c)};function o(c){return u=>{c&&s()&&c(s(),u)}}const a={get onEnter(){return o(t.onEnter)},get onEntering(){return o(t.onEntering)},get onEntered(){return o(t.onEntered)},get onExit(){return o(t.onExit)},get onExiting(){return o(t.onExiting)},get onExited(){return o(t.onExited)},get addEndListener(){return o(t.addEndListener)}},l=ya(()=>t.children);function h(){const c=l();return typeof c=="function"?(u,d)=>c(u,{...d,ref:n}):(n(c),c)}return it(uM,Tt(e,a,{get nodeRef(){return s()},get children(){return h()}}))},bM=xM,wM={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},iu={[gr]:"show",[gn]:"show"},TM=i=>{const[t,e]=He(Tt(wM,i),["class","children","transitionClasses"]),s=(o,a)=>{var l;pM(o),(l=e.onEnter)==null||l.call(e,o,a)};let r,n;return it(bM,Tt({addEndListener:vM,onEnter:s},e,{children:(o,a)=>{var c;r||(r=ya(()=>t.children));let l=r();for(;typeof l=="function";)l=l();a.ref(l);const h=Ki("fade",t.class,iu==null?void 0:iu[o],(c=t.transitionClasses)==null?void 0:c[o]);return $I(l,n,h),n=h,l}}))},ix=TM,EM=se('<button type="button">'),AM={"aria-label":"Close"},CM=i=>{const[t,e]=He(Tt(AM,i),["class","variant"]);return(()=>{const s=EM();return Xi(s,Tt({get class(){return Ki("btn-close",t.variant&&`btn-close-${t.variant}`,t.class)}},e),!1,!1),s})()},SM=CM,PM=se("<div>"),IM=i=>t=>(()=>{const e=PM();return Xi(e,Tt(t,{get class(){return Ki(t.class,i)}}),!1,!1),e})();function Vf(i,{Component:t,defaultProps:e={}}={}){return r=>{const[n,o]=He(Tt({as:t},e,r),["class","bsPrefix","as"]),a=Ba(n.bsPrefix,i);return it(Md,Tt({get component(){return n.as||"div"},get class(){return Ki(n.class,a)}},o))}}function MM(i,t){return i.classList?!!t&&i.classList.contains(t):(" "+(i.className.baseVal||i.className)+" ").indexOf(" "+t+" ")!==-1}function RM(i,t){i.classList?i.classList.add(t):MM(i,t)||(typeof i.className=="string"?i.className=i.className+" "+t:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+t))}function Ig(i,t){return i.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function DM(i,t){i.classList?i.classList.remove(t):typeof i.className=="string"?i.className=Ig(i.className,t):i.setAttribute("class",Ig(i.className&&i.className.baseVal||"",t))}const an={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class OM extends zf{adjustAndStore(t,e,s){const r=e.style[t];e.dataset[t]=r,Dr(e,{[t]:`${parseFloat(Dr(e,t))+s}px`})}restore(t,e){const s=e.dataset[t];s!==void 0&&(delete e.dataset[t],Dr(e,{[t]:s}))}setContainerStyle(t){super.setContainerStyle(t);const e=this.getElement();if(RM(e,"modal-open"),!t.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";nn(e,an.FIXED_CONTENT).forEach(n=>this.adjustAndStore(s,n,t.scrollBarWidth)),nn(e,an.STICKY_CONTENT).forEach(n=>this.adjustAndStore(r,n,-t.scrollBarWidth)),nn(e,an.NAVBAR_TOGGLER).forEach(n=>this.adjustAndStore(r,n,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const e=this.getElement();DM(e,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";nn(e,an.FIXED_CONTENT).forEach(n=>this.restore(s,n)),nn(e,an.STICKY_CONTENT).forEach(n=>this.restore(r,n)),nn(e,an.NAVBAR_TOGGLER).forEach(n=>this.restore(r,n))}}let su;function kM(i){return su||(su=new OM(i)),su}const FM={variant:"primary",active:!1,disabled:!1},BM=i=>{const[t,e]=He(Tt(FM,i),["as","bsPrefix","children","variant","size","active","class"]),s=Ba(t.bsPrefix,"btn"),[r,{tagName:n}]=zI({tagName:t.as,...e});return it(Md,Tt({component:n},r,e,{get class(){return Ki(t.class,s,t.active&&"active",t.variant&&`${s}-${t.variant}`,t.size&&`${s}-${t.size}`,e.href&&e.disabled&&"disabled")},get children(){return t.children}}))},$r=BM;var xl;function Mg(i){if((!xl&&xl!==0||i)&&io){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),xl=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return xl}const LM=Vf("modal-body"),NM=Sh({onHide(){}}),sx=NM,UM=se("<div><div>"),$M={},GM=i=>{const[t,e]=He(Tt($M,i),["bsPrefix","class","contentClass","centered","size","fullscreen","children","scrollable"]),s=Ba(t.bsPrefix,"modal"),r=`${s}-dialog`,n=typeof t.fullscreen=="string"?`${s}-fullscreen-${t.fullscreen}`:`${s}-fullscreen`;return(()=>{const o=UM(),a=o.firstChild;return Xi(o,Tt(e,{get class(){return Ki(r,t.class,t.size&&`${s}-${t.size}`,t.centered&&`${r}-centered`,t.scrollable&&`${r}-scrollable`,t.fullscreen&&n)}}),!1,!0),Wt(a,()=>t.children),Gi(()=>Id(a,Ki(`${s}-content`,t.contentClass,t.contentClass))),o})()},rx=GM,HM=Vf("modal-footer"),zM=se("<div>"),VM={closeLabel:"Close",closeButton:!1},jM=i=>{const[t,e]=He(Tt(VM,i),["closeLabel","closeVariant","closeButton","onHide","children"]),s=va(sx),r=()=>{var n;s==null||s.onHide(),(n=t.onHide)==null||n.call(t)};return(()=>{const n=zM();return Xi(n,e,!1,!0),Wt(n,()=>t.children,null),Wt(n,(()=>{const o=ae(()=>!!t.closeButton);return()=>o()&&it(SM,{get"aria-label"(){return t.closeLabel},get variant(){return t.closeVariant},onClick:r})})(),null),n})()},WM=jM,XM={closeLabel:"Close",closeButton:!1},YM=i=>{const[t,e]=He(Tt(XM,i),["bsPrefix","class"]),s=Ba(t.bsPrefix,"modal-header");return it(WM,Tt(e,{get class(){return Ki(t.class,s)}}))},qM=YM,KM=IM("h4"),ZM=Vf("modal-title",{Component:KM}),QM=se("<div>"),JM=se('<div role="dialog">'),tR={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:rx};function eR(i){return it(ix,Tt(i,{timeout:void 0}))}function iR(i){return it(ix,Tt(i,{timeout:void 0}))}const sR=i=>{const[t,e]=He(Tt(tR,i),["bsPrefix","class","style","dialogClass","contentClass","children","dialogAs","aria-labelledby","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClass","manager"]),[s,r]=Rt({}),[n,o]=Rt(!1);let a=!1,l=!1,h=null,c;const u=fM(),d=U=>{var V;c=U,(V=e.ref)==null||V.call(e,U)},p=Ba(t.bsPrefix,"modal"),m={get onHide(){return t.onHide}};function g(){return t.manager?t.manager:kM({isRTL:u()})}function _(U){if(!io)return;const V=g().getScrollbarWidth()>0,k=U.scrollHeight>Kh(U).documentElement.clientHeight;r({paddingRight:V&&!k?Mg():void 0,paddingLeft:!V&&k?Mg():void 0})}const x=()=>{c&&_(c.dialog)};kn(()=>{cd(window,"resize",x),h==null||h()});const b=()=>{a=!0},y=U=>{a&&c&&U.target===c.dialog&&(l=!0),a=!1},w=()=>{o(!0),h=ex(c.dialog,()=>{o(!1)})},T=U=>{U.target===U.currentTarget&&w()},D=U=>{var V;if(t.backdrop==="static"){T(U);return}if(l||U.target!==U.currentTarget){l=!1;return}(V=t.onHide)==null||V.call(t)},I=U=>{!t.keyboard&&t.backdrop==="static"?(U.preventDefault(),w()):t.keyboard&&t.onEscapeKeyDown&&t.onEscapeKeyDown(U)},P=(U,...V)=>{var k;U&&(U.style.display="block",_(U)),(k=t.onEnter)==null||k.call(t,U,...V)},S=(...U)=>{var V;h==null||h(),(V=t.onExit)==null||V.call(t,...U)},M=(...U)=>{var V;(V=t.onEntering)==null||V.call(t,...U),Zy(window,"resize",x)},O=U=>{var V;U&&(U.style.display=""),(V=t.onExited)==null||V.call(t,U),cd(window,"resize",x)},N=U=>(()=>{const V=QM();return Xi(V,Tt(U,{get class(){return Ki(`${p}-backdrop`,t.backdropClass,!t.animation&&"show")}}),!1,!1),V})(),B=()=>{let U={...t.style,...s()};return t.animation||(U.display="block"),U},F=U=>(()=>{const V=JM();return Xi(V,Tt(U,{get style(){return B()},get class(){return Ki(t.class,p,n()&&`${p}-static`)},get onClick(){return t.backdrop?D:void 0},onMouseUp:y,get"aria-labelledby"(){return t["aria-labelledby"]}}),!1,!0),Wt(V,it(Md,Tt({get component(){return t.dialogAs}},e,{onMouseDown:b,get class(){return t.dialogClass},get contentClass(){return t.contentClass},get children(){return t.children}}))),V})();return it(sx.Provider,{value:m,get children(){return it(lM,{get show(){return t.show},ref:d,get backdrop(){return t.backdrop},get container(){return t.container},keyboard:!0,get autoFocus(){return t.autoFocus},get enforceFocus(){return t.enforceFocus},get restoreFocus(){return t.restoreFocus},get restoreFocusOptions(){return t.restoreFocusOptions},onEscapeKeyDown:I,get onShow(){return t.onShow},get onHide(){return t.onHide},onEnter:P,onEntering:M,get onEntered(){return t.onEntered},onExit:S,get onExiting(){return t.onExiting},onExited:O,get manager(){return g()},get transition(){return t.animation?eR:void 0},get backdropTransition(){return t.animation?iR:void 0},renderBackdrop:N,renderDialog:F})}})},qt=Object.assign(sR,{Body:LM,Header:qM,Title:ZM,Footer:HM,Dialog:rx,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function nx(i){return xa({a:{viewBox:"0 0 24 24"},c:'<path d="M4 8H2v12a2 2 0 0 0 2 2h12v-2H4z"/><path d="M20 2H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm-9 12V6l7 4z"/>'},i)}const rR=()=>it(qt,{centered:!0,get show(){return D_.getMoreCredits},onHide:ks,get children(){return[it(qt.Header,{closeButton:!0,get children(){return it(qt.Title,{children:"No credits"})}}),it(qt.Body,{children:"Watch an ad to get more credits"}),it(qt.Footer,{get children(){return[it($r,{variant:"secondary",onClick:ks,children:"No, thank you"}),it($r,{variant:"primary",onClick:Uw,get children(){return["Watch ",it(nx,{})]}})]}})]}}),nR=()=>it(qt,{centered:!0,get show(){return D_.oneMoreChance},onHide:Vp,get children(){return[it(qt.Header,{closeButton:!0,get children(){return it(qt.Title,{children:"Need one chance?"})}}),it(qt.Body,{children:"Watch an advertisement to earn an additional chance and retain half of your current winnings."}),it(qt.Footer,{get children(){return[it($r,{variant:"secondary",onClick:Vp,children:"No, thank you"}),it($r,{variant:"primary",onClick:$w,get children(){return["Watch ",it(nx,{})]}})]}})]}}),Io="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI0AAAB5CAYAAAAEXaKqAAAMTUlEQVR4nO3cW2wbdb7A8W9uDrnZTqvSPqTYlVoRRIiNBFUvBFttooMqpAYFti8VDnCAgIDk9PCCKjapEPDCUZOiikuhTQoEWIgSkIBdrZo6ElLLghpDzkJUCHadNk1LG1+iXJyb98GyGyexZ2I7l+7+PtJf8Tj/m2d+/s9/xjMDQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghxL+ntCWo0wAYl6BekRgv8ONKd2IhFqAbCEpatckJ1MbagMttL+Bh5VeKJHWpfeHNqF4qdk+nAatlO1h3gLEIjBtTUKtICa8fHP8EVz+0/CXythXoSrTOZIPGBjTv/S/oOJFkTWk6yDLH/n+mGdL1STayykw6IOhd+H8zXphK7VSk8Rj8Tz0AHcBDidaTbNC0A5XO7xIcXTJNUNgBmcYku/FvbrQZfI+lpCrjVrhwEQA94EukjmSDJmi6Exx/v/GG4/9DQ+KipetCo4kICXphMvmRRq8Fc8mN5bo/Q9N7QJK7qERZgGDtfxMMDoSS7U8rPsmTtECq/98b26j9eOT9+tibNr7MRAuG6XWhv+GJVn19PXV1dej1N+Yf4+PjjI+PMzk5yfj4OIFAIPI6/H4gEIibJxAIMDExoZhvdl3x6v5Pcuj/oPpPoSmEXpt8fUkHTZirH0wmEw0NDaFllwuXy8XExARTU1NMTExEXk9OTka9Pzk5ydTUFB6Ph99++42ZmRmmpqYiafby7NfT09NMT09z5coVZmZmmJmZIRgMRl7HWv5P5OpP3VFtyoIGQK/X43A4sFqt+HwJzbFWDYPBAMCFCxdWuCerT0qDBqChoSEqYHQ6HWZzchNcr9fLjz8uz5lwm81GdXU1VqsVr9eL2WxOKHAsFkvSfXG5XKsyaFMeNF5v9HkHs9mM3W5PdTPY7XYcDgcdHR10dSV3EGAymairq6OysjJqLqbX62loaOCxxxZ/uLuUn7mxsXHxwZRhAFY+AC3Mmpmf/pygxWIJAsHMzMygRqMJajSaYHl5eXCp2e324Lp16yJtqk3l5eVBh8OhWP+WLVsWXfdSO3LkiOq+pKWlBU//rT6ynVjpo6fZHA4HANPT0xQWFpKenk5PTw8vv/wyJSUl7Nu3T7GOTz/9lP7+fnbs2AHAxo0b2bgx/gzOYrHQ2dlJeXn5ovq7bds2TCaTYr5XXnmF2trF/dZns9m4/fbbefrppxXz/vDDDwwNDWEwGNBqtZSUlCiWef755wkEArzxxhuKeYeGhiBNHzrrntj5vCgpDZrwXCYYDOL3+zEYDGRkZNDW1kZbWxulpaXccccdcev4+uuv+f777zl+/HjkvTfffJPdu3fHLVdSUsLDDz9MZ2en6v6eOXNGVb59+/Zx7NgxBgYG5v0vfGgfPpSfnp4mEAhw8uRJAJxOJ3v37o1bf2trKx9//DEAWVlZ7Ny5k3feeYe1a9ei1WrJyspasNxTTz0VtZ5iGR4eDv1Ek2UmFefzUj6nCQsEAly7do3NmzeTmRlqZmxsTLFcQUEBhYWFUe+1t7crBg3Ali1b6O7uVt1Hq9WqOu+BAwd49dVXuX79On6/n5GREfx+5VPf4+PjMTd6WEZGRuT15OQkdrudd999l4qKCgAKCwu59dZbWb9+PTk5OZG8Wq2WXbt2KX7mS5cuKfZzMZYsaCA0LPb29lJaWopOp1NcebBw0BQUFKhqb3BwcF7ZeJ588klV+a5fv87mzZu5dOnSoiegGRkZaDQaxTxzXbt2LVJuZGQEp9OJ0+lEr9dTVFTEunXrgNARltJnDn9pU2VJgwbA7/fz3Xffcc8996jqfH5+/ryVsGnTJsVyIyMjXLx4UXXQlJWVsX79+pj/Hx0d5fz58wwODjI1NQVAZWUlTU1NquoPy8jIIDs7WzHPXEVFRQuWGxsb49dff8XtdpOenq7q86r5si7GkgcNhIbcM2fO0NnZSWFhIRs2bIiZd+5Ik5OTQ1VVlWIb7e3tqgMmJyeH/fv3R5ZHR0cByM3NxePx4Ha7+eOPP4DQtzQc7A8++CCffPIJV65cUdVOuPwtt9yimGe2/Px8KioqFMsdOHAAt9tNWVkZWm3s3wduupFmtuHhYc6dO8eaNWswGo0LBs/9999PaWlpZHnbtm0xV974+DgOh4OzZ8/i9XpZs2aNqn5YrVZyc3Mjy19++SV9fX3s2bOHkZERgJhtPv7447z++uuq2gHQaDTk5eXFzbNp0ya2bt0KwNatW3nooYfifrEAWlpaIueCfv/9dywWS8x1dVMHTXZ2Njk5OYyNjfHLL79E9tEbNmyIjBLxzh4HAoHICNDX18fPP//MxMQEaWlpqkcZjUbD9u3bGR0d5erVqwwMDFBTU8P09DQ7d+5UnD9VVVXR3NzM5cuXVbWXlZWlGDT79++PGvli8fl8fPbZZ7z//vtcvHgx6n9dXV309PTwwAMPRAJwdh9SaUWCZjafzxc5VM/NzUWr1ZKXl0dubu68lZ2dnU1RUREQ2udv376dwcFB+vr66O/vn9fehQsXIrue0dFR3G43e/bswe12MzMzA8CxY8ci7be1tfHcc88pfo4XXniBl156SdVn1mg05Ofnq8o7l9vtxu124/P5+Pbbb3n77bfj5h8aGqK1tZVz585x3333UVZWBtzkI01OTo7iCvzwww8ZGBjg3nvvBeCuu+5i7dq1ccsYjUauXr1KU1MTw8PDOJ3OyG5mtqKiIo4ePRpZ7u/vp7m5ObJ88uRJnn32WXQ6Xdz2Hn30UY4ePTrv276QrKysqF3hQsK/MZlMpqifMYqLiykuLgbgkUceoampia6uLl588UV++umnmPX19vbS29vLqVOn2L17d8ovBVnWoMnLy1PcIF999RVnz57lrbfeAkLnIr755hvFs8I7duxgZGSEJ554ImaegwcPRu1+jhw5EvV/v9/PBx98oGoUOXjwIM8884xiPjWH3K2trRw6dAidTofL5YoKnLkqKipoaWnh7rvvVmzb6XTy3nvvKeZbrPSU1xhHXl4eWq02bpo7lPr9fmpqahTLabVaqqqquO222xZs22QyUVNTQ0FBQSR99NFHBIPBqPTaa69F5YmVampqIpdPpIrP56OxsVExn9lsxmazpbTtxVj2oNHpdHHTQucsenp6cDqdimV1Ol3MczpqNsZihS84S6XGxsZ5VwosV9tqLWvQJEPNiozFYrEs6icDtaqrq1dstDEajSs22tw0QaP2Qq7wL+2zzf1WVlZWkpaWFjepHZmWarRJedsz3lBKgWUNmngTvHjq6+tVlbXb7fMuM62trZ03ynzxxReKdXV0dKjqW3V1ddxvvJp+G43GqGWfzxd1VBevnOpLNqYcKb/5LhHzLsIixi0UJpMpeOLECVUXF3V3dwdPnz4dSU6nU1U5j8cTNBgMkTZ1Ol2wtrZ2wby1tbVBnU4Xs782m011u7PrNJlMkToMBkOwtrY26PF4VJU/fPhwVP8tFouqch6PJ2iz2RRvYzn9lS1lF2ElQ1XQqP3wyfB4PJGrBoFgfX29qnJ79+6d19/29vak+hIOnEQ4nc6ovnR3d6su6/F44gfN5/O2U8JBc9PMaRbicDioq6vDaDRGXSesdtK70Dwp0V1oKsrP3U0t5ogv2X4vxpKf3Avf0rIU9ca6TWbuzXqxuFyuhMvG6xcs7gKvWFpaWhbs40pb8qDx+XxJ3y2wWMnc7pKqW2VS9ZmXe92pcVPvnsTKSOlIk+oTXSI1BgcHgdT9aJnSoCkuLla8dkQsv1OnTrEqg8Z8J5w/f55du3alqkqRApcvX8bn82G+M3V1JhM0Lgg9xAhCjxx5odpJx1/fT75XNxNN8vdsxzXlgJnkbnA7fOjGI2Ec/4y8nfBvCsk+CctjKELv+keStaw2ubVwS2XodYZxdT/eLWAP/Q16waP8GL3qusgDG60keOdcskFzAqhuPw6VDyRZ02qTaQKN9eZ4OOSEHSaUt7/XB4WhG1y9gPobxOZINmgsgF2nBfvn0c92E6uL1wfWh+HH0O6pGUj4yY+peI7wYaBOpw09oksf/2pOsUKaP4081dMLmFkFzx05zSp4IKEkVUn5MRnLREfomcIrvUIkxU7drKKAEUIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgihyr8APvo/yZxiYygAAAAASUVORK5CYII=",Mo="/mini-slot/2xBAR-efa6cd69.png",Ro="/mini-slot/3xBAR-e2818b14.png",Do="/mini-slot/Seven-926b1e64.png",Oo="/mini-slot/Cherry-dbf05cd9.png",oR=se('<table class="table table-dark table-hover table-responsive"><thead><tr><td>Reel 1</td><td>Reel 2</td><td>Reel 3</td><td>TOP</td><td>MIDDLE</td><td>BOTTOM</td></tr></thead><tbody><tr><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td class="v-align"><b>600</b>xBET</td><td class="v-align"><b>300</b>xBET</td><td class="v-align"><b>900</b>xBET</td></tr><tr><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td class="v-align"><b>150</b>xBET</td><td class="v-align"><b>450</b>xBET</td><td class="v-align"><b>300</b>xBET</td></tr><tr><td colspan="3" title="Any combinations"><img alt="img" width="40"> x<img alt="img" width="40"></td><td class="v-align"><b>75</b>xBET</td><td class="v-align"><b>75</b>xBET</td><td class="v-align"><b>75</b>xBET</td></tr><tr><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td class="v-align"><b>50</b>xBET</td><td class="v-align"><b>50</b>xBET</td><td class="v-align"><b>50</b>xBET</td></tr><tr><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td class="v-align"><b>20</b>xBET</td><td class="v-align"><b>20</b>xBET</td><td class="v-align"><b>20</b>xBET</td></tr><tr><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td><img alt="img" width="40"></td><td class="v-align"><b>10</b>xBET</td><td class="v-align"><b>10</b>xBET</td><td class="v-align"><b>10</b>xBET</td></tr><tr><td colspan="3" title="Any combinations"><img alt="img" width="40">x<img alt="img" width="40">x<img alt="img" width="40"></td><td><b>5</b>xBET</td><td><b>5</b>xBET</td><td><b>5</b>xBET'),aR=()=>{const[i,t]=Rt(!1),e=()=>t(!0),s=()=>t(!1);return[it($r,{variant:"link",class:"align-items-center",onClick:e,children:"Pay Table"}),it(qt,{get show(){return i()},onHide:s,size:"lg",centered:!0,get children(){return[it(qt.Header,{closeButton:!0,get children(){return it(qt.Title,{id:"contained-modal-title-vcenter",children:"Pay Table"})}}),it(qt.Body,{class:"overflow-auto",get children(){const r=oR(),n=r.firstChild,o=n.nextSibling,a=o.firstChild,l=a.firstChild,h=l.firstChild,c=l.nextSibling,u=c.firstChild,d=c.nextSibling,p=d.firstChild,m=a.nextSibling,g=m.firstChild,_=g.firstChild,x=g.nextSibling,b=x.firstChild,y=x.nextSibling,w=y.firstChild,T=m.nextSibling,D=T.firstChild,I=D.firstChild,P=I.nextSibling,S=P.nextSibling,M=T.nextSibling,O=M.firstChild,N=O.firstChild,B=O.nextSibling,F=B.firstChild,U=B.nextSibling,V=U.firstChild,k=M.nextSibling,W=k.firstChild,$=W.firstChild,E=W.nextSibling,L=E.firstChild,G=E.nextSibling,R=G.firstChild,z=k.nextSibling,X=z.firstChild,tt=X.firstChild,et=X.nextSibling,ht=et.firstChild,ct=et.nextSibling,at=ct.firstChild,j=z.nextSibling,gt=j.firstChild,xt=gt.firstChild,Gt=xt.nextSibling,St=Gt.nextSibling,Pt=St.nextSibling,re=Pt.nextSibling;return kt(h,"src",Oo),kt(u,"src",Oo),kt(p,"src",Oo),kt(_,"src",Do),kt(b,"src",Do),kt(w,"src",Do),kt(I,"src",Do),kt(S,"src",Oo),kt(N,"src",Ro),kt(F,"src",Ro),kt(V,"src",Ro),kt($,"src",Mo),kt(L,"src",Mo),kt(R,"src",Mo),kt(tt,"src",Io),kt(ht,"src",Io),kt(at,"src",Io),kt(xt,"src",Io),kt(St,"src",Mo),kt(re,"src",Ro),r}})]}})]},lR=se('<div class="d-flex flex-column align-items-center"><div><label for="sound">Sound</label><input type="checkbox" id="sound"></div><div><label for="music">Music</label><input type="checkbox" id="music"></div>TODO: Add more settings'),hR=i=>it(qt,{centered:!0,get show(){return i.show},get onHide(){return i.hide},get children(){return[it(qt.Header,{closeButton:!0,get children(){return it(qt.Title,{children:"Settings"})}}),it(qt.Body,{get children(){const t=lR(),e=t.firstChild;return Wt(t,it(aR,{}),e),t}}),it(qt.Footer,{get children(){return it($r,{variant:"secondary",get onClick(){return i.hide},children:"Close"})}})]}});function cR(i){return xa({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M9.1 4.4 8.6 2H7.4l-.5 2.4-.7.3-2-1.3-.9.8 1.3 2-.2.7-2.4.5v1.2l2.4.5.3.8-1.3 2 .8.8 2-1.3.8.3.4 2.3h1.2l.5-2.4.8-.3 2 1.3.8-.8-1.3-2 .3-.8 2.3-.4V7.4l-2.4-.5-.3-.8 1.3-2-.8-.8-2 1.3-.7-.2zM9.4 1l.5 2.4L12 2.1l2 2-1.4 2.1 2.4.4v2.8l-2.4.5L14 12l-2 2-2.1-1.4-.5 2.4H6.6l-.5-2.4L4 13.9l-2-2 1.4-2.1L1 9.4V6.6l2.4-.5L2.1 4l2-2 2.1 1.4.4-2.4h2.8zm.6 7c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM8 9c.6 0 1-.4 1-1s-.4-1-1-1-1 .4-1 1 .4 1 1 1z"/>'},i)}const uR=()=>{const[i,t]=Rt(!1),e=()=>t(!1),s=()=>t(!0);return[it(rR,{}),it(nR,{}),it($r,{variant:"secondary",onClick:s,get children(){return it(cR,{})}}),it(hR,{get show(){return i()},hide:e})]};Sd(()=>it(MI,{}),b_);Sd(()=>it(NI,{}),w_);Sd(()=>it(uR,{}),T_);const ox="/mini-slot/backgrounds/background-01.jpg",dR="/mini-slot/win-dff21367.mp3",fR="/mini-slot/spin-12eedf8e.mp3";/*!
 * PixiPlugin 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ds,Rg,_h,ke,zo,ax,ud,lx=function(){return typeof window<"u"},hx=function(){return Ds||lx()&&(Ds=window.gsap)&&Ds.registerPlugin&&Ds},dd=function(t){return typeof t=="function"},cx=function(t){return console.warn(t)},pR=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],qe=.212671,Ke=.71516,Ze=.072169,ux=function(t){return dd(ke[t])?ke[t]:ke.filters[t]},Zh=function(t,e){var s=[],r=0,n=0,o,a;for(o=0;o<4;o++){for(a=0;a<5;a++)n=a===4?t[r+4]:0,s[r+a]=t[r]*e[a]+t[r+1]*e[a+5]+t[r+2]*e[a+10]+t[r+3]*e[a+15]+n;r+=5}return s},Dg=function(t,e){var s=1-e,r=s*qe,n=s*Ke,o=s*Ze;return Zh([r+e,n,o,0,0,r,n+e,o,0,0,r,n,o+e,0,0,0,0,0,1,0],t)},Og=function(t,e,s){var r=_h(e),n=r[0]/255,o=r[1]/255,a=r[2]/255,l=1-s;return Zh([l+s*n*qe,s*n*Ke,s*n*Ze,0,0,s*o*qe,l+s*o*Ke,s*o*Ze,0,0,s*a*qe,s*a*Ke,l+s*a*Ze,0,0,0,0,0,1,0],t)},kg=function(t,e){e*=Math.PI/180;var s=Math.cos(e),r=Math.sin(e);return Zh([qe+s*(1-qe)+r*-qe,Ke+s*-Ke+r*-Ke,Ze+s*-Ze+r*(1-Ze),0,0,qe+s*-qe+r*.143,Ke+s*(1-Ke)+r*.14,Ze+s*-Ze+r*-.283,0,0,qe+s*-qe+r*-(1-qe),Ke+s*-Ke+r*Ke,Ze+s*(1-Ze)+r*Ze,0,0,0,0,0,1,0,0,0,0,0,1],t)},Fg=function(t,e){return Zh([e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0],t)},dx=function(t,e){var s=ux(e),r=t.filters||[],n=r.length,o;for(s||cx(e+" not found. PixiPlugin.registerPIXI(PIXI)");--n>-1;)if(r[n]instanceof s)return r[n];return o=new s,e==="BlurFilter"&&(o.blur=0),r.push(o),t.filters=r,o},Kt=function(t,e,s,r){e.add(s,t,s[t],r[t]),e._props.push(t)},Bg=function(t,e){var s=ux("ColorMatrixFilter"),r=new s;return r.matrix=e,r.brightness(t,!0),r.matrix},mR=function(t){var e={},s;for(s in t)e[s]=t[s];return e},Ie={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},gR=function(t,e,s){var r=dx(t,"ColorMatrixFilter"),n=t._gsColorMatrixFilter=t._gsColorMatrixFilter||mR(Ie),o=e.combineCMF&&!("colorMatrixFilter"in e&&!e.colorMatrixFilter),a,l,h;for(h=r.matrix,e.resolution&&(r.resolution=e.resolution),e.matrix&&e.matrix.length===h.length?(l=e.matrix,n.contrast!==1&&Kt("contrast",s,n,Ie),n.hue&&Kt("hue",s,n,Ie),n.brightness!==1&&Kt("brightness",s,n,Ie),n.colorizeAmount&&(Kt("colorize",s,n,Ie),Kt("colorizeAmount",s,n,Ie)),n.saturation!==1&&Kt("saturation",s,n,Ie)):(l=pR.slice(),e.contrast!=null?(l=Fg(l,+e.contrast),Kt("contrast",s,n,e)):n.contrast!==1&&(o?l=Fg(l,n.contrast):Kt("contrast",s,n,Ie)),e.hue!=null?(l=kg(l,+e.hue),Kt("hue",s,n,e)):n.hue&&(o?l=kg(l,n.hue):Kt("hue",s,n,Ie)),e.brightness!=null?(l=Bg(+e.brightness,l),Kt("brightness",s,n,e)):n.brightness!==1&&(o?l=Bg(n.brightness,l):Kt("brightness",s,n,Ie)),e.colorize!=null?(e.colorizeAmount="colorizeAmount"in e?+e.colorizeAmount:1,l=Og(l,e.colorize,e.colorizeAmount),Kt("colorize",s,n,e),Kt("colorizeAmount",s,n,e)):n.colorizeAmount&&(o?l=Og(l,n.colorize,n.colorizeAmount):(Kt("colorize",s,n,Ie),Kt("colorizeAmount",s,n,Ie))),e.saturation!=null?(l=Dg(l,+e.saturation),Kt("saturation",s,n,e)):n.saturation!==1&&(o?l=Dg(l,n.saturation):Kt("saturation",s,n,Ie))),a=l.length;--a>-1;)l[a]!==h[a]&&s.add(h,a,h[a],l[a],"colorMatrixFilter");s._props.push("colorMatrixFilter")},_R=function(t,e){var s=e.t,r=e.p,n=e.color,o=e.set;o(s,r,n[0]<<16|n[1]<<8|n[2])},vR=function(t,e){var s=e.g;s&&(s.dirty++,s.clearDirty++)},yR=function(t,e){e.t.visible=!!e.t.alpha},Lg=function(t,e,s,r){var n=t[e],o=_h(dd(n)?t[e.indexOf("set")||!dd(t["get"+e.substr(3)])?e:"get"+e.substr(3)]():n),a=_h(s);r._pt=new zo(r._pt,t,e,0,0,_R,{t,p:e,color:o,set:ax(t,e)}),r.add(o,0,o[0],a[0]),r.add(o,1,o[1],a[1]),r.add(o,2,o[2],a[2])},xR={tint:1,lineColor:1,fillColor:1},Ng="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),fd={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},bR={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},vh=Math.PI/180,fx=function(t){return typeof t=="string"},wR=function(t){return fx(t)&&t.charAt(1)==="="?t.substr(0,2)+parseFloat(t.substr(2))*vh:t*vh},TR=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e5)/1e5,e)},ER=function(t,e,s,r,n,o){var a=360*(o?vh:1),l=fx(n),h=l&&n.charAt(1)==="="?+(n.charAt(0)+"1"):0,c=parseFloat(h?n.substr(2):n)*(o?vh:1),u=h?c*h:c-r,d=r+u,p,m;return l&&(p=n.split("_")[1],p==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),p==="cw"&&u<0?u=(u+a*1e10)%a-~~(u/a)*a:p==="ccw"&&u>0&&(u=(u-a*1e10)%a-~~(u/a)*a)),t._pt=m=new zo(t._pt,e,s,r,u,TR),m.e=d,m},Ug=function(){lx()&&(Rg=window,Ds=hx(),ke=ke||Rg.PIXI,ud=ke&&ke.VERSION&&ke.VERSION.charAt(0)==="4",_h=function(e){return Ds.utils.splitColor((e+"").substr(0,2)==="0x"?"#"+e.substr(2):e)})},bl,vo;for(bl=0;bl<Ng.length;bl++)vo=Ng[bl],fd[vo+"X"]=vo,fd[vo+"Y"]=vo;var jf={version:"3.12.2",name:"pixi",register:function(t,e,s){Ds=t,zo=s,ax=e.getSetter,Ug()},registerPIXI:function(t){ke=t},init:function(t,e,s,r,n){if(ke||Ug(),!ke||!(t instanceof ke.DisplayObject))return cx(t),!1;var o,a,l,h,c,u,d,p,m;for(u in e){if(o=fd[u],l=e[u],o)a=~u.charAt(u.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(t[o],a,t[o][a],o==="skew"?wR(l):l,0,0,0,0,0,1);else if(u==="scale"||u==="anchor"||u==="pivot"||u==="tileScale")this.add(t[u],"x",t[u].x,l),this.add(t[u],"y",t[u].y,l);else if(u==="rotation"||u==="angle")ER(this,t,u,t[u],l,u==="rotation");else if(bR[u])h||(gR(t,e.colorMatrixFilter||e,this),h=!0);else if(u==="blur"||u==="blurX"||u==="blurY"||u==="blurPadding"){if(c=dx(t,"BlurFilter"),this.add(c,u,c[u],l),e.blurPadding!==0)for(d=e.blurPadding||Math.max(c[u],l)*2,p=t.filters.length;--p>-1;)t.filters[p].padding=Math.max(t.filters[p].padding,d)}else if(xR[u])if((u==="lineColor"||u==="fillColor")&&t instanceof ke.Graphics)for(m=(t.geometry||t).graphicsData,this._pt=new zo(this._pt,t,u,0,0,vR,{g:t.geometry||t}),p=m.length;--p>-1;)Lg(ud?m[p]:m[p][u.substr(0,4)+"Style"],ud?u:"color",l,this);else Lg(t,u,l,this);else u==="autoAlpha"?(this._pt=new zo(this._pt,t,"visible",0,0,yR),this.add(t,"alpha",t.alpha,l),this._props.push("alpha","visible")):u!=="resolution"&&this.add(t,u,"get",l);this._props.push(u)}}};hx()&&Ds.registerPlugin(jf);const As=class As{static imageFileVerify(t){const e=As.extract(t);return As.imageAllowedExtensions.includes(e)?null:Error(`Image type [${e}] not allowed to load!`)}static audioFileVerify(t){const e=As.extract(t);return As.audioAllowedExtensions.includes(e)?null:new Error(`Audio type [${e}] not allowed to load!`)}static extract(t){const e=t.split(".");return e[e.length-1].toLowerCase()}};q(As,"imageAllowedExtensions",["png","jpg","bmp","gif","svg","tif","tiff","webp","jpeg"]),q(As,"audioAllowedExtensions",["mp3","wav","ogg"]);let yh=As,AR=class{constructor(){q(this,"errors",[]);q(this,"imageResources",[]);q(this,"audioResources",[]);q(this,"images",new Map);q(this,"audios",new Map);q(this,"counter",0);q(this,"callback",()=>{})}get total(){return this.imageResources.length+this.audioResources.length}get progress(){return this.counter/this.total*100}get done(){return this.progress===100}get loaded(){return this.counter}onProgress(t){return this.callback=t,this}startLoading(){return console.time("Resource loading finished in"),this.errors.length?Promise.reject(this.errors.pop()):(console.log("Started"),Promise.all([Promise.all(this.imageResources.map(this.loadImage.bind(this))),Promise.all(this.audioResources.map(this.loadAudio.bind(this)))]).then(([t,e])=>{for(const[s,r]of t)this.images.set(s,r);for(const[s,r]of e)this.audios.set(s,r)}).then(()=>console.timeEnd("Resource loading finished in")).then(()=>Promise.resolve({images:this.images,audios:this.audios})))}addImage(t){const e=yh.imageFileVerify(t);if(e){this.errors.push(e);return}this.imageResources.push(t)}addImages(...t){for(const e of t)this.addImage(e);return this}addAudio(t){const e=yh.audioFileVerify(t);if(e){this.errors.push(e);return}this.audioResources.push(t)}addAudios(...t){for(const e of t)this.addAudio(e);return this}loadImage(t){return new Promise((e,s)=>{const r=new Image;r.src=t,r.addEventListener("load",()=>{this.counter++,this.callback({total:this.total,loaded:this.loaded,progress:this.progress,done:this.done}),e([t,r])}),r.addEventListener("error",()=>s(new Error(`Resource [${t}] was not able to load!`)))})}loadAudio(t){return new Promise((e,s)=>{const r=new Audio(t),n=()=>{this.counter++,this.callback({total:this.total,loaded:this.loaded,progress:this.progress,done:this.done}),e([t,r])};r.addEventListener("canplaythrough",n),r.load(),e([t,r]),r.addEventListener("error",()=>s(new Error(`Resource [${t}] was not able to load!`)))})}};const bn=class bn{static addAudios(t){bn.loader.addAudios(...t)}static loadAudios(t,e){return typeof e=="function"&&bn.loader.onProgress(({progress:s})=>{e(s/100)}),bn.loader.startLoading().then(({audios:s})=>s)}};q(bn,"loader",new AR);let xh=bn;Bn.isCrazyGames()&&window.CrazyGames.SDK.game.sdkGameLoadingStart().then(()=>console.info("CrazyGames SDK loading started")).catch(i=>{console.error(`Error while loading CrazyGames SDK: ${i}`)});Gf.registerPlugin(jf);jf.registerPIXI(sS);Z.ROUND_PIXELS=!0;const bh=ga.getInstance(),Bi={images:0,audios:0,setImage(i){Bi.images=i,bh.updateProgress(Bi.value)},setAudio(i){Bi.audios=i,bh.updateProgress(Bi.value)},get value(){return(Bi.images+Bi.audios)/2}};xh.addAudios([dR,fR]);br.addBundle(zl.IMAGES,{[bt.BARx1]:Io,[bt.BARx2]:Mo,[bt.BARx3]:Ro,[bt.SEVEN]:Do,[bt.CHERRY]:Oo,[bt.BACKGROUND]:ox});const CR=[br.loadBundle(zl.IMAGES,Bi.setImage.bind(Bi)),xh.loadAudios(zl.AUDIOS,Bi.setAudio.bind(Bi))];Promise.all(CR).then(([i,t])=>{hs.images=i,hs.audios=t,document.body.style.backgroundImage=`url(${ox})`,bh.setup()}).then(()=>{Bn.isCrazyGames()&&window.CrazyGames.SDK.game.sdkGameLoadingStop()}).then(()=>bh.start()).then(()=>{Bn.isCrazyGames()&&window.CrazyGames.SDK.game.gameplayStart()}).catch(i=>{console.error((i==null?void 0:i.message)||i)});window.addEventListener("wheel",i=>i.preventDefault(),{passive:!1});window.addEventListener("keydown",i=>{["ArrowUp","ArrowDown"," "].includes(i.key)&&i.preventDefault()});
//# sourceMappingURL=index-302caad8.js.map
